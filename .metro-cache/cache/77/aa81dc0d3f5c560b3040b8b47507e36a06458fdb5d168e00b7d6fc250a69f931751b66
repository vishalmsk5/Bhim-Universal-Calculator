{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo01xDSid\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo01xDSid;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo01xDSid';\n  var dependencies = ['typed'];\n  var createMatAlgo01xDSid = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed;\n    /**\n     * Iterates over SparseMatrix nonzero items and invokes the callback function f(Dij, Sij).\n     * Callback function invoked NNZ times (number of nonzero items in SparseMatrix).\n     *\n     *\n     *          ┌  f(Dij, Sij)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  Dij          ; otherwise\n     *\n     *\n     * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n     * @param {Matrix}   sparseMatrix      The SparseMatrix instance (S)\n     * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n     *\n     * @return {Matrix}                    DenseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n     */\n    return function algorithm1(denseMatrix, sparseMatrix, callback, inverse) {\n      // dense matrix arrays\n      var adata = denseMatrix._data;\n      var asize = denseMatrix._size;\n      var adt = denseMatrix._datatype || denseMatrix.getDataType();\n      // sparse matrix arrays\n      var bvalues = sparseMatrix._values;\n      var bindex = sparseMatrix._index;\n      var bptr = sparseMatrix._ptr;\n      var bsize = sparseMatrix._size;\n      var bdt = sparseMatrix._datatype || sparseMatrix._data === undefined ? sparseMatrix._datatype : sparseMatrix.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!bvalues) {\n        throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // process data types\n      var dt = typeof adt === 'string' && adt !== 'mixed' && adt === bdt ? adt : undefined;\n      // callback function\n      var cf = dt ? typed.find(callback, [dt, dt]) : callback;\n\n      // vars\n      var i, j;\n\n      // result (DenseMatrix)\n      var cdata = [];\n      // initialize c\n      for (i = 0; i < rows; i++) {\n        cdata[i] = [];\n      }\n\n      // workspace\n      var x = [];\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // loop columns in b\n      for (j = 0; j < columns; j++) {\n        // column mark\n        var mark = j + 1;\n        // values in column j\n        for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          i = bindex[k];\n          // update workspace\n          x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n          // mark i as updated\n          w[i] = mark;\n        }\n        // loop rows\n        for (i = 0; i < rows; i++) {\n          // check row is in workspace\n          if (w[i] === mark) {\n            // c[i][j] was already calculated\n            cdata[i][j] = x[i];\n          } else {\n            // item does not exist in S\n            cdata[i][j] = adata[i][j];\n          }\n        }\n      }\n\n      // return dense matrix\n      return denseMatrix.createDenseMatrix({\n        data: cdata,\n        size: [rows, columns],\n        datatype: adt === denseMatrix._datatype && bdt === sparseMatrix._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":123,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo01xDSid"],[10,33,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,29,3,27],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,30,4,28],[17,2,5,7],[17,6,5,11,"createMatAlgo01xDSid"],[17,26,5,31],[17,29,5,34],[17,44,5,49],[17,48,5,49,"factory"],[17,63,5,56],[17,64,5,56,"factory"],[17,71,5,56],[17,73,5,57,"name"],[17,77,5,61],[17,79,5,63,"dependencies"],[17,91,5,75],[17,93,5,77,"_ref"],[17,97,5,81],[17,101,5,85],[18,4,6,2],[18,8,7,4,"typed"],[18,13,7,9],[18,16,8,6,"_ref"],[18,20,8,10],[18,21,7,4,"typed"],[18,26,7,9],[19,4,9,2],[20,0,10,0],[21,0,11,0],[22,0,12,0],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,4,28,2],[38,11,28,9],[38,20,28,18,"algorithm1"],[38,30,28,28,"algorithm1"],[38,31,28,29,"denseMatrix"],[38,42,28,40],[38,44,28,42,"sparseMatrix"],[38,56,28,54],[38,58,28,56,"callback"],[38,66,28,64],[38,68,28,66,"inverse"],[38,75,28,73],[38,77,28,75],[39,6,29,4],[40,6,30,4],[40,10,30,8,"adata"],[40,15,30,13],[40,18,30,16,"denseMatrix"],[40,29,30,27],[40,30,30,28,"_data"],[40,35,30,33],[41,6,31,4],[41,10,31,8,"asize"],[41,15,31,13],[41,18,31,16,"denseMatrix"],[41,29,31,27],[41,30,31,28,"_size"],[41,35,31,33],[42,6,32,4],[42,10,32,8,"adt"],[42,13,32,11],[42,16,32,14,"denseMatrix"],[42,27,32,25],[42,28,32,26,"_datatype"],[42,37,32,35],[42,41,32,39,"denseMatrix"],[42,52,32,50],[42,53,32,51,"getDataType"],[42,64,32,62],[42,65,32,63],[42,66,32,64],[43,6,33,4],[44,6,34,4],[44,10,34,8,"bvalues"],[44,17,34,15],[44,20,34,18,"sparseMatrix"],[44,32,34,30],[44,33,34,31,"_values"],[44,40,34,38],[45,6,35,4],[45,10,35,8,"bindex"],[45,16,35,14],[45,19,35,17,"sparseMatrix"],[45,31,35,29],[45,32,35,30,"_index"],[45,38,35,36],[46,6,36,4],[46,10,36,8,"bptr"],[46,14,36,12],[46,17,36,15,"sparseMatrix"],[46,29,36,27],[46,30,36,28,"_ptr"],[46,34,36,32],[47,6,37,4],[47,10,37,8,"bsize"],[47,15,37,13],[47,18,37,16,"sparseMatrix"],[47,30,37,28],[47,31,37,29,"_size"],[47,36,37,34],[48,6,38,4],[48,10,38,8,"bdt"],[48,13,38,11],[48,16,38,14,"sparseMatrix"],[48,28,38,26],[48,29,38,27,"_datatype"],[48,38,38,36],[48,42,38,40,"sparseMatrix"],[48,54,38,52],[48,55,38,53,"_data"],[48,60,38,58],[48,65,38,63,"undefined"],[48,74,38,72],[48,77,38,75,"sparseMatrix"],[48,89,38,87],[48,90,38,88,"_datatype"],[48,99,38,97],[48,102,38,100,"sparseMatrix"],[48,114,38,112],[48,115,38,113,"getDataType"],[48,126,38,124],[48,127,38,125],[48,128,38,126],[50,6,40,4],[51,6,41,4],[51,10,41,8,"asize"],[51,15,41,13],[51,16,41,14,"length"],[51,22,41,20],[51,27,41,25,"bsize"],[51,32,41,30],[51,33,41,31,"length"],[51,39,41,37],[51,41,41,39],[52,8,42,6],[52,14,42,12],[52,18,42,16,"DimensionError"],[52,40,42,30],[52,41,42,30,"DimensionError"],[52,55,42,30],[52,56,42,31,"asize"],[52,61,42,36],[52,62,42,37,"length"],[52,68,42,43],[52,70,42,45,"bsize"],[52,75,42,50],[52,76,42,51,"length"],[52,82,42,57],[52,83,42,58],[53,6,43,4],[55,6,45,4],[56,6,46,4],[56,10,46,8,"asize"],[56,15,46,13],[56,16,46,14],[56,17,46,15],[56,18,46,16],[56,23,46,21,"bsize"],[56,28,46,26],[56,29,46,27],[56,30,46,28],[56,31,46,29],[56,35,46,33,"asize"],[56,40,46,38],[56,41,46,39],[56,42,46,40],[56,43,46,41],[56,48,46,46,"bsize"],[56,53,46,51],[56,54,46,52],[56,55,46,53],[56,56,46,54],[56,58,46,56],[57,8,47,6],[57,14,47,12],[57,18,47,16,"RangeError"],[57,28,47,26],[57,29,47,27],[57,61,47,59],[57,64,47,62,"asize"],[57,69,47,67],[57,72,47,70],[57,97,47,95],[57,100,47,98,"bsize"],[57,105,47,103],[57,108,47,106],[57,111,47,109],[57,112,47,110],[58,6,48,4],[60,6,50,4],[61,6,51,4],[61,10,51,8],[61,11,51,9,"bvalues"],[61,18,51,16],[61,20,51,18],[62,8,52,6],[62,14,52,12],[62,18,52,16,"Error"],[62,23,52,21],[62,24,52,22],[62,92,52,90],[62,93,52,91],[63,6,53,4],[65,6,55,4],[66,6,56,4],[66,10,56,8,"rows"],[66,14,56,12],[66,17,56,15,"asize"],[66,22,56,20],[66,23,56,21],[66,24,56,22],[66,25,56,23],[67,6,57,4],[67,10,57,8,"columns"],[67,17,57,15],[67,20,57,18,"asize"],[67,25,57,23],[67,26,57,24],[67,27,57,25],[67,28,57,26],[69,6,59,4],[70,6,60,4],[70,10,60,8,"dt"],[70,12,60,10],[70,15,60,13],[70,22,60,20,"adt"],[70,25,60,23],[70,30,60,28],[70,38,60,36],[70,42,60,40,"adt"],[70,45,60,43],[70,50,60,48],[70,57,60,55],[70,61,60,59,"adt"],[70,64,60,62],[70,69,60,67,"bdt"],[70,72,60,70],[70,75,60,73,"adt"],[70,78,60,76],[70,81,60,79,"undefined"],[70,90,60,88],[71,6,61,4],[72,6,62,4],[72,10,62,8,"cf"],[72,12,62,10],[72,15,62,13,"dt"],[72,17,62,15],[72,20,62,18,"typed"],[72,25,62,23],[72,26,62,24,"find"],[72,30,62,28],[72,31,62,29,"callback"],[72,39,62,37],[72,41,62,39],[72,42,62,40,"dt"],[72,44,62,42],[72,46,62,44,"dt"],[72,48,62,46],[72,49,62,47],[72,50,62,48],[72,53,62,51,"callback"],[72,61,62,59],[74,6,64,4],[75,6,65,4],[75,10,65,8,"i"],[75,11,65,9],[75,13,65,11,"j"],[75,14,65,12],[77,6,67,4],[78,6,68,4],[78,10,68,8,"cdata"],[78,15,68,13],[78,18,68,16],[78,20,68,18],[79,6,69,4],[80,6,70,4],[80,11,70,9,"i"],[80,12,70,10],[80,15,70,13],[80,16,70,14],[80,18,70,16,"i"],[80,19,70,17],[80,22,70,20,"rows"],[80,26,70,24],[80,28,70,26,"i"],[80,29,70,27],[80,31,70,29],[80,33,70,31],[81,8,71,6,"cdata"],[81,13,71,11],[81,14,71,12,"i"],[81,15,71,13],[81,16,71,14],[81,19,71,17],[81,21,71,19],[82,6,72,4],[84,6,74,4],[85,6,75,4],[85,10,75,8,"x"],[85,11,75,9],[85,14,75,12],[85,16,75,14],[86,6,76,4],[87,6,77,4],[87,10,77,8,"w"],[87,11,77,9],[87,14,77,12],[87,16,77,14],[89,6,79,4],[90,6,80,4],[90,11,80,9,"j"],[90,12,80,10],[90,15,80,13],[90,16,80,14],[90,18,80,16,"j"],[90,19,80,17],[90,22,80,20,"columns"],[90,29,80,27],[90,31,80,29,"j"],[90,32,80,30],[90,34,80,32],[90,36,80,34],[91,8,81,6],[92,8,82,6],[92,12,82,10,"mark"],[92,16,82,14],[92,19,82,17,"j"],[92,20,82,18],[92,23,82,21],[92,24,82,22],[93,8,83,6],[94,8,84,6],[94,13,84,11],[94,17,84,15,"k0"],[94,19,84,17],[94,22,84,20,"bptr"],[94,26,84,24],[94,27,84,25,"j"],[94,28,84,26],[94,29,84,27],[94,31,84,29,"k1"],[94,33,84,31],[94,36,84,34,"bptr"],[94,40,84,38],[94,41,84,39,"j"],[94,42,84,40],[94,45,84,43],[94,46,84,44],[94,47,84,45],[94,49,84,47,"k"],[94,50,84,48],[94,53,84,51,"k0"],[94,55,84,53],[94,57,84,55,"k"],[94,58,84,56],[94,61,84,59,"k1"],[94,63,84,61],[94,65,84,63,"k"],[94,66,84,64],[94,68,84,66],[94,70,84,68],[95,10,85,8],[96,10,86,8,"i"],[96,11,86,9],[96,14,86,12,"bindex"],[96,20,86,18],[96,21,86,19,"k"],[96,22,86,20],[96,23,86,21],[97,10,87,8],[98,10,88,8,"x"],[98,11,88,9],[98,12,88,10,"i"],[98,13,88,11],[98,14,88,12],[98,17,88,15,"inverse"],[98,24,88,22],[98,27,88,25,"cf"],[98,29,88,27],[98,30,88,28,"bvalues"],[98,37,88,35],[98,38,88,36,"k"],[98,39,88,37],[98,40,88,38],[98,42,88,40,"adata"],[98,47,88,45],[98,48,88,46,"i"],[98,49,88,47],[98,50,88,48],[98,51,88,49,"j"],[98,52,88,50],[98,53,88,51],[98,54,88,52],[98,57,88,55,"cf"],[98,59,88,57],[98,60,88,58,"adata"],[98,65,88,63],[98,66,88,64,"i"],[98,67,88,65],[98,68,88,66],[98,69,88,67,"j"],[98,70,88,68],[98,71,88,69],[98,73,88,71,"bvalues"],[98,80,88,78],[98,81,88,79,"k"],[98,82,88,80],[98,83,88,81],[98,84,88,82],[99,10,89,8],[100,10,90,8,"w"],[100,11,90,9],[100,12,90,10,"i"],[100,13,90,11],[100,14,90,12],[100,17,90,15,"mark"],[100,21,90,19],[101,8,91,6],[102,8,92,6],[103,8,93,6],[103,13,93,11,"i"],[103,14,93,12],[103,17,93,15],[103,18,93,16],[103,20,93,18,"i"],[103,21,93,19],[103,24,93,22,"rows"],[103,28,93,26],[103,30,93,28,"i"],[103,31,93,29],[103,33,93,31],[103,35,93,33],[104,10,94,8],[105,10,95,8],[105,14,95,12,"w"],[105,15,95,13],[105,16,95,14,"i"],[105,17,95,15],[105,18,95,16],[105,23,95,21,"mark"],[105,27,95,25],[105,29,95,27],[106,12,96,10],[107,12,97,10,"cdata"],[107,17,97,15],[107,18,97,16,"i"],[107,19,97,17],[107,20,97,18],[107,21,97,19,"j"],[107,22,97,20],[107,23,97,21],[107,26,97,24,"x"],[107,27,97,25],[107,28,97,26,"i"],[107,29,97,27],[107,30,97,28],[108,10,98,8],[108,11,98,9],[108,17,98,15],[109,12,99,10],[110,12,100,10,"cdata"],[110,17,100,15],[110,18,100,16,"i"],[110,19,100,17],[110,20,100,18],[110,21,100,19,"j"],[110,22,100,20],[110,23,100,21],[110,26,100,24,"adata"],[110,31,100,29],[110,32,100,30,"i"],[110,33,100,31],[110,34,100,32],[110,35,100,33,"j"],[110,36,100,34],[110,37,100,35],[111,10,101,8],[112,8,102,6],[113,6,103,4],[115,6,105,4],[116,6,106,4],[116,13,106,11,"denseMatrix"],[116,24,106,22],[116,25,106,23,"createDenseMatrix"],[116,42,106,40],[116,43,106,41],[117,8,107,6,"data"],[117,12,107,10],[117,14,107,12,"cdata"],[117,19,107,17],[118,8,108,6,"size"],[118,12,108,10],[118,14,108,12],[118,15,108,13,"rows"],[118,19,108,17],[118,21,108,19,"columns"],[118,28,108,26],[118,29,108,27],[119,8,109,6,"datatype"],[119,16,109,14],[119,18,109,16,"adt"],[119,21,109,19],[119,26,109,24,"denseMatrix"],[119,37,109,35],[119,38,109,36,"_datatype"],[119,47,109,45],[119,51,109,49,"bdt"],[119,54,109,52],[119,59,109,57,"sparseMatrix"],[119,71,109,69],[119,72,109,70,"_datatype"],[119,81,109,79],[119,84,109,82,"dt"],[119,86,109,84],[119,89,109,87,"undefined"],[120,6,110,4],[120,7,110,5],[120,8,110,6],[121,4,111,2],[121,5,111,3],[122,2,112,0],[122,3,112,1],[122,4,112,2],[123,0,112,3],[123,3]],"functionMap":{"names":["<global>","factory$argument_2","algorithm1"],"mappings":"AAA;6ECI;SCuB;GDmF;CDC"},"hasCjsExports":false},"type":"js/module"}]}