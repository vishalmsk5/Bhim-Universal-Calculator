{"dependencies":[{"name":"../../utils/map.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"+oNptzAOU7QDEYn1hYzZ8uchKBw=","exportNames":["*"],"imports":1}},{"name":"../../utils/is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":108,"index":156}}],"key":"DL0lZsaza5vr7zl/bAzDYPBSOyA=","exportNames":["*"],"imports":1}},{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":157},"end":{"line":3,"column":49,"index":206}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createResolve\", {\n    enumerable: true,\n    get: function () {\n      return createResolve;\n    }\n  });\n  var _utilsMapJs = require(_dependencyMap[0], \"../../utils/map.js\");\n  var _utilsIsJs = require(_dependencyMap[1], \"../../utils/is.js\");\n  var _utilsFactoryJs = require(_dependencyMap[2], \"../../utils/factory.js\");\n  var name = 'resolve';\n  var dependencies = ['typed', 'parse', 'ConstantNode', 'FunctionNode', 'OperatorNode', 'ParenthesisNode'];\n  var createResolve = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed,\n      parse = _ref.parse,\n      ConstantNode = _ref.ConstantNode,\n      FunctionNode = _ref.FunctionNode,\n      OperatorNode = _ref.OperatorNode,\n      ParenthesisNode = _ref.ParenthesisNode;\n    /**\n     * resolve(expr, scope) replaces variable nodes with their scoped values\n     *\n     * Syntax:\n     *\n     *     math.resolve(expr, scope)\n     *\n     * Examples:\n     *\n     *     math.resolve('x + y', {x:1, y:2})           // Node '1 + 2'\n     *     math.resolve(math.parse('x+y'), {x:1, y:2}) // Node '1 + 2'\n     *     math.simplify('x+y', {x:2, y: math.parse('x+x')}).toString() // \"6\"\n     *\n     * See also:\n     *\n     *     simplify, evaluate\n     *\n     * @param {Node | Node[]} node\n     *     The expression tree (or trees) to be simplified\n     * @param {Object} scope\n     *     Scope specifying variables to be resolved\n     * @return {Node | Node[]} Returns `node` with variables recursively substituted.\n     * @throws {ReferenceError}\n     *     If there is a cyclic dependency among the variables in `scope`,\n     *     resolution is impossible and a ReferenceError is thrown.\n     */\n    function _resolve(node, scope) {\n      var within = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Set();\n      // note `within`:\n      // `within` is not documented, since it is for internal cycle\n      // detection only\n      if (!scope) {\n        return node;\n      }\n      if ((0, _utilsIsJs.isSymbolNode)(node)) {\n        if (within.has(node.name)) {\n          var variables = Array.from(within).join(', ');\n          throw new ReferenceError(\"recursive loop of variable definitions among {\".concat(variables, \"}\"));\n        }\n        var value = scope.get(node.name);\n        if ((0, _utilsIsJs.isNode)(value)) {\n          var nextWithin = new Set(within);\n          nextWithin.add(node.name);\n          return _resolve(value, scope, nextWithin);\n        } else if (typeof value === 'number') {\n          return parse(String(value));\n        } else if (value !== undefined) {\n          return new ConstantNode(value);\n        } else {\n          return node;\n        }\n      } else if ((0, _utilsIsJs.isOperatorNode)(node)) {\n        var args = node.args.map(function (arg) {\n          return _resolve(arg, scope, within);\n        });\n        return new OperatorNode(node.op, node.fn, args, node.implicit);\n      } else if ((0, _utilsIsJs.isParenthesisNode)(node)) {\n        return new ParenthesisNode(_resolve(node.content, scope, within));\n      } else if ((0, _utilsIsJs.isFunctionNode)(node)) {\n        var _args = node.args.map(function (arg) {\n          return _resolve(arg, scope, within);\n        });\n        return new FunctionNode(node.name, _args);\n      }\n\n      // Otherwise just recursively resolve any children (might also work\n      // for some of the above special cases)\n      return node.map(child => _resolve(child, scope, within));\n    }\n    return typed('resolve', {\n      Node: _resolve,\n      'Node, Map | null | undefined': _resolve,\n      'Node, Object': (n, scope) => _resolve(n, (0, _utilsMapJs.createMap)(scope)),\n      // For arrays and matrices, we map `self` rather than `_resolve`\n      // because resolve is fairly expensive anyway, and this way\n      // we get nice error messages if one entry in the array has wrong type.\n      'Array | Matrix': typed.referToSelf(self => A => A.map(n => self(n))),\n      'Array | Matrix, null | undefined': typed.referToSelf(self => A => A.map(n => self(n))),\n      'Array, Object': typed.referTo('Array,Map', selfAM => (A, scope) => selfAM(A, (0, _utilsMapJs.createMap)(scope))),\n      'Matrix, Object': typed.referTo('Matrix,Map', selfMM => (A, scope) => selfMM(A, (0, _utilsMapJs.createMap)(scope))),\n      'Array | Matrix, Map': typed.referToSelf(self => (A, scope) => A.map(n => self(n, scope)))\n    });\n  });\n});","lineCount":108,"map":[[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"createResolve"],[10,26,6,0],[11,4,6,0],[12,2,6,0],[13,2,1,0],[13,6,1,0,"_utilsMapJs"],[13,17,1,0],[13,20,1,0,"require"],[13,27,1,0],[13,28,1,0,"_dependencyMap"],[13,42,1,0],[14,2,2,0],[14,6,2,0,"_utilsIsJs"],[14,16,2,0],[14,19,2,0,"require"],[14,26,2,0],[14,27,2,0,"_dependencyMap"],[14,41,2,0],[15,2,3,0],[15,6,3,0,"_utilsFactoryJs"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,4,0],[16,6,4,4,"name"],[16,10,4,8],[16,13,4,11],[16,22,4,20],[17,2,5,0],[17,6,5,4,"dependencies"],[17,18,5,16],[17,21,5,19],[17,22,5,20],[17,29,5,27],[17,31,5,29],[17,38,5,36],[17,40,5,38],[17,54,5,52],[17,56,5,54],[17,70,5,68],[17,72,5,70],[17,86,5,84],[17,88,5,86],[17,105,5,103],[17,106,5,104],[18,2,6,7],[18,6,6,11,"createResolve"],[18,19,6,24],[18,22,6,27],[18,37,6,42],[18,41,6,42,"factory"],[18,56,6,49],[18,57,6,49,"factory"],[18,64,6,49],[18,66,6,50,"name"],[18,70,6,54],[18,72,6,56,"dependencies"],[18,84,6,68],[18,86,6,70,"_ref"],[18,90,6,74],[18,94,6,78],[19,4,7,2],[19,8,8,4,"typed"],[19,13,8,9],[19,16,14,6,"_ref"],[19,20,14,10],[19,21,8,4,"typed"],[19,26,8,9],[20,6,9,4,"parse"],[20,11,9,9],[20,14,14,6,"_ref"],[20,18,14,10],[20,19,9,4,"parse"],[20,24,9,9],[21,6,10,4,"ConstantNode"],[21,18,10,16],[21,21,14,6,"_ref"],[21,25,14,10],[21,26,10,4,"ConstantNode"],[21,38,10,16],[22,6,11,4,"FunctionNode"],[22,18,11,16],[22,21,14,6,"_ref"],[22,25,14,10],[22,26,11,4,"FunctionNode"],[22,38,11,16],[23,6,12,4,"OperatorNode"],[23,18,12,16],[23,21,14,6,"_ref"],[23,25,14,10],[23,26,12,4,"OperatorNode"],[23,38,12,16],[24,6,13,4,"ParenthesisNode"],[24,21,13,19],[24,24,14,6,"_ref"],[24,28,14,10],[24,29,13,4,"ParenthesisNode"],[24,44,13,19],[25,4,15,2],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,0,28,0],[39,0,29,0],[40,0,30,0],[41,0,31,0],[42,0,32,0],[43,0,33,0],[44,0,34,0],[45,0,35,0],[46,0,36,0],[47,0,37,0],[48,0,38,0],[49,0,39,0],[50,0,40,0],[51,4,41,2],[51,13,41,11,"_resolve"],[51,21,41,19,"_resolve"],[51,22,41,20,"node"],[51,26,41,24],[51,28,41,26,"scope"],[51,33,41,31],[51,35,41,33],[52,6,42,4],[52,10,42,8,"within"],[52,16,42,14],[52,19,42,17,"arguments"],[52,28,42,26],[52,29,42,27,"length"],[52,35,42,33],[52,38,42,36],[52,39,42,37],[52,43,42,41,"arguments"],[52,52,42,50],[52,53,42,51],[52,54,42,52],[52,55,42,53],[52,60,42,58,"undefined"],[52,69,42,67],[52,72,42,70,"arguments"],[52,81,42,79],[52,82,42,80],[52,83,42,81],[52,84,42,82],[52,87,42,85],[52,91,42,89,"Set"],[52,94,42,92],[52,95,42,93],[52,96,42,94],[53,6,43,4],[54,6,44,4],[55,6,45,4],[56,6,46,4],[56,10,46,8],[56,11,46,9,"scope"],[56,16,46,14],[56,18,46,16],[57,8,47,6],[57,15,47,13,"node"],[57,19,47,17],[58,6,48,4],[59,6,49,4],[59,10,49,8],[59,14,49,8,"isSymbolNode"],[59,24,49,20],[59,25,49,20,"isSymbolNode"],[59,37,49,20],[59,39,49,21,"node"],[59,43,49,25],[59,44,49,26],[59,46,49,28],[60,8,50,6],[60,12,50,10,"within"],[60,18,50,16],[60,19,50,17,"has"],[60,22,50,20],[60,23,50,21,"node"],[60,27,50,25],[60,28,50,26,"name"],[60,32,50,30],[60,33,50,31],[60,35,50,33],[61,10,51,8],[61,14,51,12,"variables"],[61,23,51,21],[61,26,51,24,"Array"],[61,31,51,29],[61,32,51,30,"from"],[61,36,51,34],[61,37,51,35,"within"],[61,43,51,41],[61,44,51,42],[61,45,51,43,"join"],[61,49,51,47],[61,50,51,48],[61,54,51,52],[61,55,51,53],[62,10,52,8],[62,16,52,14],[62,20,52,18,"ReferenceError"],[62,34,52,32],[62,35,52,33],[62,83,52,81],[62,84,52,82,"concat"],[62,90,52,88],[62,91,52,89,"variables"],[62,100,52,98],[62,102,52,100],[62,105,52,103],[62,106,52,104],[62,107,52,105],[63,8,53,6],[64,8,54,6],[64,12,54,10,"value"],[64,17,54,15],[64,20,54,18,"scope"],[64,25,54,23],[64,26,54,24,"get"],[64,29,54,27],[64,30,54,28,"node"],[64,34,54,32],[64,35,54,33,"name"],[64,39,54,37],[64,40,54,38],[65,8,55,6],[65,12,55,10],[65,16,55,10,"isNode"],[65,26,55,16],[65,27,55,16,"isNode"],[65,33,55,16],[65,35,55,17,"value"],[65,40,55,22],[65,41,55,23],[65,43,55,25],[66,10,56,8],[66,14,56,12,"nextWithin"],[66,24,56,22],[66,27,56,25],[66,31,56,29,"Set"],[66,34,56,32],[66,35,56,33,"within"],[66,41,56,39],[66,42,56,40],[67,10,57,8,"nextWithin"],[67,20,57,18],[67,21,57,19,"add"],[67,24,57,22],[67,25,57,23,"node"],[67,29,57,27],[67,30,57,28,"name"],[67,34,57,32],[67,35,57,33],[68,10,58,8],[68,17,58,15,"_resolve"],[68,25,58,23],[68,26,58,24,"value"],[68,31,58,29],[68,33,58,31,"scope"],[68,38,58,36],[68,40,58,38,"nextWithin"],[68,50,58,48],[68,51,58,49],[69,8,59,6],[69,9,59,7],[69,15,59,13],[69,19,59,17],[69,26,59,24,"value"],[69,31,59,29],[69,36,59,34],[69,44,59,42],[69,46,59,44],[70,10,60,8],[70,17,60,15,"parse"],[70,22,60,20],[70,23,60,21,"String"],[70,29,60,27],[70,30,60,28,"value"],[70,35,60,33],[70,36,60,34],[70,37,60,35],[71,8,61,6],[71,9,61,7],[71,15,61,13],[71,19,61,17,"value"],[71,24,61,22],[71,29,61,27,"undefined"],[71,38,61,36],[71,40,61,38],[72,10,62,8],[72,17,62,15],[72,21,62,19,"ConstantNode"],[72,33,62,31],[72,34,62,32,"value"],[72,39,62,37],[72,40,62,38],[73,8,63,6],[73,9,63,7],[73,15,63,13],[74,10,64,8],[74,17,64,15,"node"],[74,21,64,19],[75,8,65,6],[76,6,66,4],[76,7,66,5],[76,13,66,11],[76,17,66,15],[76,21,66,15,"isOperatorNode"],[76,31,66,29],[76,32,66,29,"isOperatorNode"],[76,46,66,29],[76,48,66,30,"node"],[76,52,66,34],[76,53,66,35],[76,55,66,37],[77,8,67,6],[77,12,67,10,"args"],[77,16,67,14],[77,19,67,17,"node"],[77,23,67,21],[77,24,67,22,"args"],[77,28,67,26],[77,29,67,27,"map"],[77,32,67,30],[77,33,67,31],[77,43,67,41,"arg"],[77,46,67,44],[77,48,67,46],[78,10,68,8],[78,17,68,15,"_resolve"],[78,25,68,23],[78,26,68,24,"arg"],[78,29,68,27],[78,31,68,29,"scope"],[78,36,68,34],[78,38,68,36,"within"],[78,44,68,42],[78,45,68,43],[79,8,69,6],[79,9,69,7],[79,10,69,8],[80,8,70,6],[80,15,70,13],[80,19,70,17,"OperatorNode"],[80,31,70,29],[80,32,70,30,"node"],[80,36,70,34],[80,37,70,35,"op"],[80,39,70,37],[80,41,70,39,"node"],[80,45,70,43],[80,46,70,44,"fn"],[80,48,70,46],[80,50,70,48,"args"],[80,54,70,52],[80,56,70,54,"node"],[80,60,70,58],[80,61,70,59,"implicit"],[80,69,70,67],[80,70,70,68],[81,6,71,4],[81,7,71,5],[81,13,71,11],[81,17,71,15],[81,21,71,15,"isParenthesisNode"],[81,31,71,32],[81,32,71,32,"isParenthesisNode"],[81,49,71,32],[81,51,71,33,"node"],[81,55,71,37],[81,56,71,38],[81,58,71,40],[82,8,72,6],[82,15,72,13],[82,19,72,17,"ParenthesisNode"],[82,34,72,32],[82,35,72,33,"_resolve"],[82,43,72,41],[82,44,72,42,"node"],[82,48,72,46],[82,49,72,47,"content"],[82,56,72,54],[82,58,72,56,"scope"],[82,63,72,61],[82,65,72,63,"within"],[82,71,72,69],[82,72,72,70],[82,73,72,71],[83,6,73,4],[83,7,73,5],[83,13,73,11],[83,17,73,15],[83,21,73,15,"isFunctionNode"],[83,31,73,29],[83,32,73,29,"isFunctionNode"],[83,46,73,29],[83,48,73,30,"node"],[83,52,73,34],[83,53,73,35],[83,55,73,37],[84,8,74,6],[84,12,74,10,"_args"],[84,17,74,15],[84,20,74,18,"node"],[84,24,74,22],[84,25,74,23,"args"],[84,29,74,27],[84,30,74,28,"map"],[84,33,74,31],[84,34,74,32],[84,44,74,42,"arg"],[84,47,74,45],[84,49,74,47],[85,10,75,8],[85,17,75,15,"_resolve"],[85,25,75,23],[85,26,75,24,"arg"],[85,29,75,27],[85,31,75,29,"scope"],[85,36,75,34],[85,38,75,36,"within"],[85,44,75,42],[85,45,75,43],[86,8,76,6],[86,9,76,7],[86,10,76,8],[87,8,77,6],[87,15,77,13],[87,19,77,17,"FunctionNode"],[87,31,77,29],[87,32,77,30,"node"],[87,36,77,34],[87,37,77,35,"name"],[87,41,77,39],[87,43,77,41,"_args"],[87,48,77,46],[87,49,77,47],[88,6,78,4],[90,6,80,4],[91,6,81,4],[92,6,82,4],[92,13,82,11,"node"],[92,17,82,15],[92,18,82,16,"map"],[92,21,82,19],[92,22,82,20,"child"],[92,27,82,25],[92,31,82,29,"_resolve"],[92,39,82,37],[92,40,82,38,"child"],[92,45,82,43],[92,47,82,45,"scope"],[92,52,82,50],[92,54,82,52,"within"],[92,60,82,58],[92,61,82,59],[92,62,82,60],[93,4,83,2],[94,4,84,2],[94,11,84,9,"typed"],[94,16,84,14],[94,17,84,15],[94,26,84,24],[94,28,84,26],[95,6,85,4,"Node"],[95,10,85,8],[95,12,85,10,"_resolve"],[95,20,85,18],[96,6,86,4],[96,36,86,34],[96,38,86,36,"_resolve"],[96,46,86,44],[97,6,87,4],[97,20,87,18],[97,22,87,20,"Node, Object"],[97,23,87,21,"n"],[97,24,87,22],[97,26,87,24,"scope"],[97,31,87,29],[97,36,87,34,"_resolve"],[97,44,87,42],[97,45,87,43,"n"],[97,46,87,44],[97,48,87,46],[97,52,87,46,"createMap"],[97,63,87,55],[97,64,87,55,"createMap"],[97,73,87,55],[97,75,87,56,"scope"],[97,80,87,61],[97,81,87,62],[97,82,87,63],[98,6,88,4],[99,6,89,4],[100,6,90,4],[101,6,91,4],[101,22,91,20],[101,24,91,22,"typed"],[101,29,91,27],[101,30,91,28,"referToSelf"],[101,41,91,39],[101,42,91,40,"self"],[101,46,91,44],[101,50,91,48,"A"],[101,51,91,49],[101,55,91,53,"A"],[101,56,91,54],[101,57,91,55,"map"],[101,60,91,58],[101,61,91,59,"n"],[101,62,91,60],[101,66,91,64,"self"],[101,70,91,68],[101,71,91,69,"n"],[101,72,91,70],[101,73,91,71],[101,74,91,72],[101,75,91,73],[102,6,92,4],[102,40,92,38],[102,42,92,40,"typed"],[102,47,92,45],[102,48,92,46,"referToSelf"],[102,59,92,57],[102,60,92,58,"self"],[102,64,92,62],[102,68,92,66,"A"],[102,69,92,67],[102,73,92,71,"A"],[102,74,92,72],[102,75,92,73,"map"],[102,78,92,76],[102,79,92,77,"n"],[102,80,92,78],[102,84,92,82,"self"],[102,88,92,86],[102,89,92,87,"n"],[102,90,92,88],[102,91,92,89],[102,92,92,90],[102,93,92,91],[103,6,93,4],[103,21,93,19],[103,23,93,21,"typed"],[103,28,93,26],[103,29,93,27,"referTo"],[103,36,93,34],[103,37,93,35],[103,48,93,46],[103,50,93,48,"selfAM"],[103,56,93,54],[103,60,93,58],[103,61,93,59,"A"],[103,62,93,60],[103,64,93,62,"scope"],[103,69,93,67],[103,74,93,72,"selfAM"],[103,80,93,78],[103,81,93,79,"A"],[103,82,93,80],[103,84,93,82],[103,88,93,82,"createMap"],[103,99,93,91],[103,100,93,91,"createMap"],[103,109,93,91],[103,111,93,92,"scope"],[103,116,93,97],[103,117,93,98],[103,118,93,99],[103,119,93,100],[104,6,94,4],[104,22,94,20],[104,24,94,22,"typed"],[104,29,94,27],[104,30,94,28,"referTo"],[104,37,94,35],[104,38,94,36],[104,50,94,48],[104,52,94,50,"selfMM"],[104,58,94,56],[104,62,94,60],[104,63,94,61,"A"],[104,64,94,62],[104,66,94,64,"scope"],[104,71,94,69],[104,76,94,74,"selfMM"],[104,82,94,80],[104,83,94,81,"A"],[104,84,94,82],[104,86,94,84],[104,90,94,84,"createMap"],[104,101,94,93],[104,102,94,93,"createMap"],[104,111,94,93],[104,113,94,94,"scope"],[104,118,94,99],[104,119,94,100],[104,120,94,101],[104,121,94,102],[105,6,95,4],[105,27,95,25],[105,29,95,27,"typed"],[105,34,95,32],[105,35,95,33,"referToSelf"],[105,46,95,44],[105,47,95,45,"self"],[105,51,95,49],[105,55,95,53],[105,56,95,54,"A"],[105,57,95,55],[105,59,95,57,"scope"],[105,64,95,62],[105,69,95,67,"A"],[105,70,95,68],[105,71,95,69,"map"],[105,74,95,72],[105,75,95,73,"n"],[105,76,95,74],[105,80,95,78,"self"],[105,84,95,82],[105,85,95,83,"n"],[105,86,95,84],[105,88,95,86,"scope"],[105,93,95,91],[105,94,95,92],[105,95,95,93],[106,4,96,2],[106,5,96,3],[106,6,96,4],[107,2,97,0],[107,3,97,1],[107,4,97,2],[108,0,97,3],[108,3]],"functionMap":{"names":["<global>","factory$argument_2","_resolve","node.args.map$argument_0","node.map$argument_0","typed$argument_1.NodeObject","typed.referToSelf$argument_0","<anonymous>","A.map$argument_0","typed.referTo$argument_1"],"mappings":"AAA;sECK;ECmC;+BC0B;ODE;gCCK;ODE;oBEM,uCF;GDC;oBII,2CJ;wCKI,QC,WC,YD,CN;0DKC,QC,WC,YD,CN;gDQC,UF,yCN;kDQC,UF,yCN;6CKC,QC,oBC,mBD,CN;CDE"},"hasCjsExports":false},"type":"js/module"}]}