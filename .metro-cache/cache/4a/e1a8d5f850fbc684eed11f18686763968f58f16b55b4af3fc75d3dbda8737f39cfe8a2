{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":183},"end":{"line":4,"column":52,"index":235}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"./csLeaf.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":236},"end":{"line":5,"column":37,"index":273}}],"key":"h4N+tq5F4y6fS/gShxChtx2Sat4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createCsCounts\", {\n    enumerable: true,\n    get: function () {\n      return createCsCounts;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _csLeafJs = require(_dependencyMap[1], \"./csLeaf.js\");\n  // Copyright (c) 2006-2024, Timothy A. Davis, All Rights Reserved.\n  // SPDX-License-Identifier: LGPL-2.1+\n  // https://github.com/DrTimothyAldenDavis/SuiteSparse/tree/dev/CSparse/Source\n\n  var name = 'csCounts';\n  var dependencies = ['transpose'];\n  var createCsCounts = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var transpose = _ref.transpose;\n    /**\n     * Computes the column counts using the upper triangular part of A.\n     * It transposes A internally, none of the input parameters are modified.\n     *\n     * @param {Matrix} a           The sparse matrix A\n     *\n     * @param {Matrix} ata         Count the columns of A'A instead\n     *\n     * @return                     An array of size n of the column counts or null on error\n     */\n    return function (a, parent, post, ata) {\n      // check inputs\n      if (!a || !parent || !post) {\n        return null;\n      }\n      // a matrix arrays\n      var asize = a._size;\n      // rows and columns\n      var m = asize[0];\n      var n = asize[1];\n      // variables\n      var i, j, k, J, p, p0, p1;\n\n      // workspace size\n      var s = 4 * n + (ata ? n + m + 1 : 0);\n      // allocate workspace\n      var w = []; // (s)\n      var ancestor = 0; // first n entries\n      var maxfirst = n; // next n entries\n      var prevleaf = 2 * n; // next n entries\n      var first = 3 * n; // next n entries\n      var head = 4 * n; // next n + 1 entries (used when ata is true)\n      var next = 5 * n + 1; // last entries in workspace\n      // clear workspace w[0..s-1]\n      for (k = 0; k < s; k++) {\n        w[k] = -1;\n      }\n\n      // allocate result\n      var colcount = []; // (n)\n\n      // AT = A'\n      var at = transpose(a);\n      // at arrays\n      var tindex = at._index;\n      var tptr = at._ptr;\n\n      // find w[first + j]\n      for (k = 0; k < n; k++) {\n        j = post[k];\n        // colcount[j]=1 if j is a leaf\n        colcount[j] = w[first + j] === -1 ? 1 : 0;\n        for (; j !== -1 && w[first + j] === -1; j = parent[j]) {\n          w[first + j] = k;\n        }\n      }\n\n      // initialize ata if needed\n      if (ata) {\n        // invert post\n        for (k = 0; k < n; k++) {\n          w[post[k]] = k;\n        }\n        // loop rows (columns in AT)\n        for (i = 0; i < m; i++) {\n          // values in column i of AT\n          for (k = n, p0 = tptr[i], p1 = tptr[i + 1], p = p0; p < p1; p++) {\n            k = Math.min(k, w[tindex[p]]);\n          }\n          // place row i in linked list k\n          w[next + i] = w[head + k];\n          w[head + k] = i;\n        }\n      }\n\n      // each node in its own set\n      for (i = 0; i < n; i++) {\n        w[ancestor + i] = i;\n      }\n      for (k = 0; k < n; k++) {\n        // j is the kth node in postordered etree\n        j = post[k];\n        // check j is not a root\n        if (parent[j] !== -1) {\n          colcount[parent[j]]--;\n        }\n\n        // J=j for LL'=A case\n        for (J = ata ? w[head + k] : j; J !== -1; J = ata ? w[next + J] : -1) {\n          for (p = tptr[J]; p < tptr[J + 1]; p++) {\n            i = tindex[p];\n            var r = (0, _csLeafJs.csLeaf)(i, j, w, first, maxfirst, prevleaf, ancestor);\n            // check A(i,j) is in skeleton\n            if (r.jleaf >= 1) {\n              colcount[j]++;\n            }\n            // check account for overlap in q\n            if (r.jleaf === 2) {\n              colcount[r.q]--;\n            }\n          }\n        }\n        if (parent[j] !== -1) {\n          w[ancestor + j] = parent[j];\n        }\n      }\n      // sum up colcount's of each child\n      for (j = 0; j < n; j++) {\n        if (parent[j] !== -1) {\n          colcount[parent[j]] += colcount[j];\n        }\n      }\n      return colcount;\n    };\n  });\n});","lineCount":138,"map":[[7,2,8,0,"Object"],[7,8,8,0],[7,9,8,0,"defineProperty"],[7,23,8,0],[7,24,8,0,"exports"],[7,31,8,0],[8,4,8,0,"enumerable"],[8,14,8,0],[9,4,8,0,"get"],[9,7,8,0],[9,18,8,0,"get"],[9,19,8,0],[10,6,8,0],[10,13,8,0,"createCsCounts"],[10,27,8,0],[11,4,8,0],[12,2,8,0],[13,2,4,0],[13,6,4,0,"_utilsFactoryJs"],[13,21,4,0],[13,24,4,0,"require"],[13,31,4,0],[13,32,4,0,"_dependencyMap"],[13,46,4,0],[14,2,5,0],[14,6,5,0,"_csLeafJs"],[14,15,5,0],[14,18,5,0,"require"],[14,25,5,0],[14,26,5,0,"_dependencyMap"],[14,40,5,0],[15,2,1,0],[16,2,2,0],[17,2,3,0],[19,2,6,0],[19,6,6,4,"name"],[19,10,6,8],[19,13,6,11],[19,23,6,21],[20,2,7,0],[20,6,7,4,"dependencies"],[20,18,7,16],[20,21,7,19],[20,22,7,20],[20,33,7,31],[20,34,7,32],[21,2,8,7],[21,6,8,11,"createCsCounts"],[21,20,8,25],[21,23,8,28],[21,38,8,43],[21,42,8,43,"factory"],[21,57,8,50],[21,58,8,50,"factory"],[21,65,8,50],[21,67,8,51,"name"],[21,71,8,55],[21,73,8,57,"dependencies"],[21,85,8,69],[21,87,8,71,"_ref"],[21,91,8,75],[21,95,8,79],[22,4,9,2],[22,8,10,4,"transpose"],[22,17,10,13],[22,20,11,6,"_ref"],[22,24,11,10],[22,25,10,4,"transpose"],[22,34,10,13],[23,4,12,2],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,4,22,2],[33,11,22,9],[33,21,22,19,"a"],[33,22,22,20],[33,24,22,22,"parent"],[33,30,22,28],[33,32,22,30,"post"],[33,36,22,34],[33,38,22,36,"ata"],[33,41,22,39],[33,43,22,41],[34,6,23,4],[35,6,24,4],[35,10,24,8],[35,11,24,9,"a"],[35,12,24,10],[35,16,24,14],[35,17,24,15,"parent"],[35,23,24,21],[35,27,24,25],[35,28,24,26,"post"],[35,32,24,30],[35,34,24,32],[36,8,25,6],[36,15,25,13],[36,19,25,17],[37,6,26,4],[38,6,27,4],[39,6,28,4],[39,10,28,8,"asize"],[39,15,28,13],[39,18,28,16,"a"],[39,19,28,17],[39,20,28,18,"_size"],[39,25,28,23],[40,6,29,4],[41,6,30,4],[41,10,30,8,"m"],[41,11,30,9],[41,14,30,12,"asize"],[41,19,30,17],[41,20,30,18],[41,21,30,19],[41,22,30,20],[42,6,31,4],[42,10,31,8,"n"],[42,11,31,9],[42,14,31,12,"asize"],[42,19,31,17],[42,20,31,18],[42,21,31,19],[42,22,31,20],[43,6,32,4],[44,6,33,4],[44,10,33,8,"i"],[44,11,33,9],[44,13,33,11,"j"],[44,14,33,12],[44,16,33,14,"k"],[44,17,33,15],[44,19,33,17,"J"],[44,20,33,18],[44,22,33,20,"p"],[44,23,33,21],[44,25,33,23,"p0"],[44,27,33,25],[44,29,33,27,"p1"],[44,31,33,29],[46,6,35,4],[47,6,36,4],[47,10,36,8,"s"],[47,11,36,9],[47,14,36,12],[47,15,36,13],[47,18,36,16,"n"],[47,19,36,17],[47,23,36,21,"ata"],[47,26,36,24],[47,29,36,27,"n"],[47,30,36,28],[47,33,36,31,"m"],[47,34,36,32],[47,37,36,35],[47,38,36,36],[47,41,36,39],[47,42,36,40],[47,43,36,41],[48,6,37,4],[49,6,38,4],[49,10,38,8,"w"],[49,11,38,9],[49,14,38,12],[49,16,38,14],[49,17,38,15],[49,18,38,16],[50,6,39,4],[50,10,39,8,"ancestor"],[50,18,39,16],[50,21,39,19],[50,22,39,20],[50,23,39,21],[50,24,39,22],[51,6,40,4],[51,10,40,8,"maxfirst"],[51,18,40,16],[51,21,40,19,"n"],[51,22,40,20],[51,23,40,21],[51,24,40,22],[52,6,41,4],[52,10,41,8,"prevleaf"],[52,18,41,16],[52,21,41,19],[52,22,41,20],[52,25,41,23,"n"],[52,26,41,24],[52,27,41,25],[52,28,41,26],[53,6,42,4],[53,10,42,8,"first"],[53,15,42,13],[53,18,42,16],[53,19,42,17],[53,22,42,20,"n"],[53,23,42,21],[53,24,42,22],[53,25,42,23],[54,6,43,4],[54,10,43,8,"head"],[54,14,43,12],[54,17,43,15],[54,18,43,16],[54,21,43,19,"n"],[54,22,43,20],[54,23,43,21],[54,24,43,22],[55,6,44,4],[55,10,44,8,"next"],[55,14,44,12],[55,17,44,15],[55,18,44,16],[55,21,44,19,"n"],[55,22,44,20],[55,25,44,23],[55,26,44,24],[55,27,44,25],[55,28,44,26],[56,6,45,4],[57,6,46,4],[57,11,46,9,"k"],[57,12,46,10],[57,15,46,13],[57,16,46,14],[57,18,46,16,"k"],[57,19,46,17],[57,22,46,20,"s"],[57,23,46,21],[57,25,46,23,"k"],[57,26,46,24],[57,28,46,26],[57,30,46,28],[58,8,47,6,"w"],[58,9,47,7],[58,10,47,8,"k"],[58,11,47,9],[58,12,47,10],[58,15,47,13],[58,16,47,14],[58,17,47,15],[59,6,48,4],[61,6,50,4],[62,6,51,4],[62,10,51,8,"colcount"],[62,18,51,16],[62,21,51,19],[62,23,51,21],[62,24,51,22],[62,25,51,23],[64,6,53,4],[65,6,54,4],[65,10,54,8,"at"],[65,12,54,10],[65,15,54,13,"transpose"],[65,24,54,22],[65,25,54,23,"a"],[65,26,54,24],[65,27,54,25],[66,6,55,4],[67,6,56,4],[67,10,56,8,"tindex"],[67,16,56,14],[67,19,56,17,"at"],[67,21,56,19],[67,22,56,20,"_index"],[67,28,56,26],[68,6,57,4],[68,10,57,8,"tptr"],[68,14,57,12],[68,17,57,15,"at"],[68,19,57,17],[68,20,57,18,"_ptr"],[68,24,57,22],[70,6,59,4],[71,6,60,4],[71,11,60,9,"k"],[71,12,60,10],[71,15,60,13],[71,16,60,14],[71,18,60,16,"k"],[71,19,60,17],[71,22,60,20,"n"],[71,23,60,21],[71,25,60,23,"k"],[71,26,60,24],[71,28,60,26],[71,30,60,28],[72,8,61,6,"j"],[72,9,61,7],[72,12,61,10,"post"],[72,16,61,14],[72,17,61,15,"k"],[72,18,61,16],[72,19,61,17],[73,8,62,6],[74,8,63,6,"colcount"],[74,16,63,14],[74,17,63,15,"j"],[74,18,63,16],[74,19,63,17],[74,22,63,20,"w"],[74,23,63,21],[74,24,63,22,"first"],[74,29,63,27],[74,32,63,30,"j"],[74,33,63,31],[74,34,63,32],[74,39,63,37],[74,40,63,38],[74,41,63,39],[74,44,63,42],[74,45,63,43],[74,48,63,46],[74,49,63,47],[75,8,64,6],[75,15,64,13,"j"],[75,16,64,14],[75,21,64,19],[75,22,64,20],[75,23,64,21],[75,27,64,25,"w"],[75,28,64,26],[75,29,64,27,"first"],[75,34,64,32],[75,37,64,35,"j"],[75,38,64,36],[75,39,64,37],[75,44,64,42],[75,45,64,43],[75,46,64,44],[75,48,64,46,"j"],[75,49,64,47],[75,52,64,50,"parent"],[75,58,64,56],[75,59,64,57,"j"],[75,60,64,58],[75,61,64,59],[75,63,64,61],[76,10,65,8,"w"],[76,11,65,9],[76,12,65,10,"first"],[76,17,65,15],[76,20,65,18,"j"],[76,21,65,19],[76,22,65,20],[76,25,65,23,"k"],[76,26,65,24],[77,8,66,6],[78,6,67,4],[80,6,69,4],[81,6,70,4],[81,10,70,8,"ata"],[81,13,70,11],[81,15,70,13],[82,8,71,6],[83,8,72,6],[83,13,72,11,"k"],[83,14,72,12],[83,17,72,15],[83,18,72,16],[83,20,72,18,"k"],[83,21,72,19],[83,24,72,22,"n"],[83,25,72,23],[83,27,72,25,"k"],[83,28,72,26],[83,30,72,28],[83,32,72,30],[84,10,73,8,"w"],[84,11,73,9],[84,12,73,10,"post"],[84,16,73,14],[84,17,73,15,"k"],[84,18,73,16],[84,19,73,17],[84,20,73,18],[84,23,73,21,"k"],[84,24,73,22],[85,8,74,6],[86,8,75,6],[87,8,76,6],[87,13,76,11,"i"],[87,14,76,12],[87,17,76,15],[87,18,76,16],[87,20,76,18,"i"],[87,21,76,19],[87,24,76,22,"m"],[87,25,76,23],[87,27,76,25,"i"],[87,28,76,26],[87,30,76,28],[87,32,76,30],[88,10,77,8],[89,10,78,8],[89,15,78,13,"k"],[89,16,78,14],[89,19,78,17,"n"],[89,20,78,18],[89,22,78,20,"p0"],[89,24,78,22],[89,27,78,25,"tptr"],[89,31,78,29],[89,32,78,30,"i"],[89,33,78,31],[89,34,78,32],[89,36,78,34,"p1"],[89,38,78,36],[89,41,78,39,"tptr"],[89,45,78,43],[89,46,78,44,"i"],[89,47,78,45],[89,50,78,48],[89,51,78,49],[89,52,78,50],[89,54,78,52,"p"],[89,55,78,53],[89,58,78,56,"p0"],[89,60,78,58],[89,62,78,60,"p"],[89,63,78,61],[89,66,78,64,"p1"],[89,68,78,66],[89,70,78,68,"p"],[89,71,78,69],[89,73,78,71],[89,75,78,73],[90,12,79,10,"k"],[90,13,79,11],[90,16,79,14,"Math"],[90,20,79,18],[90,21,79,19,"min"],[90,24,79,22],[90,25,79,23,"k"],[90,26,79,24],[90,28,79,26,"w"],[90,29,79,27],[90,30,79,28,"tindex"],[90,36,79,34],[90,37,79,35,"p"],[90,38,79,36],[90,39,79,37],[90,40,79,38],[90,41,79,39],[91,10,80,8],[92,10,81,8],[93,10,82,8,"w"],[93,11,82,9],[93,12,82,10,"next"],[93,16,82,14],[93,19,82,17,"i"],[93,20,82,18],[93,21,82,19],[93,24,82,22,"w"],[93,25,82,23],[93,26,82,24,"head"],[93,30,82,28],[93,33,82,31,"k"],[93,34,82,32],[93,35,82,33],[94,10,83,8,"w"],[94,11,83,9],[94,12,83,10,"head"],[94,16,83,14],[94,19,83,17,"k"],[94,20,83,18],[94,21,83,19],[94,24,83,22,"i"],[94,25,83,23],[95,8,84,6],[96,6,85,4],[98,6,87,4],[99,6,88,4],[99,11,88,9,"i"],[99,12,88,10],[99,15,88,13],[99,16,88,14],[99,18,88,16,"i"],[99,19,88,17],[99,22,88,20,"n"],[99,23,88,21],[99,25,88,23,"i"],[99,26,88,24],[99,28,88,26],[99,30,88,28],[100,8,89,6,"w"],[100,9,89,7],[100,10,89,8,"ancestor"],[100,18,89,16],[100,21,89,19,"i"],[100,22,89,20],[100,23,89,21],[100,26,89,24,"i"],[100,27,89,25],[101,6,90,4],[102,6,91,4],[102,11,91,9,"k"],[102,12,91,10],[102,15,91,13],[102,16,91,14],[102,18,91,16,"k"],[102,19,91,17],[102,22,91,20,"n"],[102,23,91,21],[102,25,91,23,"k"],[102,26,91,24],[102,28,91,26],[102,30,91,28],[103,8,92,6],[104,8,93,6,"j"],[104,9,93,7],[104,12,93,10,"post"],[104,16,93,14],[104,17,93,15,"k"],[104,18,93,16],[104,19,93,17],[105,8,94,6],[106,8,95,6],[106,12,95,10,"parent"],[106,18,95,16],[106,19,95,17,"j"],[106,20,95,18],[106,21,95,19],[106,26,95,24],[106,27,95,25],[106,28,95,26],[106,30,95,28],[107,10,96,8,"colcount"],[107,18,96,16],[107,19,96,17,"parent"],[107,25,96,23],[107,26,96,24,"j"],[107,27,96,25],[107,28,96,26],[107,29,96,27],[107,31,96,29],[108,8,97,6],[110,8,99,6],[111,8,100,6],[111,13,100,11,"J"],[111,14,100,12],[111,17,100,15,"ata"],[111,20,100,18],[111,23,100,21,"w"],[111,24,100,22],[111,25,100,23,"head"],[111,29,100,27],[111,32,100,30,"k"],[111,33,100,31],[111,34,100,32],[111,37,100,35,"j"],[111,38,100,36],[111,40,100,38,"J"],[111,41,100,39],[111,46,100,44],[111,47,100,45],[111,48,100,46],[111,50,100,48,"J"],[111,51,100,49],[111,54,100,52,"ata"],[111,57,100,55],[111,60,100,58,"w"],[111,61,100,59],[111,62,100,60,"next"],[111,66,100,64],[111,69,100,67,"J"],[111,70,100,68],[111,71,100,69],[111,74,100,72],[111,75,100,73],[111,76,100,74],[111,78,100,76],[112,10,101,8],[112,15,101,13,"p"],[112,16,101,14],[112,19,101,17,"tptr"],[112,23,101,21],[112,24,101,22,"J"],[112,25,101,23],[112,26,101,24],[112,28,101,26,"p"],[112,29,101,27],[112,32,101,30,"tptr"],[112,36,101,34],[112,37,101,35,"J"],[112,38,101,36],[112,41,101,39],[112,42,101,40],[112,43,101,41],[112,45,101,43,"p"],[112,46,101,44],[112,48,101,46],[112,50,101,48],[113,12,102,10,"i"],[113,13,102,11],[113,16,102,14,"tindex"],[113,22,102,20],[113,23,102,21,"p"],[113,24,102,22],[113,25,102,23],[114,12,103,10],[114,16,103,14,"r"],[114,17,103,15],[114,20,103,18],[114,24,103,18,"csLeaf"],[114,33,103,24],[114,34,103,24,"csLeaf"],[114,40,103,24],[114,42,103,25,"i"],[114,43,103,26],[114,45,103,28,"j"],[114,46,103,29],[114,48,103,31,"w"],[114,49,103,32],[114,51,103,34,"first"],[114,56,103,39],[114,58,103,41,"maxfirst"],[114,66,103,49],[114,68,103,51,"prevleaf"],[114,76,103,59],[114,78,103,61,"ancestor"],[114,86,103,69],[114,87,103,70],[115,12,104,10],[116,12,105,10],[116,16,105,14,"r"],[116,17,105,15],[116,18,105,16,"jleaf"],[116,23,105,21],[116,27,105,25],[116,28,105,26],[116,30,105,28],[117,14,106,12,"colcount"],[117,22,106,20],[117,23,106,21,"j"],[117,24,106,22],[117,25,106,23],[117,27,106,25],[118,12,107,10],[119,12,108,10],[120,12,109,10],[120,16,109,14,"r"],[120,17,109,15],[120,18,109,16,"jleaf"],[120,23,109,21],[120,28,109,26],[120,29,109,27],[120,31,109,29],[121,14,110,12,"colcount"],[121,22,110,20],[121,23,110,21,"r"],[121,24,110,22],[121,25,110,23,"q"],[121,26,110,24],[121,27,110,25],[121,29,110,27],[122,12,111,10],[123,10,112,8],[124,8,113,6],[125,8,114,6],[125,12,114,10,"parent"],[125,18,114,16],[125,19,114,17,"j"],[125,20,114,18],[125,21,114,19],[125,26,114,24],[125,27,114,25],[125,28,114,26],[125,30,114,28],[126,10,115,8,"w"],[126,11,115,9],[126,12,115,10,"ancestor"],[126,20,115,18],[126,23,115,21,"j"],[126,24,115,22],[126,25,115,23],[126,28,115,26,"parent"],[126,34,115,32],[126,35,115,33,"j"],[126,36,115,34],[126,37,115,35],[127,8,116,6],[128,6,117,4],[129,6,118,4],[130,6,119,4],[130,11,119,9,"j"],[130,12,119,10],[130,15,119,13],[130,16,119,14],[130,18,119,16,"j"],[130,19,119,17],[130,22,119,20,"n"],[130,23,119,21],[130,25,119,23,"j"],[130,26,119,24],[130,28,119,26],[130,30,119,28],[131,8,120,6],[131,12,120,10,"parent"],[131,18,120,16],[131,19,120,17,"j"],[131,20,120,18],[131,21,120,19],[131,26,120,24],[131,27,120,25],[131,28,120,26],[131,30,120,28],[132,10,121,8,"colcount"],[132,18,121,16],[132,19,121,17,"parent"],[132,25,121,23],[132,26,121,24,"j"],[132,27,121,25],[132,28,121,26],[132,29,121,27],[132,33,121,31,"colcount"],[132,41,121,39],[132,42,121,40,"j"],[132,43,121,41],[132,44,121,42],[133,8,122,6],[134,6,123,4],[135,6,124,4],[135,13,124,11,"colcount"],[135,21,124,19],[136,4,125,2],[136,5,125,3],[137,2,126,0],[137,3,126,1],[137,4,126,2],[138,0,126,3],[138,3]],"functionMap":{"names":["<global>","factory$argument_2","<anonymous>"],"mappings":"AAA;uECO;SCc;GDuG;CDC"},"hasCjsExports":false},"type":"js/module"}]}