{"dependencies":[{"name":"../../../utils/array.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":70,"index":70}}],"key":"durMBqg481bxjea6AL1QhBCrmEk=","exportNames":["*"],"imports":1}},{"name":"../../../utils/object.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":71},"end":{"line":2,"column":59,"index":130}}],"key":"Ebcgi3YCjQXFftnJv9/YnBUoskY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.broadcast = broadcast;\n  var _utilsArrayJs = require(_dependencyMap[0], \"../../../utils/array.js\");\n  var _utilsObjectJs = require(_dependencyMap[1], \"../../../utils/object.js\");\n  /**\n  * Broadcasts two matrices, and return both in an array\n  * It checks if it's possible with broadcasting rules\n  *\n  * @param {Matrix}   A      First Matrix\n  * @param {Matrix}   B      Second Matrix\n  *\n  * @return {Matrix[]}      [ broadcastedA, broadcastedB ]\n  */\n\n  function broadcast(A, B) {\n    if ((0, _utilsObjectJs.deepStrictEqual)(A.size(), B.size())) {\n      // If matrices have the same size return them\n      return [A, B];\n    }\n\n    // calculate the broadcasted sizes\n    var newSize = (0, _utilsArrayJs.broadcastSizes)(A.size(), B.size());\n\n    // return the array with the two broadcasted matrices\n    return [A, B].map(M => _broadcastTo(M, newSize));\n  }\n\n  /**\n   * Broadcasts a matrix to the given size.\n   *\n   * @param {Matrix} M - The matrix to be broadcasted.\n   * @param {number[]} size - The desired size of the broadcasted matrix.\n   * @returns {Matrix} The broadcasted matrix.\n   * @throws {Error} If the size parameter is not an array of numbers.\n   */\n  function _broadcastTo(M, size) {\n    if ((0, _utilsObjectJs.deepStrictEqual)(M.size(), size)) {\n      return M;\n    }\n    return M.create((0, _utilsArrayJs.broadcastTo)(M.valueOf(), size), M.datatype());\n  }\n});","lineCount":47,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"broadcast"],[7,19,14,0],[7,22,14,0,"broadcast"],[7,31,14,0],[8,2,1,0],[8,6,1,0,"_utilsArrayJs"],[8,19,1,0],[8,22,1,0,"require"],[8,29,1,0],[8,30,1,0,"_dependencyMap"],[8,44,1,0],[9,2,2,0],[9,6,2,0,"_utilsObjectJs"],[9,20,2,0],[9,23,2,0,"require"],[9,30,2,0],[9,31,2,0,"_dependencyMap"],[9,45,2,0],[10,2,4,0],[11,0,5,0],[12,0,6,0],[13,0,7,0],[14,0,8,0],[15,0,9,0],[16,0,10,0],[17,0,11,0],[18,0,12,0],[20,2,14,7],[20,11,14,16,"broadcast"],[20,20,14,25,"broadcast"],[20,21,14,26,"A"],[20,22,14,27],[20,24,14,29,"B"],[20,25,14,30],[20,27,14,32],[21,4,15,2],[21,8,15,6],[21,12,15,6,"deepStrictEqual"],[21,26,15,21],[21,27,15,21,"deepStrictEqual"],[21,42,15,21],[21,44,15,22,"A"],[21,45,15,23],[21,46,15,24,"size"],[21,50,15,28],[21,51,15,29],[21,52,15,30],[21,54,15,32,"B"],[21,55,15,33],[21,56,15,34,"size"],[21,60,15,38],[21,61,15,39],[21,62,15,40],[21,63,15,41],[21,65,15,43],[22,6,16,4],[23,6,17,4],[23,13,17,11],[23,14,17,12,"A"],[23,15,17,13],[23,17,17,15,"B"],[23,18,17,16],[23,19,17,17],[24,4,18,2],[26,4,20,2],[27,4,21,2],[27,8,21,6,"newSize"],[27,15,21,13],[27,18,21,16],[27,22,21,16,"broadcastSizes"],[27,35,21,30],[27,36,21,30,"broadcastSizes"],[27,50,21,30],[27,52,21,31,"A"],[27,53,21,32],[27,54,21,33,"size"],[27,58,21,37],[27,59,21,38],[27,60,21,39],[27,62,21,41,"B"],[27,63,21,42],[27,64,21,43,"size"],[27,68,21,47],[27,69,21,48],[27,70,21,49],[27,71,21,50],[29,4,23,2],[30,4,24,2],[30,11,24,9],[30,12,24,10,"A"],[30,13,24,11],[30,15,24,13,"B"],[30,16,24,14],[30,17,24,15],[30,18,24,16,"map"],[30,21,24,19],[30,22,24,20,"M"],[30,23,24,21],[30,27,24,25,"_broadcastTo"],[30,39,24,37],[30,40,24,38,"M"],[30,41,24,39],[30,43,24,41,"newSize"],[30,50,24,48],[30,51,24,49],[30,52,24,50],[31,2,25,0],[33,2,27,0],[34,0,28,0],[35,0,29,0],[36,0,30,0],[37,0,31,0],[38,0,32,0],[39,0,33,0],[40,0,34,0],[41,2,35,0],[41,11,35,9,"_broadcastTo"],[41,23,35,21,"_broadcastTo"],[41,24,35,22,"M"],[41,25,35,23],[41,27,35,25,"size"],[41,31,35,29],[41,33,35,31],[42,4,36,2],[42,8,36,6],[42,12,36,6,"deepStrictEqual"],[42,26,36,21],[42,27,36,21,"deepStrictEqual"],[42,42,36,21],[42,44,36,22,"M"],[42,45,36,23],[42,46,36,24,"size"],[42,50,36,28],[42,51,36,29],[42,52,36,30],[42,54,36,32,"size"],[42,58,36,36],[42,59,36,37],[42,61,36,39],[43,6,37,4],[43,13,37,11,"M"],[43,14,37,12],[44,4,38,2],[45,4,39,2],[45,11,39,9,"M"],[45,12,39,10],[45,13,39,11,"create"],[45,19,39,17],[45,20,39,18],[45,24,39,18,"broadcastTo"],[45,37,39,29],[45,38,39,29,"broadcastTo"],[45,49,39,29],[45,51,39,30,"M"],[45,52,39,31],[45,53,39,32,"valueOf"],[45,60,39,39],[45,61,39,40],[45,62,39,41],[45,64,39,43,"size"],[45,68,39,47],[45,69,39,48],[45,71,39,50,"M"],[45,72,39,51],[45,73,39,52,"datatype"],[45,81,39,60],[45,82,39,61],[45,83,39,62],[45,84,39,63],[46,2,40,0],[47,0,40,1],[47,3]],"functionMap":{"names":["<global>","broadcast","map$argument_0","_broadcastTo"],"mappings":"AAA;OCa;oBCU,6BD;CDC;AGU"},"hasCjsExports":false},"type":"js/module"}]}