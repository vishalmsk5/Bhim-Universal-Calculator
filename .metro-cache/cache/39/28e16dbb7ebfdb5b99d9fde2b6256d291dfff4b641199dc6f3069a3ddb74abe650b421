{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo07xSSf\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo07xSSf;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo07xSSf';\n  var dependencies = ['typed', 'SparseMatrix'];\n  var createMatAlgo07xSSf = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed,\n      SparseMatrix = _ref.SparseMatrix;\n    /**\n    * Iterates over SparseMatrix A and SparseMatrix B items (zero and nonzero) and invokes the callback function f(Aij, Bij).\n    * Callback function invoked MxN times.\n    *\n    * C(i,j) = f(Aij, Bij)\n    *\n    * @param {Matrix}   a                 The SparseMatrix instance (A)\n    * @param {Matrix}   b                 The SparseMatrix instance (B)\n    * @param {Function} callback          The f(Aij,Bij) operation to invoke\n    *\n    * @return {Matrix}                    SparseMatrix (C)\n    *\n    * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n    */\n    return function matAlgo07xSSf(a, b, callback) {\n      // sparse matrix arrays\n      var asize = a._size;\n      var adt = a._datatype || a._data === undefined ? a._datatype : a.getDataType();\n      var bsize = b._size;\n      var bdt = b._datatype || b._data === undefined ? b._datatype : b.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      var zero = 0;\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        dt = adt;\n        zero = typed.convert(0, dt);\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result arrays for sparse format\n      var cvalues = [];\n      var cindex = [];\n      var cptr = new Array(columns + 1).fill(0); // Start with column pointer array\n\n      // workspaces\n      var xa = [];\n      var xb = [];\n      var wa = [];\n      var wb = [];\n\n      // loop columns\n      for (var j = 0; j < columns; j++) {\n        var mark = j + 1;\n        var nonZeroCount = 0;\n        _scatter(a, j, wa, xa, mark);\n        _scatter(b, j, wb, xb, mark);\n\n        // loop rows\n        for (var i = 0; i < rows; i++) {\n          var va = wa[i] === mark ? xa[i] : zero;\n          var vb = wb[i] === mark ? xb[i] : zero;\n\n          // invoke callback\n          var cij = cf(va, vb);\n          // Store all non zero and true values\n          if (cij !== 0 && cij !== false) {\n            cindex.push(i); // row index\n            cvalues.push(cij); // computed value\n            nonZeroCount++;\n          }\n        }\n\n        // Update column pointer with cumulative count of non-zero values\n        cptr[j + 1] = cptr[j] + nonZeroCount;\n      }\n\n      // Return the result as a sparse matrix\n      return new SparseMatrix({\n        values: cvalues,\n        index: cindex,\n        ptr: cptr,\n        size: [rows, columns],\n        datatype: adt === a._datatype && bdt === b._datatype ? dt : undefined\n      });\n    };\n    function _scatter(m, j, w, x, mark) {\n      // a arrays\n      var values = m._values;\n      var index = m._index;\n      var ptr = m._ptr;\n      // loop values in column j\n      for (var k = ptr[j], k1 = ptr[j + 1]; k < k1; k++) {\n        // row\n        var i = index[k];\n        // update workspace\n        w[i] = mark;\n        x[i] = values[k];\n      }\n    }\n  });\n});","lineCount":126,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo07xSSf"],[10,32,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,28,3,26],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,31,4,29],[16,45,4,43],[16,46,4,44],[17,2,5,7],[17,6,5,11,"createMatAlgo07xSSf"],[17,25,5,30],[17,28,5,33],[17,43,5,48],[17,47,5,48,"factory"],[17,62,5,55],[17,63,5,55,"factory"],[17,70,5,55],[17,72,5,56,"name"],[17,76,5,60],[17,78,5,62,"dependencies"],[17,90,5,74],[17,92,5,76,"_ref"],[17,96,5,80],[17,100,5,84],[18,4,6,2],[18,8,7,4,"typed"],[18,13,7,9],[18,16,9,6,"_ref"],[18,20,9,10],[18,21,7,4,"typed"],[18,26,7,9],[19,6,8,4,"SparseMatrix"],[19,18,8,16],[19,21,9,6,"_ref"],[19,25,9,10],[19,26,8,4,"SparseMatrix"],[19,38,8,16],[20,4,10,2],[21,0,11,0],[22,0,12,0],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,4,24,2],[34,11,24,9],[34,20,24,18,"matAlgo07xSSf"],[34,33,24,31,"matAlgo07xSSf"],[34,34,24,32,"a"],[34,35,24,33],[34,37,24,35,"b"],[34,38,24,36],[34,40,24,38,"callback"],[34,48,24,46],[34,50,24,48],[35,6,25,4],[36,6,26,4],[36,10,26,8,"asize"],[36,15,26,13],[36,18,26,16,"a"],[36,19,26,17],[36,20,26,18,"_size"],[36,25,26,23],[37,6,27,4],[37,10,27,8,"adt"],[37,13,27,11],[37,16,27,14,"a"],[37,17,27,15],[37,18,27,16,"_datatype"],[37,27,27,25],[37,31,27,29,"a"],[37,32,27,30],[37,33,27,31,"_data"],[37,38,27,36],[37,43,27,41,"undefined"],[37,52,27,50],[37,55,27,53,"a"],[37,56,27,54],[37,57,27,55,"_datatype"],[37,66,27,64],[37,69,27,67,"a"],[37,70,27,68],[37,71,27,69,"getDataType"],[37,82,27,80],[37,83,27,81],[37,84,27,82],[38,6,28,4],[38,10,28,8,"bsize"],[38,15,28,13],[38,18,28,16,"b"],[38,19,28,17],[38,20,28,18,"_size"],[38,25,28,23],[39,6,29,4],[39,10,29,8,"bdt"],[39,13,29,11],[39,16,29,14,"b"],[39,17,29,15],[39,18,29,16,"_datatype"],[39,27,29,25],[39,31,29,29,"b"],[39,32,29,30],[39,33,29,31,"_data"],[39,38,29,36],[39,43,29,41,"undefined"],[39,52,29,50],[39,55,29,53,"b"],[39,56,29,54],[39,57,29,55,"_datatype"],[39,66,29,64],[39,69,29,67,"b"],[39,70,29,68],[39,71,29,69,"getDataType"],[39,82,29,80],[39,83,29,81],[39,84,29,82],[41,6,31,4],[42,6,32,4],[42,10,32,8,"asize"],[42,15,32,13],[42,16,32,14,"length"],[42,22,32,20],[42,27,32,25,"bsize"],[42,32,32,30],[42,33,32,31,"length"],[42,39,32,37],[42,41,32,39],[43,8,33,6],[43,14,33,12],[43,18,33,16,"DimensionError"],[43,40,33,30],[43,41,33,30,"DimensionError"],[43,55,33,30],[43,56,33,31,"asize"],[43,61,33,36],[43,62,33,37,"length"],[43,68,33,43],[43,70,33,45,"bsize"],[43,75,33,50],[43,76,33,51,"length"],[43,82,33,57],[43,83,33,58],[44,6,34,4],[45,6,35,4],[45,10,35,8,"asize"],[45,15,35,13],[45,16,35,14],[45,17,35,15],[45,18,35,16],[45,23,35,21,"bsize"],[45,28,35,26],[45,29,35,27],[45,30,35,28],[45,31,35,29],[45,35,35,33,"asize"],[45,40,35,38],[45,41,35,39],[45,42,35,40],[45,43,35,41],[45,48,35,46,"bsize"],[45,53,35,51],[45,54,35,52],[45,55,35,53],[45,56,35,54],[45,58,35,56],[46,8,36,6],[46,14,36,12],[46,18,36,16,"RangeError"],[46,28,36,26],[46,29,36,27],[46,61,36,59],[46,64,36,62,"asize"],[46,69,36,67],[46,72,36,70],[46,97,36,95],[46,100,36,98,"bsize"],[46,105,36,103],[46,108,36,106],[46,111,36,109],[46,112,36,110],[47,6,37,4],[49,6,39,4],[50,6,40,4],[50,10,40,8,"rows"],[50,14,40,12],[50,17,40,15,"asize"],[50,22,40,20],[50,23,40,21],[50,24,40,22],[50,25,40,23],[51,6,41,4],[51,10,41,8,"columns"],[51,17,41,15],[51,20,41,18,"asize"],[51,25,41,23],[51,26,41,24],[51,27,41,25],[51,28,41,26],[53,6,43,4],[54,6,44,4],[54,10,44,8,"dt"],[54,12,44,10],[55,6,45,4],[55,10,45,8,"zero"],[55,14,45,12],[55,17,45,15],[55,18,45,16],[56,6,46,4],[56,10,46,8,"cf"],[56,12,46,10],[56,15,46,13,"callback"],[56,23,46,21],[58,6,48,4],[59,6,49,4],[59,10,49,8],[59,17,49,15,"adt"],[59,20,49,18],[59,25,49,23],[59,33,49,31],[59,37,49,35,"adt"],[59,40,49,38],[59,45,49,43,"bdt"],[59,48,49,46],[59,52,49,50,"adt"],[59,55,49,53],[59,60,49,58],[59,67,49,65],[59,69,49,67],[60,8,50,6,"dt"],[60,10,50,8],[60,13,50,11,"adt"],[60,16,50,14],[61,8,51,6,"zero"],[61,12,51,10],[61,15,51,13,"typed"],[61,20,51,18],[61,21,51,19,"convert"],[61,28,51,26],[61,29,51,27],[61,30,51,28],[61,32,51,30,"dt"],[61,34,51,32],[61,35,51,33],[62,8,52,6,"cf"],[62,10,52,8],[62,13,52,11,"typed"],[62,18,52,16],[62,19,52,17,"find"],[62,23,52,21],[62,24,52,22,"callback"],[62,32,52,30],[62,34,52,32],[62,35,52,33,"dt"],[62,37,52,35],[62,39,52,37,"dt"],[62,41,52,39],[62,42,52,40],[62,43,52,41],[63,6,53,4],[65,6,55,4],[66,6,56,4],[66,10,56,8,"cvalues"],[66,17,56,15],[66,20,56,18],[66,22,56,20],[67,6,57,4],[67,10,57,8,"cindex"],[67,16,57,14],[67,19,57,17],[67,21,57,19],[68,6,58,4],[68,10,58,8,"cptr"],[68,14,58,12],[68,17,58,15],[68,21,58,19,"Array"],[68,26,58,24],[68,27,58,25,"columns"],[68,34,58,32],[68,37,58,35],[68,38,58,36],[68,39,58,37],[68,40,58,38,"fill"],[68,44,58,42],[68,45,58,43],[68,46,58,44],[68,47,58,45],[68,48,58,46],[68,49,58,47],[70,6,60,4],[71,6,61,4],[71,10,61,8,"xa"],[71,12,61,10],[71,15,61,13],[71,17,61,15],[72,6,62,4],[72,10,62,8,"xb"],[72,12,62,10],[72,15,62,13],[72,17,62,15],[73,6,63,4],[73,10,63,8,"wa"],[73,12,63,10],[73,15,63,13],[73,17,63,15],[74,6,64,4],[74,10,64,8,"wb"],[74,12,64,10],[74,15,64,13],[74,17,64,15],[76,6,66,4],[77,6,67,4],[77,11,67,9],[77,15,67,13,"j"],[77,16,67,14],[77,19,67,17],[77,20,67,18],[77,22,67,20,"j"],[77,23,67,21],[77,26,67,24,"columns"],[77,33,67,31],[77,35,67,33,"j"],[77,36,67,34],[77,38,67,36],[77,40,67,38],[78,8,68,6],[78,12,68,10,"mark"],[78,16,68,14],[78,19,68,17,"j"],[78,20,68,18],[78,23,68,21],[78,24,68,22],[79,8,69,6],[79,12,69,10,"nonZeroCount"],[79,24,69,22],[79,27,69,25],[79,28,69,26],[80,8,70,6,"_scatter"],[80,16,70,14],[80,17,70,15,"a"],[80,18,70,16],[80,20,70,18,"j"],[80,21,70,19],[80,23,70,21,"wa"],[80,25,70,23],[80,27,70,25,"xa"],[80,29,70,27],[80,31,70,29,"mark"],[80,35,70,33],[80,36,70,34],[81,8,71,6,"_scatter"],[81,16,71,14],[81,17,71,15,"b"],[81,18,71,16],[81,20,71,18,"j"],[81,21,71,19],[81,23,71,21,"wb"],[81,25,71,23],[81,27,71,25,"xb"],[81,29,71,27],[81,31,71,29,"mark"],[81,35,71,33],[81,36,71,34],[83,8,73,6],[84,8,74,6],[84,13,74,11],[84,17,74,15,"i"],[84,18,74,16],[84,21,74,19],[84,22,74,20],[84,24,74,22,"i"],[84,25,74,23],[84,28,74,26,"rows"],[84,32,74,30],[84,34,74,32,"i"],[84,35,74,33],[84,37,74,35],[84,39,74,37],[85,10,75,8],[85,14,75,12,"va"],[85,16,75,14],[85,19,75,17,"wa"],[85,21,75,19],[85,22,75,20,"i"],[85,23,75,21],[85,24,75,22],[85,29,75,27,"mark"],[85,33,75,31],[85,36,75,34,"xa"],[85,38,75,36],[85,39,75,37,"i"],[85,40,75,38],[85,41,75,39],[85,44,75,42,"zero"],[85,48,75,46],[86,10,76,8],[86,14,76,12,"vb"],[86,16,76,14],[86,19,76,17,"wb"],[86,21,76,19],[86,22,76,20,"i"],[86,23,76,21],[86,24,76,22],[86,29,76,27,"mark"],[86,33,76,31],[86,36,76,34,"xb"],[86,38,76,36],[86,39,76,37,"i"],[86,40,76,38],[86,41,76,39],[86,44,76,42,"zero"],[86,48,76,46],[88,10,78,8],[89,10,79,8],[89,14,79,12,"cij"],[89,17,79,15],[89,20,79,18,"cf"],[89,22,79,20],[89,23,79,21,"va"],[89,25,79,23],[89,27,79,25,"vb"],[89,29,79,27],[89,30,79,28],[90,10,80,8],[91,10,81,8],[91,14,81,12,"cij"],[91,17,81,15],[91,22,81,20],[91,23,81,21],[91,27,81,25,"cij"],[91,30,81,28],[91,35,81,33],[91,40,81,38],[91,42,81,40],[92,12,82,10,"cindex"],[92,18,82,16],[92,19,82,17,"push"],[92,23,82,21],[92,24,82,22,"i"],[92,25,82,23],[92,26,82,24],[92,27,82,25],[92,28,82,26],[93,12,83,10,"cvalues"],[93,19,83,17],[93,20,83,18,"push"],[93,24,83,22],[93,25,83,23,"cij"],[93,28,83,26],[93,29,83,27],[93,30,83,28],[93,31,83,29],[94,12,84,10,"nonZeroCount"],[94,24,84,22],[94,26,84,24],[95,10,85,8],[96,8,86,6],[98,8,88,6],[99,8,89,6,"cptr"],[99,12,89,10],[99,13,89,11,"j"],[99,14,89,12],[99,17,89,15],[99,18,89,16],[99,19,89,17],[99,22,89,20,"cptr"],[99,26,89,24],[99,27,89,25,"j"],[99,28,89,26],[99,29,89,27],[99,32,89,30,"nonZeroCount"],[99,44,89,42],[100,6,90,4],[102,6,92,4],[103,6,93,4],[103,13,93,11],[103,17,93,15,"SparseMatrix"],[103,29,93,27],[103,30,93,28],[104,8,94,6,"values"],[104,14,94,12],[104,16,94,14,"cvalues"],[104,23,94,21],[105,8,95,6,"index"],[105,13,95,11],[105,15,95,13,"cindex"],[105,21,95,19],[106,8,96,6,"ptr"],[106,11,96,9],[106,13,96,11,"cptr"],[106,17,96,15],[107,8,97,6,"size"],[107,12,97,10],[107,14,97,12],[107,15,97,13,"rows"],[107,19,97,17],[107,21,97,19,"columns"],[107,28,97,26],[107,29,97,27],[108,8,98,6,"datatype"],[108,16,98,14],[108,18,98,16,"adt"],[108,21,98,19],[108,26,98,24,"a"],[108,27,98,25],[108,28,98,26,"_datatype"],[108,37,98,35],[108,41,98,39,"bdt"],[108,44,98,42],[108,49,98,47,"b"],[108,50,98,48],[108,51,98,49,"_datatype"],[108,60,98,58],[108,63,98,61,"dt"],[108,65,98,63],[108,68,98,66,"undefined"],[109,6,99,4],[109,7,99,5],[109,8,99,6],[110,4,100,2],[110,5,100,3],[111,4,101,2],[111,13,101,11,"_scatter"],[111,21,101,19,"_scatter"],[111,22,101,20,"m"],[111,23,101,21],[111,25,101,23,"j"],[111,26,101,24],[111,28,101,26,"w"],[111,29,101,27],[111,31,101,29,"x"],[111,32,101,30],[111,34,101,32,"mark"],[111,38,101,36],[111,40,101,38],[112,6,102,4],[113,6,103,4],[113,10,103,8,"values"],[113,16,103,14],[113,19,103,17,"m"],[113,20,103,18],[113,21,103,19,"_values"],[113,28,103,26],[114,6,104,4],[114,10,104,8,"index"],[114,15,104,13],[114,18,104,16,"m"],[114,19,104,17],[114,20,104,18,"_index"],[114,26,104,24],[115,6,105,4],[115,10,105,8,"ptr"],[115,13,105,11],[115,16,105,14,"m"],[115,17,105,15],[115,18,105,16,"_ptr"],[115,22,105,20],[116,6,106,4],[117,6,107,4],[117,11,107,9],[117,15,107,13,"k"],[117,16,107,14],[117,19,107,17,"ptr"],[117,22,107,20],[117,23,107,21,"j"],[117,24,107,22],[117,25,107,23],[117,27,107,25,"k1"],[117,29,107,27],[117,32,107,30,"ptr"],[117,35,107,33],[117,36,107,34,"j"],[117,37,107,35],[117,40,107,38],[117,41,107,39],[117,42,107,40],[117,44,107,42,"k"],[117,45,107,43],[117,48,107,46,"k1"],[117,50,107,48],[117,52,107,50,"k"],[117,53,107,51],[117,55,107,53],[117,57,107,55],[118,8,108,6],[119,8,109,6],[119,12,109,10,"i"],[119,13,109,11],[119,16,109,14,"index"],[119,21,109,19],[119,22,109,20,"k"],[119,23,109,21],[119,24,109,22],[120,8,110,6],[121,8,111,6,"w"],[121,9,111,7],[121,10,111,8,"i"],[121,11,111,9],[121,12,111,10],[121,15,111,13,"mark"],[121,19,111,17],[122,8,112,6,"x"],[122,9,112,7],[122,10,112,8,"i"],[122,11,112,9],[122,12,112,10],[122,15,112,13,"values"],[122,21,112,19],[122,22,112,20,"k"],[122,23,112,21],[122,24,112,22],[123,6,113,4],[124,4,114,2],[125,2,115,0],[125,3,115,1],[125,4,115,2],[126,0,115,3],[126,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo07xSSf","_scatter"],"mappings":"AAA;4ECI;SCmB;GD4E;EEC;GFa;CDC"},"hasCjsExports":false},"type":"js/module"}]}