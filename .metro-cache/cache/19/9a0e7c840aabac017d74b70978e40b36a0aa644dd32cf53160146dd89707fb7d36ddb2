{"dependencies":[{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createKldivergence\", {\n    enumerable: true,\n    get: function () {\n      return createKldivergence;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../utils/factory.js\");\n  var name = 'kldivergence';\n  var dependencies = ['typed', 'matrix', 'divide', 'sum', 'multiply', 'map', 'dotDivide', 'log', 'isNumeric'];\n  var createKldivergence = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed,\n      matrix = _ref.matrix,\n      divide = _ref.divide,\n      sum = _ref.sum,\n      multiply = _ref.multiply,\n      map = _ref.map,\n      dotDivide = _ref.dotDivide,\n      log = _ref.log,\n      isNumeric = _ref.isNumeric;\n    /**\n       * Calculate the Kullback-Leibler (KL) divergence  between two distributions\n       *\n       * Syntax:\n       *\n       *     math.kldivergence(x, y)\n       *\n       * Examples:\n       *\n       *     math.kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])   //returns 0.24376698773121153\n       *\n       *\n       * @param  {Array | Matrix} q    First vector\n       * @param  {Array | Matrix} p    Second vector\n       * @return {number}              Returns distance between q and p\n       */\n    return typed(name, {\n      'Array, Array': function Array_Array(q, p) {\n        return _kldiv(matrix(q), matrix(p));\n      },\n      'Matrix, Array': function Matrix_Array(q, p) {\n        return _kldiv(q, matrix(p));\n      },\n      'Array, Matrix': function Array_Matrix(q, p) {\n        return _kldiv(matrix(q), p);\n      },\n      'Matrix, Matrix': function Matrix_Matrix(q, p) {\n        return _kldiv(q, p);\n      }\n    });\n    function _kldiv(q, p) {\n      var plength = p.size().length;\n      var qlength = q.size().length;\n      if (plength > 1) {\n        throw new Error('first object must be one dimensional');\n      }\n      if (qlength > 1) {\n        throw new Error('second object must be one dimensional');\n      }\n      if (plength !== qlength) {\n        throw new Error('Length of two vectors must be equal');\n      }\n\n      // Before calculation, apply normalization\n      var sumq = sum(q);\n      if (sumq === 0) {\n        throw new Error('Sum of elements in first object must be non zero');\n      }\n      var sump = sum(p);\n      if (sump === 0) {\n        throw new Error('Sum of elements in second object must be non zero');\n      }\n      var qnorm = divide(q, sum(q));\n      var pnorm = divide(p, sum(p));\n      var result = sum(multiply(qnorm, map(dotDivide(qnorm, pnorm), x => log(x))));\n      if (isNumeric(result)) {\n        return result;\n      } else {\n        return Number.NaN;\n      }\n    }\n  });\n});","lineCount":88,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"createKldivergence"],[10,31,4,0],[11,4,4,0],[12,2,4,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,4,"name"],[14,10,2,8],[14,13,2,11],[14,27,2,25],[15,2,3,0],[15,6,3,4,"dependencies"],[15,18,3,16],[15,21,3,19],[15,22,3,20],[15,29,3,27],[15,31,3,29],[15,39,3,37],[15,41,3,39],[15,49,3,47],[15,51,3,49],[15,56,3,54],[15,58,3,56],[15,68,3,66],[15,70,3,68],[15,75,3,73],[15,77,3,75],[15,88,3,86],[15,90,3,88],[15,95,3,93],[15,97,3,95],[15,108,3,106],[15,109,3,107],[16,2,4,7],[16,6,4,11,"createKldivergence"],[16,24,4,29],[16,27,4,32],[16,42,4,47],[16,46,4,47,"factory"],[16,61,4,54],[16,62,4,54,"factory"],[16,69,4,54],[16,71,4,55,"name"],[16,75,4,59],[16,77,4,61,"dependencies"],[16,89,4,73],[16,91,4,75,"_ref"],[16,95,4,79],[16,99,4,83],[17,4,5,2],[17,8,6,4,"typed"],[17,13,6,9],[17,16,15,6,"_ref"],[17,20,15,10],[17,21,6,4,"typed"],[17,26,6,9],[18,6,7,4,"matrix"],[18,12,7,10],[18,15,15,6,"_ref"],[18,19,15,10],[18,20,7,4,"matrix"],[18,26,7,10],[19,6,8,4,"divide"],[19,12,8,10],[19,15,15,6,"_ref"],[19,19,15,10],[19,20,8,4,"divide"],[19,26,8,10],[20,6,9,4,"sum"],[20,9,9,7],[20,12,15,6,"_ref"],[20,16,15,10],[20,17,9,4,"sum"],[20,20,9,7],[21,6,10,4,"multiply"],[21,14,10,12],[21,17,15,6,"_ref"],[21,21,15,10],[21,22,10,4,"multiply"],[21,30,10,12],[22,6,11,4,"map"],[22,9,11,7],[22,12,15,6,"_ref"],[22,16,15,10],[22,17,11,4,"map"],[22,20,11,7],[23,6,12,4,"dotDivide"],[23,15,12,13],[23,18,15,6,"_ref"],[23,22,15,10],[23,23,12,4,"dotDivide"],[23,32,12,13],[24,6,13,4,"log"],[24,9,13,7],[24,12,15,6,"_ref"],[24,16,15,10],[24,17,13,4,"log"],[24,20,13,7],[25,6,14,4,"isNumeric"],[25,15,14,13],[25,18,15,6,"_ref"],[25,22,15,10],[25,23,14,4,"isNumeric"],[25,32,14,13],[26,4,16,2],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,0,28,0],[39,0,29,0],[40,0,30,0],[41,0,31,0],[42,4,32,2],[42,11,32,9,"typed"],[42,16,32,14],[42,17,32,15,"name"],[42,21,32,19],[42,23,32,21],[43,6,33,4],[43,20,33,18],[43,22,33,20],[43,31,33,29,"Array_Array"],[43,42,33,40,"Array_Array"],[43,43,33,41,"q"],[43,44,33,42],[43,46,33,44,"p"],[43,47,33,45],[43,49,33,47],[44,8,34,6],[44,15,34,13,"_kldiv"],[44,21,34,19],[44,22,34,20,"matrix"],[44,28,34,26],[44,29,34,27,"q"],[44,30,34,28],[44,31,34,29],[44,33,34,31,"matrix"],[44,39,34,37],[44,40,34,38,"p"],[44,41,34,39],[44,42,34,40],[44,43,34,41],[45,6,35,4],[45,7,35,5],[46,6,36,4],[46,21,36,19],[46,23,36,21],[46,32,36,30,"Matrix_Array"],[46,44,36,42,"Matrix_Array"],[46,45,36,43,"q"],[46,46,36,44],[46,48,36,46,"p"],[46,49,36,47],[46,51,36,49],[47,8,37,6],[47,15,37,13,"_kldiv"],[47,21,37,19],[47,22,37,20,"q"],[47,23,37,21],[47,25,37,23,"matrix"],[47,31,37,29],[47,32,37,30,"p"],[47,33,37,31],[47,34,37,32],[47,35,37,33],[48,6,38,4],[48,7,38,5],[49,6,39,4],[49,21,39,19],[49,23,39,21],[49,32,39,30,"Array_Matrix"],[49,44,39,42,"Array_Matrix"],[49,45,39,43,"q"],[49,46,39,44],[49,48,39,46,"p"],[49,49,39,47],[49,51,39,49],[50,8,40,6],[50,15,40,13,"_kldiv"],[50,21,40,19],[50,22,40,20,"matrix"],[50,28,40,26],[50,29,40,27,"q"],[50,30,40,28],[50,31,40,29],[50,33,40,31,"p"],[50,34,40,32],[50,35,40,33],[51,6,41,4],[51,7,41,5],[52,6,42,4],[52,22,42,20],[52,24,42,22],[52,33,42,31,"Matrix_Matrix"],[52,46,42,44,"Matrix_Matrix"],[52,47,42,45,"q"],[52,48,42,46],[52,50,42,48,"p"],[52,51,42,49],[52,53,42,51],[53,8,43,6],[53,15,43,13,"_kldiv"],[53,21,43,19],[53,22,43,20,"q"],[53,23,43,21],[53,25,43,23,"p"],[53,26,43,24],[53,27,43,25],[54,6,44,4],[55,4,45,2],[55,5,45,3],[55,6,45,4],[56,4,46,2],[56,13,46,11,"_kldiv"],[56,19,46,17,"_kldiv"],[56,20,46,18,"q"],[56,21,46,19],[56,23,46,21,"p"],[56,24,46,22],[56,26,46,24],[57,6,47,4],[57,10,47,8,"plength"],[57,17,47,15],[57,20,47,18,"p"],[57,21,47,19],[57,22,47,20,"size"],[57,26,47,24],[57,27,47,25],[57,28,47,26],[57,29,47,27,"length"],[57,35,47,33],[58,6,48,4],[58,10,48,8,"qlength"],[58,17,48,15],[58,20,48,18,"q"],[58,21,48,19],[58,22,48,20,"size"],[58,26,48,24],[58,27,48,25],[58,28,48,26],[58,29,48,27,"length"],[58,35,48,33],[59,6,49,4],[59,10,49,8,"plength"],[59,17,49,15],[59,20,49,18],[59,21,49,19],[59,23,49,21],[60,8,50,6],[60,14,50,12],[60,18,50,16,"Error"],[60,23,50,21],[60,24,50,22],[60,62,50,60],[60,63,50,61],[61,6,51,4],[62,6,52,4],[62,10,52,8,"qlength"],[62,17,52,15],[62,20,52,18],[62,21,52,19],[62,23,52,21],[63,8,53,6],[63,14,53,12],[63,18,53,16,"Error"],[63,23,53,21],[63,24,53,22],[63,63,53,61],[63,64,53,62],[64,6,54,4],[65,6,55,4],[65,10,55,8,"plength"],[65,17,55,15],[65,22,55,20,"qlength"],[65,29,55,27],[65,31,55,29],[66,8,56,6],[66,14,56,12],[66,18,56,16,"Error"],[66,23,56,21],[66,24,56,22],[66,61,56,59],[66,62,56,60],[67,6,57,4],[69,6,59,4],[70,6,60,4],[70,10,60,8,"sumq"],[70,14,60,12],[70,17,60,15,"sum"],[70,20,60,18],[70,21,60,19,"q"],[70,22,60,20],[70,23,60,21],[71,6,61,4],[71,10,61,8,"sumq"],[71,14,61,12],[71,19,61,17],[71,20,61,18],[71,22,61,20],[72,8,62,6],[72,14,62,12],[72,18,62,16,"Error"],[72,23,62,21],[72,24,62,22],[72,74,62,72],[72,75,62,73],[73,6,63,4],[74,6,64,4],[74,10,64,8,"sump"],[74,14,64,12],[74,17,64,15,"sum"],[74,20,64,18],[74,21,64,19,"p"],[74,22,64,20],[74,23,64,21],[75,6,65,4],[75,10,65,8,"sump"],[75,14,65,12],[75,19,65,17],[75,20,65,18],[75,22,65,20],[76,8,66,6],[76,14,66,12],[76,18,66,16,"Error"],[76,23,66,21],[76,24,66,22],[76,75,66,73],[76,76,66,74],[77,6,67,4],[78,6,68,4],[78,10,68,8,"qnorm"],[78,15,68,13],[78,18,68,16,"divide"],[78,24,68,22],[78,25,68,23,"q"],[78,26,68,24],[78,28,68,26,"sum"],[78,31,68,29],[78,32,68,30,"q"],[78,33,68,31],[78,34,68,32],[78,35,68,33],[79,6,69,4],[79,10,69,8,"pnorm"],[79,15,69,13],[79,18,69,16,"divide"],[79,24,69,22],[79,25,69,23,"p"],[79,26,69,24],[79,28,69,26,"sum"],[79,31,69,29],[79,32,69,30,"p"],[79,33,69,31],[79,34,69,32],[79,35,69,33],[80,6,70,4],[80,10,70,8,"result"],[80,16,70,14],[80,19,70,17,"sum"],[80,22,70,20],[80,23,70,21,"multiply"],[80,31,70,29],[80,32,70,30,"qnorm"],[80,37,70,35],[80,39,70,37,"map"],[80,42,70,40],[80,43,70,41,"dotDivide"],[80,52,70,50],[80,53,70,51,"qnorm"],[80,58,70,56],[80,60,70,58,"pnorm"],[80,65,70,63],[80,66,70,64],[80,68,70,66,"x"],[80,69,70,67],[80,73,70,71,"log"],[80,76,70,74],[80,77,70,75,"x"],[80,78,70,76],[80,79,70,77],[80,80,70,78],[80,81,70,79],[80,82,70,80],[81,6,71,4],[81,10,71,8,"isNumeric"],[81,19,71,17],[81,20,71,18,"result"],[81,26,71,24],[81,27,71,25],[81,29,71,27],[82,8,72,6],[82,15,72,13,"result"],[82,21,72,19],[83,6,73,4],[83,7,73,5],[83,13,73,11],[84,8,74,6],[84,15,74,13,"Number"],[84,21,74,19],[84,22,74,20,"NaN"],[84,25,74,23],[85,6,75,4],[86,4,76,2],[87,2,77,0],[87,3,77,1],[87,4,77,2],[88,0,77,3],[88,3]],"functionMap":{"names":["<global>","factory$argument_2","Array_Array","Matrix_Array","Array_Matrix","Matrix_Matrix","_kldiv","map$argument_1"],"mappings":"AAA;2ECG;oBC6B;KDE;qBEC;KFE;qBGC;KHE;sBIC;KJE;EKE;kECwB,WD;GLM;CDC"},"hasCjsExports":false},"type":"js/module"}]}