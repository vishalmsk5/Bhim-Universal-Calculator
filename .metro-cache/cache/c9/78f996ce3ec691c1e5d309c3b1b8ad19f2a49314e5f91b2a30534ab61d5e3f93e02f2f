{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo09xS0Sf\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo09xS0Sf;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo09xS0Sf';\n  var dependencies = ['typed', 'equalScalar'];\n  var createMatAlgo09xS0Sf = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed,\n      equalScalar = _ref.equalScalar;\n    /**\n     * Iterates over SparseMatrix A and invokes the callback function f(Aij, Bij).\n     * Callback function invoked NZA times, number of nonzero elements in A.\n     *\n     *\n     *          ┌  f(Aij, Bij)  ; A(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  0            ; otherwise\n     *\n     *\n     * @param {Matrix}   a                 The SparseMatrix instance (A)\n     * @param {Matrix}   b                 The SparseMatrix instance (B)\n     * @param {Function} callback          The f(Aij,Bij) operation to invoke\n     *\n     * @return {Matrix}                    SparseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n     */\n    return function matAlgo09xS0Sf(a, b, callback) {\n      // sparse matrix arrays\n      var avalues = a._values;\n      var aindex = a._index;\n      var aptr = a._ptr;\n      var asize = a._size;\n      var adt = a._datatype || a._data === undefined ? a._datatype : a.getDataType();\n      // sparse matrix arrays\n      var bvalues = b._values;\n      var bindex = b._index;\n      var bptr = b._ptr;\n      var bsize = b._size;\n      var bdt = b._datatype || b._data === undefined ? b._datatype : b.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // equal signature to use\n      var eq = equalScalar;\n      // zero value\n      var zero = 0;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        // datatype\n        dt = adt;\n        // find signature that matches (dt, dt)\n        eq = typed.find(equalScalar, [dt, dt]);\n        // convert 0 to the same datatype\n        zero = typed.convert(0, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result arrays\n      var cvalues = avalues && bvalues ? [] : undefined;\n      var cindex = [];\n      var cptr = [];\n\n      // workspaces\n      var x = cvalues ? [] : undefined;\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // vars\n      var i, j, k, k0, k1;\n\n      // loop columns\n      for (j = 0; j < columns; j++) {\n        // update cptr\n        cptr[j] = cindex.length;\n        // column mark\n        var mark = j + 1;\n        // check we need to process values\n        if (x) {\n          // loop B(:,j)\n          for (k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n            // row\n            i = bindex[k];\n            // update workspace\n            w[i] = mark;\n            x[i] = bvalues[k];\n          }\n        }\n        // loop A(:,j)\n        for (k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          i = aindex[k];\n          // check we need to process values\n          if (x) {\n            // b value @ i,j\n            var vb = w[i] === mark ? x[i] : zero;\n            // invoke f\n            var vc = cf(avalues[k], vb);\n            // check zero value\n            if (!eq(vc, zero)) {\n              // push index\n              cindex.push(i);\n              // push value\n              cvalues.push(vc);\n            }\n          } else {\n            // push index\n            cindex.push(i);\n          }\n        }\n      }\n      // update cptr\n      cptr[columns] = cindex.length;\n\n      // return sparse matrix\n      return a.createSparseMatrix({\n        values: cvalues,\n        index: cindex,\n        ptr: cptr,\n        size: [rows, columns],\n        datatype: adt === a._datatype && bdt === b._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":153,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo09xS0Sf"],[10,33,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,29,3,27],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,31,4,29],[16,44,4,42],[16,45,4,43],[17,2,5,7],[17,6,5,11,"createMatAlgo09xS0Sf"],[17,26,5,31],[17,29,5,34],[17,44,5,49],[17,48,5,49,"factory"],[17,63,5,56],[17,64,5,56,"factory"],[17,71,5,56],[17,73,5,57,"name"],[17,77,5,61],[17,79,5,63,"dependencies"],[17,91,5,75],[17,93,5,77,"_ref"],[17,97,5,81],[17,101,5,85],[18,4,6,2],[18,8,7,4,"typed"],[18,13,7,9],[18,16,9,6,"_ref"],[18,20,9,10],[18,21,7,4,"typed"],[18,26,7,9],[19,6,8,4,"equalScalar"],[19,17,8,15],[19,20,9,6,"_ref"],[19,24,9,10],[19,25,8,4,"equalScalar"],[19,36,8,15],[20,4,10,2],[21,0,11,0],[22,0,12,0],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,4,28,2],[38,11,28,9],[38,20,28,18,"matAlgo09xS0Sf"],[38,34,28,32,"matAlgo09xS0Sf"],[38,35,28,33,"a"],[38,36,28,34],[38,38,28,36,"b"],[38,39,28,37],[38,41,28,39,"callback"],[38,49,28,47],[38,51,28,49],[39,6,29,4],[40,6,30,4],[40,10,30,8,"avalues"],[40,17,30,15],[40,20,30,18,"a"],[40,21,30,19],[40,22,30,20,"_values"],[40,29,30,27],[41,6,31,4],[41,10,31,8,"aindex"],[41,16,31,14],[41,19,31,17,"a"],[41,20,31,18],[41,21,31,19,"_index"],[41,27,31,25],[42,6,32,4],[42,10,32,8,"aptr"],[42,14,32,12],[42,17,32,15,"a"],[42,18,32,16],[42,19,32,17,"_ptr"],[42,23,32,21],[43,6,33,4],[43,10,33,8,"asize"],[43,15,33,13],[43,18,33,16,"a"],[43,19,33,17],[43,20,33,18,"_size"],[43,25,33,23],[44,6,34,4],[44,10,34,8,"adt"],[44,13,34,11],[44,16,34,14,"a"],[44,17,34,15],[44,18,34,16,"_datatype"],[44,27,34,25],[44,31,34,29,"a"],[44,32,34,30],[44,33,34,31,"_data"],[44,38,34,36],[44,43,34,41,"undefined"],[44,52,34,50],[44,55,34,53,"a"],[44,56,34,54],[44,57,34,55,"_datatype"],[44,66,34,64],[44,69,34,67,"a"],[44,70,34,68],[44,71,34,69,"getDataType"],[44,82,34,80],[44,83,34,81],[44,84,34,82],[45,6,35,4],[46,6,36,4],[46,10,36,8,"bvalues"],[46,17,36,15],[46,20,36,18,"b"],[46,21,36,19],[46,22,36,20,"_values"],[46,29,36,27],[47,6,37,4],[47,10,37,8,"bindex"],[47,16,37,14],[47,19,37,17,"b"],[47,20,37,18],[47,21,37,19,"_index"],[47,27,37,25],[48,6,38,4],[48,10,38,8,"bptr"],[48,14,38,12],[48,17,38,15,"b"],[48,18,38,16],[48,19,38,17,"_ptr"],[48,23,38,21],[49,6,39,4],[49,10,39,8,"bsize"],[49,15,39,13],[49,18,39,16,"b"],[49,19,39,17],[49,20,39,18,"_size"],[49,25,39,23],[50,6,40,4],[50,10,40,8,"bdt"],[50,13,40,11],[50,16,40,14,"b"],[50,17,40,15],[50,18,40,16,"_datatype"],[50,27,40,25],[50,31,40,29,"b"],[50,32,40,30],[50,33,40,31,"_data"],[50,38,40,36],[50,43,40,41,"undefined"],[50,52,40,50],[50,55,40,53,"b"],[50,56,40,54],[50,57,40,55,"_datatype"],[50,66,40,64],[50,69,40,67,"b"],[50,70,40,68],[50,71,40,69,"getDataType"],[50,82,40,80],[50,83,40,81],[50,84,40,82],[52,6,42,4],[53,6,43,4],[53,10,43,8,"asize"],[53,15,43,13],[53,16,43,14,"length"],[53,22,43,20],[53,27,43,25,"bsize"],[53,32,43,30],[53,33,43,31,"length"],[53,39,43,37],[53,41,43,39],[54,8,44,6],[54,14,44,12],[54,18,44,16,"DimensionError"],[54,40,44,30],[54,41,44,30,"DimensionError"],[54,55,44,30],[54,56,44,31,"asize"],[54,61,44,36],[54,62,44,37,"length"],[54,68,44,43],[54,70,44,45,"bsize"],[54,75,44,50],[54,76,44,51,"length"],[54,82,44,57],[54,83,44,58],[55,6,45,4],[57,6,47,4],[58,6,48,4],[58,10,48,8,"asize"],[58,15,48,13],[58,16,48,14],[58,17,48,15],[58,18,48,16],[58,23,48,21,"bsize"],[58,28,48,26],[58,29,48,27],[58,30,48,28],[58,31,48,29],[58,35,48,33,"asize"],[58,40,48,38],[58,41,48,39],[58,42,48,40],[58,43,48,41],[58,48,48,46,"bsize"],[58,53,48,51],[58,54,48,52],[58,55,48,53],[58,56,48,54],[58,58,48,56],[59,8,49,6],[59,14,49,12],[59,18,49,16,"RangeError"],[59,28,49,26],[59,29,49,27],[59,61,49,59],[59,64,49,62,"asize"],[59,69,49,67],[59,72,49,70],[59,97,49,95],[59,100,49,98,"bsize"],[59,105,49,103],[59,108,49,106],[59,111,49,109],[59,112,49,110],[60,6,50,4],[62,6,52,4],[63,6,53,4],[63,10,53,8,"rows"],[63,14,53,12],[63,17,53,15,"asize"],[63,22,53,20],[63,23,53,21],[63,24,53,22],[63,25,53,23],[64,6,54,4],[64,10,54,8,"columns"],[64,17,54,15],[64,20,54,18,"asize"],[64,25,54,23],[64,26,54,24],[64,27,54,25],[64,28,54,26],[66,6,56,4],[67,6,57,4],[67,10,57,8,"dt"],[67,12,57,10],[68,6,58,4],[69,6,59,4],[69,10,59,8,"eq"],[69,12,59,10],[69,15,59,13,"equalScalar"],[69,26,59,24],[70,6,60,4],[71,6,61,4],[71,10,61,8,"zero"],[71,14,61,12],[71,17,61,15],[71,18,61,16],[72,6,62,4],[73,6,63,4],[73,10,63,8,"cf"],[73,12,63,10],[73,15,63,13,"callback"],[73,23,63,21],[75,6,65,4],[76,6,66,4],[76,10,66,8],[76,17,66,15,"adt"],[76,20,66,18],[76,25,66,23],[76,33,66,31],[76,37,66,35,"adt"],[76,40,66,38],[76,45,66,43,"bdt"],[76,48,66,46],[76,52,66,50,"adt"],[76,55,66,53],[76,60,66,58],[76,67,66,65],[76,69,66,67],[77,8,67,6],[78,8,68,6,"dt"],[78,10,68,8],[78,13,68,11,"adt"],[78,16,68,14],[79,8,69,6],[80,8,70,6,"eq"],[80,10,70,8],[80,13,70,11,"typed"],[80,18,70,16],[80,19,70,17,"find"],[80,23,70,21],[80,24,70,22,"equalScalar"],[80,35,70,33],[80,37,70,35],[80,38,70,36,"dt"],[80,40,70,38],[80,42,70,40,"dt"],[80,44,70,42],[80,45,70,43],[80,46,70,44],[81,8,71,6],[82,8,72,6,"zero"],[82,12,72,10],[82,15,72,13,"typed"],[82,20,72,18],[82,21,72,19,"convert"],[82,28,72,26],[82,29,72,27],[82,30,72,28],[82,32,72,30,"dt"],[82,34,72,32],[82,35,72,33],[83,8,73,6],[84,8,74,6,"cf"],[84,10,74,8],[84,13,74,11,"typed"],[84,18,74,16],[84,19,74,17,"find"],[84,23,74,21],[84,24,74,22,"callback"],[84,32,74,30],[84,34,74,32],[84,35,74,33,"dt"],[84,37,74,35],[84,39,74,37,"dt"],[84,41,74,39],[84,42,74,40],[84,43,74,41],[85,6,75,4],[87,6,77,4],[88,6,78,4],[88,10,78,8,"cvalues"],[88,17,78,15],[88,20,78,18,"avalues"],[88,27,78,25],[88,31,78,29,"bvalues"],[88,38,78,36],[88,41,78,39],[88,43,78,41],[88,46,78,44,"undefined"],[88,55,78,53],[89,6,79,4],[89,10,79,8,"cindex"],[89,16,79,14],[89,19,79,17],[89,21,79,19],[90,6,80,4],[90,10,80,8,"cptr"],[90,14,80,12],[90,17,80,15],[90,19,80,17],[92,6,82,4],[93,6,83,4],[93,10,83,8,"x"],[93,11,83,9],[93,14,83,12,"cvalues"],[93,21,83,19],[93,24,83,22],[93,26,83,24],[93,29,83,27,"undefined"],[93,38,83,36],[94,6,84,4],[95,6,85,4],[95,10,85,8,"w"],[95,11,85,9],[95,14,85,12],[95,16,85,14],[97,6,87,4],[98,6,88,4],[98,10,88,8,"i"],[98,11,88,9],[98,13,88,11,"j"],[98,14,88,12],[98,16,88,14,"k"],[98,17,88,15],[98,19,88,17,"k0"],[98,21,88,19],[98,23,88,21,"k1"],[98,25,88,23],[100,6,90,4],[101,6,91,4],[101,11,91,9,"j"],[101,12,91,10],[101,15,91,13],[101,16,91,14],[101,18,91,16,"j"],[101,19,91,17],[101,22,91,20,"columns"],[101,29,91,27],[101,31,91,29,"j"],[101,32,91,30],[101,34,91,32],[101,36,91,34],[102,8,92,6],[103,8,93,6,"cptr"],[103,12,93,10],[103,13,93,11,"j"],[103,14,93,12],[103,15,93,13],[103,18,93,16,"cindex"],[103,24,93,22],[103,25,93,23,"length"],[103,31,93,29],[104,8,94,6],[105,8,95,6],[105,12,95,10,"mark"],[105,16,95,14],[105,19,95,17,"j"],[105,20,95,18],[105,23,95,21],[105,24,95,22],[106,8,96,6],[107,8,97,6],[107,12,97,10,"x"],[107,13,97,11],[107,15,97,13],[108,10,98,8],[109,10,99,8],[109,15,99,13,"k0"],[109,17,99,15],[109,20,99,18,"bptr"],[109,24,99,22],[109,25,99,23,"j"],[109,26,99,24],[109,27,99,25],[109,29,99,27,"k1"],[109,31,99,29],[109,34,99,32,"bptr"],[109,38,99,36],[109,39,99,37,"j"],[109,40,99,38],[109,43,99,41],[109,44,99,42],[109,45,99,43],[109,47,99,45,"k"],[109,48,99,46],[109,51,99,49,"k0"],[109,53,99,51],[109,55,99,53,"k"],[109,56,99,54],[109,59,99,57,"k1"],[109,61,99,59],[109,63,99,61,"k"],[109,64,99,62],[109,66,99,64],[109,68,99,66],[110,12,100,10],[111,12,101,10,"i"],[111,13,101,11],[111,16,101,14,"bindex"],[111,22,101,20],[111,23,101,21,"k"],[111,24,101,22],[111,25,101,23],[112,12,102,10],[113,12,103,10,"w"],[113,13,103,11],[113,14,103,12,"i"],[113,15,103,13],[113,16,103,14],[113,19,103,17,"mark"],[113,23,103,21],[114,12,104,10,"x"],[114,13,104,11],[114,14,104,12,"i"],[114,15,104,13],[114,16,104,14],[114,19,104,17,"bvalues"],[114,26,104,24],[114,27,104,25,"k"],[114,28,104,26],[114,29,104,27],[115,10,105,8],[116,8,106,6],[117,8,107,6],[118,8,108,6],[118,13,108,11,"k0"],[118,15,108,13],[118,18,108,16,"aptr"],[118,22,108,20],[118,23,108,21,"j"],[118,24,108,22],[118,25,108,23],[118,27,108,25,"k1"],[118,29,108,27],[118,32,108,30,"aptr"],[118,36,108,34],[118,37,108,35,"j"],[118,38,108,36],[118,41,108,39],[118,42,108,40],[118,43,108,41],[118,45,108,43,"k"],[118,46,108,44],[118,49,108,47,"k0"],[118,51,108,49],[118,53,108,51,"k"],[118,54,108,52],[118,57,108,55,"k1"],[118,59,108,57],[118,61,108,59,"k"],[118,62,108,60],[118,64,108,62],[118,66,108,64],[119,10,109,8],[120,10,110,8,"i"],[120,11,110,9],[120,14,110,12,"aindex"],[120,20,110,18],[120,21,110,19,"k"],[120,22,110,20],[120,23,110,21],[121,10,111,8],[122,10,112,8],[122,14,112,12,"x"],[122,15,112,13],[122,17,112,15],[123,12,113,10],[124,12,114,10],[124,16,114,14,"vb"],[124,18,114,16],[124,21,114,19,"w"],[124,22,114,20],[124,23,114,21,"i"],[124,24,114,22],[124,25,114,23],[124,30,114,28,"mark"],[124,34,114,32],[124,37,114,35,"x"],[124,38,114,36],[124,39,114,37,"i"],[124,40,114,38],[124,41,114,39],[124,44,114,42,"zero"],[124,48,114,46],[125,12,115,10],[126,12,116,10],[126,16,116,14,"vc"],[126,18,116,16],[126,21,116,19,"cf"],[126,23,116,21],[126,24,116,22,"avalues"],[126,31,116,29],[126,32,116,30,"k"],[126,33,116,31],[126,34,116,32],[126,36,116,34,"vb"],[126,38,116,36],[126,39,116,37],[127,12,117,10],[128,12,118,10],[128,16,118,14],[128,17,118,15,"eq"],[128,19,118,17],[128,20,118,18,"vc"],[128,22,118,20],[128,24,118,22,"zero"],[128,28,118,26],[128,29,118,27],[128,31,118,29],[129,14,119,12],[130,14,120,12,"cindex"],[130,20,120,18],[130,21,120,19,"push"],[130,25,120,23],[130,26,120,24,"i"],[130,27,120,25],[130,28,120,26],[131,14,121,12],[132,14,122,12,"cvalues"],[132,21,122,19],[132,22,122,20,"push"],[132,26,122,24],[132,27,122,25,"vc"],[132,29,122,27],[132,30,122,28],[133,12,123,10],[134,10,124,8],[134,11,124,9],[134,17,124,15],[135,12,125,10],[136,12,126,10,"cindex"],[136,18,126,16],[136,19,126,17,"push"],[136,23,126,21],[136,24,126,22,"i"],[136,25,126,23],[136,26,126,24],[137,10,127,8],[138,8,128,6],[139,6,129,4],[140,6,130,4],[141,6,131,4,"cptr"],[141,10,131,8],[141,11,131,9,"columns"],[141,18,131,16],[141,19,131,17],[141,22,131,20,"cindex"],[141,28,131,26],[141,29,131,27,"length"],[141,35,131,33],[143,6,133,4],[144,6,134,4],[144,13,134,11,"a"],[144,14,134,12],[144,15,134,13,"createSparseMatrix"],[144,33,134,31],[144,34,134,32],[145,8,135,6,"values"],[145,14,135,12],[145,16,135,14,"cvalues"],[145,23,135,21],[146,8,136,6,"index"],[146,13,136,11],[146,15,136,13,"cindex"],[146,21,136,19],[147,8,137,6,"ptr"],[147,11,137,9],[147,13,137,11,"cptr"],[147,17,137,15],[148,8,138,6,"size"],[148,12,138,10],[148,14,138,12],[148,15,138,13,"rows"],[148,19,138,17],[148,21,138,19,"columns"],[148,28,138,26],[148,29,138,27],[149,8,139,6,"datatype"],[149,16,139,14],[149,18,139,16,"adt"],[149,21,139,19],[149,26,139,24,"a"],[149,27,139,25],[149,28,139,26,"_datatype"],[149,37,139,35],[149,41,139,39,"bdt"],[149,44,139,42],[149,49,139,47,"b"],[149,50,139,48],[149,51,139,49,"_datatype"],[149,60,139,58],[149,63,139,61,"dt"],[149,65,139,63],[149,68,139,66,"undefined"],[150,6,140,4],[150,7,140,5],[150,8,140,6],[151,4,141,2],[151,5,141,3],[152,2,142,0],[152,3,142,1],[152,4,142,2],[153,0,142,3],[153,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo09xS0Sf"],"mappings":"AAA;6ECI;SCuB;GDiH;CDC"},"hasCjsExports":false},"type":"js/module"}]}