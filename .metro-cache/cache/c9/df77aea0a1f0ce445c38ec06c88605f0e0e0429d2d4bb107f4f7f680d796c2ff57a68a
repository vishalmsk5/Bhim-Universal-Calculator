{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo02xDS0\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo02xDS0;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo02xDS0';\n  var dependencies = ['typed', 'equalScalar'];\n  var createMatAlgo02xDS0 = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed,\n      equalScalar = _ref.equalScalar;\n    /**\n     * Iterates over SparseMatrix nonzero items and invokes the callback function f(Dij, Sij).\n     * Callback function invoked NNZ times (number of nonzero items in SparseMatrix).\n     *\n     *\n     *          ┌  f(Dij, Sij)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  0            ; otherwise\n     *\n     *\n     * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n     * @param {Matrix}   sparseMatrix      The SparseMatrix instance (S)\n     * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n     *\n     * @return {Matrix}                    SparseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n     */\n    return function matAlgo02xDS0(denseMatrix, sparseMatrix, callback, inverse) {\n      // dense matrix arrays\n      var adata = denseMatrix._data;\n      var asize = denseMatrix._size;\n      var adt = denseMatrix._datatype || denseMatrix.getDataType();\n      // sparse matrix arrays\n      var bvalues = sparseMatrix._values;\n      var bindex = sparseMatrix._index;\n      var bptr = sparseMatrix._ptr;\n      var bsize = sparseMatrix._size;\n      var bdt = sparseMatrix._datatype || sparseMatrix._data === undefined ? sparseMatrix._datatype : sparseMatrix.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!bvalues) {\n        throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // equal signature to use\n      var eq = equalScalar;\n      // zero value\n      var zero = 0;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        // datatype\n        dt = adt;\n        // find signature that matches (dt, dt)\n        eq = typed.find(equalScalar, [dt, dt]);\n        // convert 0 to the same datatype\n        zero = typed.convert(0, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result (SparseMatrix)\n      var cvalues = [];\n      var cindex = [];\n      var cptr = [];\n\n      // loop columns in b\n      for (var j = 0; j < columns; j++) {\n        // update cptr\n        cptr[j] = cindex.length;\n        // values in column j\n        for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          var i = bindex[k];\n          // update C(i,j)\n          var cij = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n          // check for nonzero\n          if (!eq(cij, zero)) {\n            // push i & v\n            cindex.push(i);\n            cvalues.push(cij);\n          }\n        }\n      }\n      // update cptr\n      cptr[columns] = cindex.length;\n\n      // return sparse matrix\n      return sparseMatrix.createSparseMatrix({\n        values: cvalues,\n        index: cindex,\n        ptr: cptr,\n        size: [rows, columns],\n        datatype: adt === denseMatrix._datatype && bdt === sparseMatrix._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":127,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo02xDS0"],[10,32,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,28,3,26],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,31,4,29],[16,44,4,42],[16,45,4,43],[17,2,5,7],[17,6,5,11,"createMatAlgo02xDS0"],[17,25,5,30],[17,28,5,33],[17,43,5,48],[17,47,5,48,"factory"],[17,62,5,55],[17,63,5,55,"factory"],[17,70,5,55],[17,72,5,56,"name"],[17,76,5,60],[17,78,5,62,"dependencies"],[17,90,5,74],[17,92,5,76,"_ref"],[17,96,5,80],[17,100,5,84],[18,4,6,2],[18,8,7,4,"typed"],[18,13,7,9],[18,16,9,6,"_ref"],[18,20,9,10],[18,21,7,4,"typed"],[18,26,7,9],[19,6,8,4,"equalScalar"],[19,17,8,15],[19,20,9,6,"_ref"],[19,24,9,10],[19,25,8,4,"equalScalar"],[19,36,8,15],[20,4,10,2],[21,0,11,0],[22,0,12,0],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,0,28,0],[39,4,29,2],[39,11,29,9],[39,20,29,18,"matAlgo02xDS0"],[39,33,29,31,"matAlgo02xDS0"],[39,34,29,32,"denseMatrix"],[39,45,29,43],[39,47,29,45,"sparseMatrix"],[39,59,29,57],[39,61,29,59,"callback"],[39,69,29,67],[39,71,29,69,"inverse"],[39,78,29,76],[39,80,29,78],[40,6,30,4],[41,6,31,4],[41,10,31,8,"adata"],[41,15,31,13],[41,18,31,16,"denseMatrix"],[41,29,31,27],[41,30,31,28,"_data"],[41,35,31,33],[42,6,32,4],[42,10,32,8,"asize"],[42,15,32,13],[42,18,32,16,"denseMatrix"],[42,29,32,27],[42,30,32,28,"_size"],[42,35,32,33],[43,6,33,4],[43,10,33,8,"adt"],[43,13,33,11],[43,16,33,14,"denseMatrix"],[43,27,33,25],[43,28,33,26,"_datatype"],[43,37,33,35],[43,41,33,39,"denseMatrix"],[43,52,33,50],[43,53,33,51,"getDataType"],[43,64,33,62],[43,65,33,63],[43,66,33,64],[44,6,34,4],[45,6,35,4],[45,10,35,8,"bvalues"],[45,17,35,15],[45,20,35,18,"sparseMatrix"],[45,32,35,30],[45,33,35,31,"_values"],[45,40,35,38],[46,6,36,4],[46,10,36,8,"bindex"],[46,16,36,14],[46,19,36,17,"sparseMatrix"],[46,31,36,29],[46,32,36,30,"_index"],[46,38,36,36],[47,6,37,4],[47,10,37,8,"bptr"],[47,14,37,12],[47,17,37,15,"sparseMatrix"],[47,29,37,27],[47,30,37,28,"_ptr"],[47,34,37,32],[48,6,38,4],[48,10,38,8,"bsize"],[48,15,38,13],[48,18,38,16,"sparseMatrix"],[48,30,38,28],[48,31,38,29,"_size"],[48,36,38,34],[49,6,39,4],[49,10,39,8,"bdt"],[49,13,39,11],[49,16,39,14,"sparseMatrix"],[49,28,39,26],[49,29,39,27,"_datatype"],[49,38,39,36],[49,42,39,40,"sparseMatrix"],[49,54,39,52],[49,55,39,53,"_data"],[49,60,39,58],[49,65,39,63,"undefined"],[49,74,39,72],[49,77,39,75,"sparseMatrix"],[49,89,39,87],[49,90,39,88,"_datatype"],[49,99,39,97],[49,102,39,100,"sparseMatrix"],[49,114,39,112],[49,115,39,113,"getDataType"],[49,126,39,124],[49,127,39,125],[49,128,39,126],[51,6,41,4],[52,6,42,4],[52,10,42,8,"asize"],[52,15,42,13],[52,16,42,14,"length"],[52,22,42,20],[52,27,42,25,"bsize"],[52,32,42,30],[52,33,42,31,"length"],[52,39,42,37],[52,41,42,39],[53,8,43,6],[53,14,43,12],[53,18,43,16,"DimensionError"],[53,40,43,30],[53,41,43,30,"DimensionError"],[53,55,43,30],[53,56,43,31,"asize"],[53,61,43,36],[53,62,43,37,"length"],[53,68,43,43],[53,70,43,45,"bsize"],[53,75,43,50],[53,76,43,51,"length"],[53,82,43,57],[53,83,43,58],[54,6,44,4],[56,6,46,4],[57,6,47,4],[57,10,47,8,"asize"],[57,15,47,13],[57,16,47,14],[57,17,47,15],[57,18,47,16],[57,23,47,21,"bsize"],[57,28,47,26],[57,29,47,27],[57,30,47,28],[57,31,47,29],[57,35,47,33,"asize"],[57,40,47,38],[57,41,47,39],[57,42,47,40],[57,43,47,41],[57,48,47,46,"bsize"],[57,53,47,51],[57,54,47,52],[57,55,47,53],[57,56,47,54],[57,58,47,56],[58,8,48,6],[58,14,48,12],[58,18,48,16,"RangeError"],[58,28,48,26],[58,29,48,27],[58,61,48,59],[58,64,48,62,"asize"],[58,69,48,67],[58,72,48,70],[58,97,48,95],[58,100,48,98,"bsize"],[58,105,48,103],[58,108,48,106],[58,111,48,109],[58,112,48,110],[59,6,49,4],[61,6,51,4],[62,6,52,4],[62,10,52,8],[62,11,52,9,"bvalues"],[62,18,52,16],[62,20,52,18],[63,8,53,6],[63,14,53,12],[63,18,53,16,"Error"],[63,23,53,21],[63,24,53,22],[63,92,53,90],[63,93,53,91],[64,6,54,4],[66,6,56,4],[67,6,57,4],[67,10,57,8,"rows"],[67,14,57,12],[67,17,57,15,"asize"],[67,22,57,20],[67,23,57,21],[67,24,57,22],[67,25,57,23],[68,6,58,4],[68,10,58,8,"columns"],[68,17,58,15],[68,20,58,18,"asize"],[68,25,58,23],[68,26,58,24],[68,27,58,25],[68,28,58,26],[70,6,60,4],[71,6,61,4],[71,10,61,8,"dt"],[71,12,61,10],[72,6,62,4],[73,6,63,4],[73,10,63,8,"eq"],[73,12,63,10],[73,15,63,13,"equalScalar"],[73,26,63,24],[74,6,64,4],[75,6,65,4],[75,10,65,8,"zero"],[75,14,65,12],[75,17,65,15],[75,18,65,16],[76,6,66,4],[77,6,67,4],[77,10,67,8,"cf"],[77,12,67,10],[77,15,67,13,"callback"],[77,23,67,21],[79,6,69,4],[80,6,70,4],[80,10,70,8],[80,17,70,15,"adt"],[80,20,70,18],[80,25,70,23],[80,33,70,31],[80,37,70,35,"adt"],[80,40,70,38],[80,45,70,43,"bdt"],[80,48,70,46],[80,52,70,50,"adt"],[80,55,70,53],[80,60,70,58],[80,67,70,65],[80,69,70,67],[81,8,71,6],[82,8,72,6,"dt"],[82,10,72,8],[82,13,72,11,"adt"],[82,16,72,14],[83,8,73,6],[84,8,74,6,"eq"],[84,10,74,8],[84,13,74,11,"typed"],[84,18,74,16],[84,19,74,17,"find"],[84,23,74,21],[84,24,74,22,"equalScalar"],[84,35,74,33],[84,37,74,35],[84,38,74,36,"dt"],[84,40,74,38],[84,42,74,40,"dt"],[84,44,74,42],[84,45,74,43],[84,46,74,44],[85,8,75,6],[86,8,76,6,"zero"],[86,12,76,10],[86,15,76,13,"typed"],[86,20,76,18],[86,21,76,19,"convert"],[86,28,76,26],[86,29,76,27],[86,30,76,28],[86,32,76,30,"dt"],[86,34,76,32],[86,35,76,33],[87,8,77,6],[88,8,78,6,"cf"],[88,10,78,8],[88,13,78,11,"typed"],[88,18,78,16],[88,19,78,17,"find"],[88,23,78,21],[88,24,78,22,"callback"],[88,32,78,30],[88,34,78,32],[88,35,78,33,"dt"],[88,37,78,35],[88,39,78,37,"dt"],[88,41,78,39],[88,42,78,40],[88,43,78,41],[89,6,79,4],[91,6,81,4],[92,6,82,4],[92,10,82,8,"cvalues"],[92,17,82,15],[92,20,82,18],[92,22,82,20],[93,6,83,4],[93,10,83,8,"cindex"],[93,16,83,14],[93,19,83,17],[93,21,83,19],[94,6,84,4],[94,10,84,8,"cptr"],[94,14,84,12],[94,17,84,15],[94,19,84,17],[96,6,86,4],[97,6,87,4],[97,11,87,9],[97,15,87,13,"j"],[97,16,87,14],[97,19,87,17],[97,20,87,18],[97,22,87,20,"j"],[97,23,87,21],[97,26,87,24,"columns"],[97,33,87,31],[97,35,87,33,"j"],[97,36,87,34],[97,38,87,36],[97,40,87,38],[98,8,88,6],[99,8,89,6,"cptr"],[99,12,89,10],[99,13,89,11,"j"],[99,14,89,12],[99,15,89,13],[99,18,89,16,"cindex"],[99,24,89,22],[99,25,89,23,"length"],[99,31,89,29],[100,8,90,6],[101,8,91,6],[101,13,91,11],[101,17,91,15,"k0"],[101,19,91,17],[101,22,91,20,"bptr"],[101,26,91,24],[101,27,91,25,"j"],[101,28,91,26],[101,29,91,27],[101,31,91,29,"k1"],[101,33,91,31],[101,36,91,34,"bptr"],[101,40,91,38],[101,41,91,39,"j"],[101,42,91,40],[101,45,91,43],[101,46,91,44],[101,47,91,45],[101,49,91,47,"k"],[101,50,91,48],[101,53,91,51,"k0"],[101,55,91,53],[101,57,91,55,"k"],[101,58,91,56],[101,61,91,59,"k1"],[101,63,91,61],[101,65,91,63,"k"],[101,66,91,64],[101,68,91,66],[101,70,91,68],[102,10,92,8],[103,10,93,8],[103,14,93,12,"i"],[103,15,93,13],[103,18,93,16,"bindex"],[103,24,93,22],[103,25,93,23,"k"],[103,26,93,24],[103,27,93,25],[104,10,94,8],[105,10,95,8],[105,14,95,12,"cij"],[105,17,95,15],[105,20,95,18,"inverse"],[105,27,95,25],[105,30,95,28,"cf"],[105,32,95,30],[105,33,95,31,"bvalues"],[105,40,95,38],[105,41,95,39,"k"],[105,42,95,40],[105,43,95,41],[105,45,95,43,"adata"],[105,50,95,48],[105,51,95,49,"i"],[105,52,95,50],[105,53,95,51],[105,54,95,52,"j"],[105,55,95,53],[105,56,95,54],[105,57,95,55],[105,60,95,58,"cf"],[105,62,95,60],[105,63,95,61,"adata"],[105,68,95,66],[105,69,95,67,"i"],[105,70,95,68],[105,71,95,69],[105,72,95,70,"j"],[105,73,95,71],[105,74,95,72],[105,76,95,74,"bvalues"],[105,83,95,81],[105,84,95,82,"k"],[105,85,95,83],[105,86,95,84],[105,87,95,85],[106,10,96,8],[107,10,97,8],[107,14,97,12],[107,15,97,13,"eq"],[107,17,97,15],[107,18,97,16,"cij"],[107,21,97,19],[107,23,97,21,"zero"],[107,27,97,25],[107,28,97,26],[107,30,97,28],[108,12,98,10],[109,12,99,10,"cindex"],[109,18,99,16],[109,19,99,17,"push"],[109,23,99,21],[109,24,99,22,"i"],[109,25,99,23],[109,26,99,24],[110,12,100,10,"cvalues"],[110,19,100,17],[110,20,100,18,"push"],[110,24,100,22],[110,25,100,23,"cij"],[110,28,100,26],[110,29,100,27],[111,10,101,8],[112,8,102,6],[113,6,103,4],[114,6,104,4],[115,6,105,4,"cptr"],[115,10,105,8],[115,11,105,9,"columns"],[115,18,105,16],[115,19,105,17],[115,22,105,20,"cindex"],[115,28,105,26],[115,29,105,27,"length"],[115,35,105,33],[117,6,107,4],[118,6,108,4],[118,13,108,11,"sparseMatrix"],[118,25,108,23],[118,26,108,24,"createSparseMatrix"],[118,44,108,42],[118,45,108,43],[119,8,109,6,"values"],[119,14,109,12],[119,16,109,14,"cvalues"],[119,23,109,21],[120,8,110,6,"index"],[120,13,110,11],[120,15,110,13,"cindex"],[120,21,110,19],[121,8,111,6,"ptr"],[121,11,111,9],[121,13,111,11,"cptr"],[121,17,111,15],[122,8,112,6,"size"],[122,12,112,10],[122,14,112,12],[122,15,112,13,"rows"],[122,19,112,17],[122,21,112,19,"columns"],[122,28,112,26],[122,29,112,27],[123,8,113,6,"datatype"],[123,16,113,14],[123,18,113,16,"adt"],[123,21,113,19],[123,26,113,24,"denseMatrix"],[123,37,113,35],[123,38,113,36,"_datatype"],[123,47,113,45],[123,51,113,49,"bdt"],[123,54,113,52],[123,59,113,57,"sparseMatrix"],[123,71,113,69],[123,72,113,70,"_datatype"],[123,81,113,79],[123,84,113,82,"dt"],[123,86,113,84],[123,89,113,87,"undefined"],[124,6,114,4],[124,7,114,5],[124,8,114,6],[125,4,115,2],[125,5,115,3],[126,2,116,0],[126,3,116,1],[126,4,116,2],[127,0,116,3],[127,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo02xDS0"],"mappings":"AAA;4ECI;SCwB;GDsF;CDC"},"hasCjsExports":false},"type":"js/module"}]}