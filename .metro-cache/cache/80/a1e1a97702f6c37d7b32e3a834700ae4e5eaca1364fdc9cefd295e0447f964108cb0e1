{"dependencies":[{"name":"./lruQueue.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":19},"end":{"line":3,"column":41,"index":60}}],"key":"hGQ1TQ5rc0+bbqWjI4im0ekUTro=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.memoize = memoize;\n  exports.memoizeCompare = memoizeCompare;\n  var _lruQueueJs = require(_dependencyMap[0], \"./lruQueue.js\");\n  // function utils\n\n  /**\n   * Memoize a given function by caching the computed result.\n   * The cache of a memoized function can be cleared by deleting the `cache`\n   * property of the function.\n   *\n   * @param {function} fn                     The function to be memoized.\n   *                                          Must be a pure function.\n   * @param {Object} [options]\n   * @param {function(args: Array): string} [options.hasher]\n   *    A custom hash builder. Is JSON.stringify by default.\n   * @param {number | undefined} [options.limit]\n   *    Maximum number of values that may be cached. Undefined indicates\n   *    unlimited (default)\n   * @return {function}                       Returns the memoized function\n   */\n  function memoize(fn) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      hasher = _ref.hasher,\n      limit = _ref.limit;\n    limit = limit == null ? Number.POSITIVE_INFINITY : limit;\n    hasher = hasher == null ? JSON.stringify : hasher;\n    return function memoize() {\n      if (typeof memoize.cache !== 'object') {\n        memoize.cache = {\n          values: new Map(),\n          lru: (0, _lruQueueJs.lruQueue)(limit || Number.POSITIVE_INFINITY)\n        };\n      }\n      var args = [];\n      for (var i = 0; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n      var hash = hasher(args);\n      if (memoize.cache.values.has(hash)) {\n        memoize.cache.lru.hit(hash);\n        return memoize.cache.values.get(hash);\n      }\n      var newVal = fn.apply(fn, args);\n      memoize.cache.values.set(hash, newVal);\n      memoize.cache.values.delete(memoize.cache.lru.hit(hash));\n      return newVal;\n    };\n  }\n\n  /**\n   * Memoize a given function by caching all results and the arguments,\n   * and comparing against the arguments of previous results before\n   * executing again.\n   * This is less performant than `memoize` which calculates a hash,\n   * which is very fast to compare. Use `memoizeCompare` only when it is\n   * not possible to create a unique serializable hash from the function\n   * arguments.\n   * The isEqual function must compare two sets of arguments\n   * and return true when equal (can be a deep equality check for example).\n   * @param {function} fn\n   * @param {function(a: *, b: *) : boolean} isEqual\n   * @returns {function}\n   */\n  function memoizeCompare(fn, isEqual) {\n    var memoize = function memoize() {\n      var args = [];\n      for (var i = 0; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n      for (var c = 0; c < memoize.cache.length; c++) {\n        var cached = memoize.cache[c];\n        if (isEqual(args, cached.args)) {\n          // TODO: move this cache entry to the top so recently used entries move up?\n          return cached.res;\n        }\n      }\n      var res = fn.apply(fn, args);\n      memoize.cache.unshift({\n        args,\n        res\n      });\n      return res;\n    };\n    memoize.cache = [];\n    return memoize;\n  }\n});","lineCount":93,"map":[[7,2,20,0,"exports"],[7,9,20,0],[7,10,20,0,"memoize"],[7,17,20,0],[7,20,20,0,"memoize"],[7,27,20,0],[8,2,64,0,"exports"],[8,9,64,0],[8,10,64,0,"memoizeCompare"],[8,24,64,0],[8,27,64,0,"memoizeCompare"],[8,41,64,0],[9,2,3,0],[9,6,3,0,"_lruQueueJs"],[9,17,3,0],[9,20,3,0,"require"],[9,27,3,0],[9,28,3,0,"_dependencyMap"],[9,42,3,0],[10,2,1,0],[12,2,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,2,20,7],[27,11,20,16,"memoize"],[27,18,20,23,"memoize"],[27,19,20,24,"fn"],[27,21,20,26],[27,23,20,28],[28,4,21,2],[28,8,21,2,"_ref"],[28,12,21,2],[28,15,24,6,"arguments"],[28,24,24,15],[28,25,24,16,"length"],[28,31,24,22],[28,34,24,25],[28,35,24,26],[28,39,24,30,"arguments"],[28,48,24,39],[28,49,24,40],[28,50,24,41],[28,51,24,42],[28,56,24,47,"undefined"],[28,65,24,56],[28,68,24,59,"arguments"],[28,77,24,68],[28,78,24,69],[28,79,24,70],[28,80,24,71],[28,83,24,74],[28,84,24,75],[28,85,24,76],[29,6,22,4,"hasher"],[29,12,22,10],[29,15,22,10,"_ref"],[29,19,22,10],[29,20,22,4,"hasher"],[29,26,22,10],[30,6,23,4,"limit"],[30,11,23,9],[30,14,23,9,"_ref"],[30,18,23,9],[30,19,23,4,"limit"],[30,24,23,9],[31,4,25,2,"limit"],[31,9,25,7],[31,12,25,10,"limit"],[31,17,25,15],[31,21,25,19],[31,25,25,23],[31,28,25,26,"Number"],[31,34,25,32],[31,35,25,33,"POSITIVE_INFINITY"],[31,52,25,50],[31,55,25,53,"limit"],[31,60,25,58],[32,4,26,2,"hasher"],[32,10,26,8],[32,13,26,11,"hasher"],[32,19,26,17],[32,23,26,21],[32,27,26,25],[32,30,26,28,"JSON"],[32,34,26,32],[32,35,26,33,"stringify"],[32,44,26,42],[32,47,26,45,"hasher"],[32,53,26,51],[33,4,27,2],[33,11,27,9],[33,20,27,18,"memoize"],[33,27,27,25,"memoize"],[33,28,27,25],[33,30,27,28],[34,6,28,4],[34,10,28,8],[34,17,28,15,"memoize"],[34,24,28,22],[34,25,28,23,"cache"],[34,30,28,28],[34,35,28,33],[34,43,28,41],[34,45,28,43],[35,8,29,6,"memoize"],[35,15,29,13],[35,16,29,14,"cache"],[35,21,29,19],[35,24,29,22],[36,10,30,8,"values"],[36,16,30,14],[36,18,30,16],[36,22,30,20,"Map"],[36,25,30,23],[36,26,30,24],[36,27,30,25],[37,10,31,8,"lru"],[37,13,31,11],[37,15,31,13],[37,19,31,13,"lruQueue"],[37,30,31,21],[37,31,31,21,"lruQueue"],[37,39,31,21],[37,41,31,22,"limit"],[37,46,31,27],[37,50,31,31,"Number"],[37,56,31,37],[37,57,31,38,"POSITIVE_INFINITY"],[37,74,31,55],[38,8,32,6],[38,9,32,7],[39,6,33,4],[40,6,34,4],[40,10,34,8,"args"],[40,14,34,12],[40,17,34,15],[40,19,34,17],[41,6,35,4],[41,11,35,9],[41,15,35,13,"i"],[41,16,35,14],[41,19,35,17],[41,20,35,18],[41,22,35,20,"i"],[41,23,35,21],[41,26,35,24,"arguments"],[41,35,35,33],[41,36,35,34,"length"],[41,42,35,40],[41,44,35,42,"i"],[41,45,35,43],[41,47,35,45],[41,49,35,47],[42,8,36,6,"args"],[42,12,36,10],[42,13,36,11,"i"],[42,14,36,12],[42,15,36,13],[42,18,36,16,"arguments"],[42,27,36,25],[42,28,36,26,"i"],[42,29,36,27],[42,30,36,28],[43,6,37,4],[44,6,38,4],[44,10,38,8,"hash"],[44,14,38,12],[44,17,38,15,"hasher"],[44,23,38,21],[44,24,38,22,"args"],[44,28,38,26],[44,29,38,27],[45,6,39,4],[45,10,39,8,"memoize"],[45,17,39,15],[45,18,39,16,"cache"],[45,23,39,21],[45,24,39,22,"values"],[45,30,39,28],[45,31,39,29,"has"],[45,34,39,32],[45,35,39,33,"hash"],[45,39,39,37],[45,40,39,38],[45,42,39,40],[46,8,40,6,"memoize"],[46,15,40,13],[46,16,40,14,"cache"],[46,21,40,19],[46,22,40,20,"lru"],[46,25,40,23],[46,26,40,24,"hit"],[46,29,40,27],[46,30,40,28,"hash"],[46,34,40,32],[46,35,40,33],[47,8,41,6],[47,15,41,13,"memoize"],[47,22,41,20],[47,23,41,21,"cache"],[47,28,41,26],[47,29,41,27,"values"],[47,35,41,33],[47,36,41,34,"get"],[47,39,41,37],[47,40,41,38,"hash"],[47,44,41,42],[47,45,41,43],[48,6,42,4],[49,6,43,4],[49,10,43,8,"newVal"],[49,16,43,14],[49,19,43,17,"fn"],[49,21,43,19],[49,22,43,20,"apply"],[49,27,43,25],[49,28,43,26,"fn"],[49,30,43,28],[49,32,43,30,"args"],[49,36,43,34],[49,37,43,35],[50,6,44,4,"memoize"],[50,13,44,11],[50,14,44,12,"cache"],[50,19,44,17],[50,20,44,18,"values"],[50,26,44,24],[50,27,44,25,"set"],[50,30,44,28],[50,31,44,29,"hash"],[50,35,44,33],[50,37,44,35,"newVal"],[50,43,44,41],[50,44,44,42],[51,6,45,4,"memoize"],[51,13,45,11],[51,14,45,12,"cache"],[51,19,45,17],[51,20,45,18,"values"],[51,26,45,24],[51,27,45,25,"delete"],[51,33,45,31],[51,34,45,32,"memoize"],[51,41,45,39],[51,42,45,40,"cache"],[51,47,45,45],[51,48,45,46,"lru"],[51,51,45,49],[51,52,45,50,"hit"],[51,55,45,53],[51,56,45,54,"hash"],[51,60,45,58],[51,61,45,59],[51,62,45,60],[52,6,46,4],[52,13,46,11,"newVal"],[52,19,46,17],[53,4,47,2],[53,5,47,3],[54,2,48,0],[56,2,50,0],[57,0,51,0],[58,0,52,0],[59,0,53,0],[60,0,54,0],[61,0,55,0],[62,0,56,0],[63,0,57,0],[64,0,58,0],[65,0,59,0],[66,0,60,0],[67,0,61,0],[68,0,62,0],[69,0,63,0],[70,2,64,7],[70,11,64,16,"memoizeCompare"],[70,25,64,30,"memoizeCompare"],[70,26,64,31,"fn"],[70,28,64,33],[70,30,64,35,"isEqual"],[70,37,64,42],[70,39,64,44],[71,4,65,2],[71,8,65,6,"memoize"],[71,15,65,13],[71,18,65,16],[71,27,65,25,"memoize"],[71,34,65,32,"memoize"],[71,35,65,32],[71,37,65,35],[72,6,66,4],[72,10,66,8,"args"],[72,14,66,12],[72,17,66,15],[72,19,66,17],[73,6,67,4],[73,11,67,9],[73,15,67,13,"i"],[73,16,67,14],[73,19,67,17],[73,20,67,18],[73,22,67,20,"i"],[73,23,67,21],[73,26,67,24,"arguments"],[73,35,67,33],[73,36,67,34,"length"],[73,42,67,40],[73,44,67,42,"i"],[73,45,67,43],[73,47,67,45],[73,49,67,47],[74,8,68,6,"args"],[74,12,68,10],[74,13,68,11,"i"],[74,14,68,12],[74,15,68,13],[74,18,68,16,"arguments"],[74,27,68,25],[74,28,68,26,"i"],[74,29,68,27],[74,30,68,28],[75,6,69,4],[76,6,70,4],[76,11,70,9],[76,15,70,13,"c"],[76,16,70,14],[76,19,70,17],[76,20,70,18],[76,22,70,20,"c"],[76,23,70,21],[76,26,70,24,"memoize"],[76,33,70,31],[76,34,70,32,"cache"],[76,39,70,37],[76,40,70,38,"length"],[76,46,70,44],[76,48,70,46,"c"],[76,49,70,47],[76,51,70,49],[76,53,70,51],[77,8,71,6],[77,12,71,10,"cached"],[77,18,71,16],[77,21,71,19,"memoize"],[77,28,71,26],[77,29,71,27,"cache"],[77,34,71,32],[77,35,71,33,"c"],[77,36,71,34],[77,37,71,35],[78,8,72,6],[78,12,72,10,"isEqual"],[78,19,72,17],[78,20,72,18,"args"],[78,24,72,22],[78,26,72,24,"cached"],[78,32,72,30],[78,33,72,31,"args"],[78,37,72,35],[78,38,72,36],[78,40,72,38],[79,10,73,8],[80,10,74,8],[80,17,74,15,"cached"],[80,23,74,21],[80,24,74,22,"res"],[80,27,74,25],[81,8,75,6],[82,6,76,4],[83,6,77,4],[83,10,77,8,"res"],[83,13,77,11],[83,16,77,14,"fn"],[83,18,77,16],[83,19,77,17,"apply"],[83,24,77,22],[83,25,77,23,"fn"],[83,27,77,25],[83,29,77,27,"args"],[83,33,77,31],[83,34,77,32],[84,6,78,4,"memoize"],[84,13,78,11],[84,14,78,12,"cache"],[84,19,78,17],[84,20,78,18,"unshift"],[84,27,78,25],[84,28,78,26],[85,8,79,6,"args"],[85,12,79,10],[86,8,80,6,"res"],[87,6,81,4],[87,7,81,5],[87,8,81,6],[88,6,82,4],[88,13,82,11,"res"],[88,16,82,14],[89,4,83,2],[89,5,83,3],[90,4,84,2,"memoize"],[90,11,84,9],[90,12,84,10,"cache"],[90,17,84,15],[90,20,84,18],[90,22,84,20],[91,4,85,2],[91,11,85,9,"memoize"],[91,18,85,16],[92,2,86,0],[93,0,86,1],[93,3]],"functionMap":{"names":["<global>","memoize","memoizeCompare"],"mappings":"AAA;OCmB;CD4B;OEgB;gBDC;GCkB"},"hasCjsExports":false},"type":"js/module"}]}