{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo03xDSf\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo03xDSf;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo03xDSf';\n  var dependencies = ['typed'];\n  var createMatAlgo03xDSf = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed;\n    /**\n     * Iterates over SparseMatrix items and invokes the callback function f(Dij, Sij).\n     * Callback function invoked M*N times.\n     *\n     *\n     *          ┌  f(Dij, Sij)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  f(Dij, 0)    ; otherwise\n     *\n     *\n     * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n     * @param {Matrix}   sparseMatrix      The SparseMatrix instance (C)\n     * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n     *\n     * @return {Matrix}                    DenseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n     */\n    return function matAlgo03xDSf(denseMatrix, sparseMatrix, callback, inverse) {\n      // dense matrix arrays\n      var adata = denseMatrix._data;\n      var asize = denseMatrix._size;\n      var adt = denseMatrix._datatype || denseMatrix.getDataType();\n      // sparse matrix arrays\n      var bvalues = sparseMatrix._values;\n      var bindex = sparseMatrix._index;\n      var bptr = sparseMatrix._ptr;\n      var bsize = sparseMatrix._size;\n      var bdt = sparseMatrix._datatype || sparseMatrix._data === undefined ? sparseMatrix._datatype : sparseMatrix.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!bvalues) {\n        throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // zero value\n      var zero = 0;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        // datatype\n        dt = adt;\n        // convert 0 to the same datatype\n        zero = typed.convert(0, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result (DenseMatrix)\n      var cdata = [];\n\n      // initialize dense matrix\n      for (var z = 0; z < rows; z++) {\n        // initialize row\n        cdata[z] = [];\n      }\n\n      // workspace\n      var x = [];\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // loop columns in b\n      for (var j = 0; j < columns; j++) {\n        // column mark\n        var mark = j + 1;\n        // values in column j\n        for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          var i = bindex[k];\n          // update workspace\n          x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n          w[i] = mark;\n        }\n        // process workspace\n        for (var y = 0; y < rows; y++) {\n          // check we have a calculated value for current row\n          if (w[y] === mark) {\n            // use calculated value\n            cdata[y][j] = x[y];\n          } else {\n            // calculate value\n            cdata[y][j] = inverse ? cf(zero, adata[y][j]) : cf(adata[y][j], zero);\n          }\n        }\n      }\n\n      // return dense matrix\n      return denseMatrix.createDenseMatrix({\n        data: cdata,\n        size: [rows, columns],\n        datatype: adt === denseMatrix._datatype && bdt === sparseMatrix._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":133,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo03xDSf"],[10,32,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,28,3,26],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,30,4,28],[17,2,5,7],[17,6,5,11,"createMatAlgo03xDSf"],[17,25,5,30],[17,28,5,33],[17,43,5,48],[17,47,5,48,"factory"],[17,62,5,55],[17,63,5,55,"factory"],[17,70,5,55],[17,72,5,56,"name"],[17,76,5,60],[17,78,5,62,"dependencies"],[17,90,5,74],[17,92,5,76,"_ref"],[17,96,5,80],[17,100,5,84],[18,4,6,2],[18,8,7,4,"typed"],[18,13,7,9],[18,16,8,6,"_ref"],[18,20,8,10],[18,21,7,4,"typed"],[18,26,7,9],[19,4,9,2],[20,0,10,0],[21,0,11,0],[22,0,12,0],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,4,28,2],[38,11,28,9],[38,20,28,18,"matAlgo03xDSf"],[38,33,28,31,"matAlgo03xDSf"],[38,34,28,32,"denseMatrix"],[38,45,28,43],[38,47,28,45,"sparseMatrix"],[38,59,28,57],[38,61,28,59,"callback"],[38,69,28,67],[38,71,28,69,"inverse"],[38,78,28,76],[38,80,28,78],[39,6,29,4],[40,6,30,4],[40,10,30,8,"adata"],[40,15,30,13],[40,18,30,16,"denseMatrix"],[40,29,30,27],[40,30,30,28,"_data"],[40,35,30,33],[41,6,31,4],[41,10,31,8,"asize"],[41,15,31,13],[41,18,31,16,"denseMatrix"],[41,29,31,27],[41,30,31,28,"_size"],[41,35,31,33],[42,6,32,4],[42,10,32,8,"adt"],[42,13,32,11],[42,16,32,14,"denseMatrix"],[42,27,32,25],[42,28,32,26,"_datatype"],[42,37,32,35],[42,41,32,39,"denseMatrix"],[42,52,32,50],[42,53,32,51,"getDataType"],[42,64,32,62],[42,65,32,63],[42,66,32,64],[43,6,33,4],[44,6,34,4],[44,10,34,8,"bvalues"],[44,17,34,15],[44,20,34,18,"sparseMatrix"],[44,32,34,30],[44,33,34,31,"_values"],[44,40,34,38],[45,6,35,4],[45,10,35,8,"bindex"],[45,16,35,14],[45,19,35,17,"sparseMatrix"],[45,31,35,29],[45,32,35,30,"_index"],[45,38,35,36],[46,6,36,4],[46,10,36,8,"bptr"],[46,14,36,12],[46,17,36,15,"sparseMatrix"],[46,29,36,27],[46,30,36,28,"_ptr"],[46,34,36,32],[47,6,37,4],[47,10,37,8,"bsize"],[47,15,37,13],[47,18,37,16,"sparseMatrix"],[47,30,37,28],[47,31,37,29,"_size"],[47,36,37,34],[48,6,38,4],[48,10,38,8,"bdt"],[48,13,38,11],[48,16,38,14,"sparseMatrix"],[48,28,38,26],[48,29,38,27,"_datatype"],[48,38,38,36],[48,42,38,40,"sparseMatrix"],[48,54,38,52],[48,55,38,53,"_data"],[48,60,38,58],[48,65,38,63,"undefined"],[48,74,38,72],[48,77,38,75,"sparseMatrix"],[48,89,38,87],[48,90,38,88,"_datatype"],[48,99,38,97],[48,102,38,100,"sparseMatrix"],[48,114,38,112],[48,115,38,113,"getDataType"],[48,126,38,124],[48,127,38,125],[48,128,38,126],[50,6,40,4],[51,6,41,4],[51,10,41,8,"asize"],[51,15,41,13],[51,16,41,14,"length"],[51,22,41,20],[51,27,41,25,"bsize"],[51,32,41,30],[51,33,41,31,"length"],[51,39,41,37],[51,41,41,39],[52,8,42,6],[52,14,42,12],[52,18,42,16,"DimensionError"],[52,40,42,30],[52,41,42,30,"DimensionError"],[52,55,42,30],[52,56,42,31,"asize"],[52,61,42,36],[52,62,42,37,"length"],[52,68,42,43],[52,70,42,45,"bsize"],[52,75,42,50],[52,76,42,51,"length"],[52,82,42,57],[52,83,42,58],[53,6,43,4],[55,6,45,4],[56,6,46,4],[56,10,46,8,"asize"],[56,15,46,13],[56,16,46,14],[56,17,46,15],[56,18,46,16],[56,23,46,21,"bsize"],[56,28,46,26],[56,29,46,27],[56,30,46,28],[56,31,46,29],[56,35,46,33,"asize"],[56,40,46,38],[56,41,46,39],[56,42,46,40],[56,43,46,41],[56,48,46,46,"bsize"],[56,53,46,51],[56,54,46,52],[56,55,46,53],[56,56,46,54],[56,58,46,56],[57,8,47,6],[57,14,47,12],[57,18,47,16,"RangeError"],[57,28,47,26],[57,29,47,27],[57,61,47,59],[57,64,47,62,"asize"],[57,69,47,67],[57,72,47,70],[57,97,47,95],[57,100,47,98,"bsize"],[57,105,47,103],[57,108,47,106],[57,111,47,109],[57,112,47,110],[58,6,48,4],[60,6,50,4],[61,6,51,4],[61,10,51,8],[61,11,51,9,"bvalues"],[61,18,51,16],[61,20,51,18],[62,8,52,6],[62,14,52,12],[62,18,52,16,"Error"],[62,23,52,21],[62,24,52,22],[62,92,52,90],[62,93,52,91],[63,6,53,4],[65,6,55,4],[66,6,56,4],[66,10,56,8,"rows"],[66,14,56,12],[66,17,56,15,"asize"],[66,22,56,20],[66,23,56,21],[66,24,56,22],[66,25,56,23],[67,6,57,4],[67,10,57,8,"columns"],[67,17,57,15],[67,20,57,18,"asize"],[67,25,57,23],[67,26,57,24],[67,27,57,25],[67,28,57,26],[69,6,59,4],[70,6,60,4],[70,10,60,8,"dt"],[70,12,60,10],[71,6,61,4],[72,6,62,4],[72,10,62,8,"zero"],[72,14,62,12],[72,17,62,15],[72,18,62,16],[73,6,63,4],[74,6,64,4],[74,10,64,8,"cf"],[74,12,64,10],[74,15,64,13,"callback"],[74,23,64,21],[76,6,66,4],[77,6,67,4],[77,10,67,8],[77,17,67,15,"adt"],[77,20,67,18],[77,25,67,23],[77,33,67,31],[77,37,67,35,"adt"],[77,40,67,38],[77,45,67,43,"bdt"],[77,48,67,46],[77,52,67,50,"adt"],[77,55,67,53],[77,60,67,58],[77,67,67,65],[77,69,67,67],[78,8,68,6],[79,8,69,6,"dt"],[79,10,69,8],[79,13,69,11,"adt"],[79,16,69,14],[80,8,70,6],[81,8,71,6,"zero"],[81,12,71,10],[81,15,71,13,"typed"],[81,20,71,18],[81,21,71,19,"convert"],[81,28,71,26],[81,29,71,27],[81,30,71,28],[81,32,71,30,"dt"],[81,34,71,32],[81,35,71,33],[82,8,72,6],[83,8,73,6,"cf"],[83,10,73,8],[83,13,73,11,"typed"],[83,18,73,16],[83,19,73,17,"find"],[83,23,73,21],[83,24,73,22,"callback"],[83,32,73,30],[83,34,73,32],[83,35,73,33,"dt"],[83,37,73,35],[83,39,73,37,"dt"],[83,41,73,39],[83,42,73,40],[83,43,73,41],[84,6,74,4],[86,6,76,4],[87,6,77,4],[87,10,77,8,"cdata"],[87,15,77,13],[87,18,77,16],[87,20,77,18],[89,6,79,4],[90,6,80,4],[90,11,80,9],[90,15,80,13,"z"],[90,16,80,14],[90,19,80,17],[90,20,80,18],[90,22,80,20,"z"],[90,23,80,21],[90,26,80,24,"rows"],[90,30,80,28],[90,32,80,30,"z"],[90,33,80,31],[90,35,80,33],[90,37,80,35],[91,8,81,6],[92,8,82,6,"cdata"],[92,13,82,11],[92,14,82,12,"z"],[92,15,82,13],[92,16,82,14],[92,19,82,17],[92,21,82,19],[93,6,83,4],[95,6,85,4],[96,6,86,4],[96,10,86,8,"x"],[96,11,86,9],[96,14,86,12],[96,16,86,14],[97,6,87,4],[98,6,88,4],[98,10,88,8,"w"],[98,11,88,9],[98,14,88,12],[98,16,88,14],[100,6,90,4],[101,6,91,4],[101,11,91,9],[101,15,91,13,"j"],[101,16,91,14],[101,19,91,17],[101,20,91,18],[101,22,91,20,"j"],[101,23,91,21],[101,26,91,24,"columns"],[101,33,91,31],[101,35,91,33,"j"],[101,36,91,34],[101,38,91,36],[101,40,91,38],[102,8,92,6],[103,8,93,6],[103,12,93,10,"mark"],[103,16,93,14],[103,19,93,17,"j"],[103,20,93,18],[103,23,93,21],[103,24,93,22],[104,8,94,6],[105,8,95,6],[105,13,95,11],[105,17,95,15,"k0"],[105,19,95,17],[105,22,95,20,"bptr"],[105,26,95,24],[105,27,95,25,"j"],[105,28,95,26],[105,29,95,27],[105,31,95,29,"k1"],[105,33,95,31],[105,36,95,34,"bptr"],[105,40,95,38],[105,41,95,39,"j"],[105,42,95,40],[105,45,95,43],[105,46,95,44],[105,47,95,45],[105,49,95,47,"k"],[105,50,95,48],[105,53,95,51,"k0"],[105,55,95,53],[105,57,95,55,"k"],[105,58,95,56],[105,61,95,59,"k1"],[105,63,95,61],[105,65,95,63,"k"],[105,66,95,64],[105,68,95,66],[105,70,95,68],[106,10,96,8],[107,10,97,8],[107,14,97,12,"i"],[107,15,97,13],[107,18,97,16,"bindex"],[107,24,97,22],[107,25,97,23,"k"],[107,26,97,24],[107,27,97,25],[108,10,98,8],[109,10,99,8,"x"],[109,11,99,9],[109,12,99,10,"i"],[109,13,99,11],[109,14,99,12],[109,17,99,15,"inverse"],[109,24,99,22],[109,27,99,25,"cf"],[109,29,99,27],[109,30,99,28,"bvalues"],[109,37,99,35],[109,38,99,36,"k"],[109,39,99,37],[109,40,99,38],[109,42,99,40,"adata"],[109,47,99,45],[109,48,99,46,"i"],[109,49,99,47],[109,50,99,48],[109,51,99,49,"j"],[109,52,99,50],[109,53,99,51],[109,54,99,52],[109,57,99,55,"cf"],[109,59,99,57],[109,60,99,58,"adata"],[109,65,99,63],[109,66,99,64,"i"],[109,67,99,65],[109,68,99,66],[109,69,99,67,"j"],[109,70,99,68],[109,71,99,69],[109,73,99,71,"bvalues"],[109,80,99,78],[109,81,99,79,"k"],[109,82,99,80],[109,83,99,81],[109,84,99,82],[110,10,100,8,"w"],[110,11,100,9],[110,12,100,10,"i"],[110,13,100,11],[110,14,100,12],[110,17,100,15,"mark"],[110,21,100,19],[111,8,101,6],[112,8,102,6],[113,8,103,6],[113,13,103,11],[113,17,103,15,"y"],[113,18,103,16],[113,21,103,19],[113,22,103,20],[113,24,103,22,"y"],[113,25,103,23],[113,28,103,26,"rows"],[113,32,103,30],[113,34,103,32,"y"],[113,35,103,33],[113,37,103,35],[113,39,103,37],[114,10,104,8],[115,10,105,8],[115,14,105,12,"w"],[115,15,105,13],[115,16,105,14,"y"],[115,17,105,15],[115,18,105,16],[115,23,105,21,"mark"],[115,27,105,25],[115,29,105,27],[116,12,106,10],[117,12,107,10,"cdata"],[117,17,107,15],[117,18,107,16,"y"],[117,19,107,17],[117,20,107,18],[117,21,107,19,"j"],[117,22,107,20],[117,23,107,21],[117,26,107,24,"x"],[117,27,107,25],[117,28,107,26,"y"],[117,29,107,27],[117,30,107,28],[118,10,108,8],[118,11,108,9],[118,17,108,15],[119,12,109,10],[120,12,110,10,"cdata"],[120,17,110,15],[120,18,110,16,"y"],[120,19,110,17],[120,20,110,18],[120,21,110,19,"j"],[120,22,110,20],[120,23,110,21],[120,26,110,24,"inverse"],[120,33,110,31],[120,36,110,34,"cf"],[120,38,110,36],[120,39,110,37,"zero"],[120,43,110,41],[120,45,110,43,"adata"],[120,50,110,48],[120,51,110,49,"y"],[120,52,110,50],[120,53,110,51],[120,54,110,52,"j"],[120,55,110,53],[120,56,110,54],[120,57,110,55],[120,60,110,58,"cf"],[120,62,110,60],[120,63,110,61,"adata"],[120,68,110,66],[120,69,110,67,"y"],[120,70,110,68],[120,71,110,69],[120,72,110,70,"j"],[120,73,110,71],[120,74,110,72],[120,76,110,74,"zero"],[120,80,110,78],[120,81,110,79],[121,10,111,8],[122,8,112,6],[123,6,113,4],[125,6,115,4],[126,6,116,4],[126,13,116,11,"denseMatrix"],[126,24,116,22],[126,25,116,23,"createDenseMatrix"],[126,42,116,40],[126,43,116,41],[127,8,117,6,"data"],[127,12,117,10],[127,14,117,12,"cdata"],[127,19,117,17],[128,8,118,6,"size"],[128,12,118,10],[128,14,118,12],[128,15,118,13,"rows"],[128,19,118,17],[128,21,118,19,"columns"],[128,28,118,26],[128,29,118,27],[129,8,119,6,"datatype"],[129,16,119,14],[129,18,119,16,"adt"],[129,21,119,19],[129,26,119,24,"denseMatrix"],[129,37,119,35],[129,38,119,36,"_datatype"],[129,47,119,45],[129,51,119,49,"bdt"],[129,54,119,52],[129,59,119,57,"sparseMatrix"],[129,71,119,69],[129,72,119,70,"_datatype"],[129,81,119,79],[129,84,119,82,"dt"],[129,86,119,84],[129,89,119,87,"undefined"],[130,6,120,4],[130,7,120,5],[130,8,120,6],[131,4,121,2],[131,5,121,3],[132,2,122,0],[132,3,122,1],[132,4,122,2],[133,0,122,3],[133,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo03xDSf"],"mappings":"AAA;4ECI;SCuB;GD6F;CDC"},"hasCjsExports":false},"type":"js/module"}]}