{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo10xSids\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo10xSids;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var name = 'matAlgo10xSids';\n  var dependencies = ['typed', 'DenseMatrix'];\n  var createMatAlgo10xSids = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed,\n      DenseMatrix = _ref.DenseMatrix;\n    /**\n     * Iterates over SparseMatrix S nonzero items and invokes the callback function f(Sij, b).\n     * Callback function invoked NZ times (number of nonzero items in S).\n     *\n     *\n     *          ┌  f(Sij, b)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  b          ; otherwise\n     *\n     *\n     * @param {Matrix}   s                 The SparseMatrix instance (S)\n     * @param {Scalar}   b                 The Scalar value\n     * @param {Function} callback          The f(Aij,b) operation to invoke\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Sij)\n     *\n     * @return {Matrix}                    DenseMatrix (C)\n     *\n     * https://github.com/josdejong/mathjs/pull/346#issuecomment-97626813\n     */\n    return function matAlgo10xSids(s, b, callback, inverse) {\n      // sparse matrix arrays\n      var avalues = s._values;\n      var aindex = s._index;\n      var aptr = s._ptr;\n      var asize = s._size;\n      var adt = s._datatype;\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!avalues) {\n        throw new Error('Cannot perform operation on Pattern Sparse Matrix and Scalar value');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string') {\n        // datatype\n        dt = adt;\n        // convert b to the same datatype\n        b = typed.convert(b, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result arrays\n      var cdata = [];\n\n      // workspaces\n      var x = [];\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // loop columns\n      for (var j = 0; j < columns; j++) {\n        // columns mark\n        var mark = j + 1;\n        // values in j\n        for (var k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          var r = aindex[k];\n          // update workspace\n          x[r] = avalues[k];\n          w[r] = mark;\n        }\n        // loop rows\n        for (var i = 0; i < rows; i++) {\n          // initialize C on first column\n          if (j === 0) {\n            // create row array\n            cdata[i] = [];\n          }\n          // check sparse matrix has a value @ i,j\n          if (w[i] === mark) {\n            // invoke callback, update C\n            cdata[i][j] = inverse ? cf(b, x[i]) : cf(x[i], b);\n          } else {\n            // dense matrix value @ i, j\n            cdata[i][j] = b;\n          }\n        }\n      }\n\n      // return dense matrix\n      return new DenseMatrix({\n        data: cdata,\n        size: [rows, columns],\n        datatype: dt\n      });\n    };\n  });\n});","lineCount":116,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"createMatAlgo10xSids"],[10,33,4,0],[11,4,4,0],[12,2,4,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,4,"name"],[14,10,2,8],[14,13,2,11],[14,29,2,27],[15,2,3,0],[15,6,3,4,"dependencies"],[15,18,3,16],[15,21,3,19],[15,22,3,20],[15,29,3,27],[15,31,3,29],[15,44,3,42],[15,45,3,43],[16,2,4,7],[16,6,4,11,"createMatAlgo10xSids"],[16,26,4,31],[16,29,4,34],[16,44,4,49],[16,48,4,49,"factory"],[16,63,4,56],[16,64,4,56,"factory"],[16,71,4,56],[16,73,4,57,"name"],[16,77,4,61],[16,79,4,63,"dependencies"],[16,91,4,75],[16,93,4,77,"_ref"],[16,97,4,81],[16,101,4,85],[17,4,5,2],[17,8,6,4,"typed"],[17,13,6,9],[17,16,8,6,"_ref"],[17,20,8,10],[17,21,6,4,"typed"],[17,26,6,9],[18,6,7,4,"DenseMatrix"],[18,17,7,15],[18,20,8,6,"_ref"],[18,24,8,10],[18,25,7,4,"DenseMatrix"],[18,36,7,15],[19,4,9,2],[20,0,10,0],[21,0,11,0],[22,0,12,0],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,4,28,2],[38,11,28,9],[38,20,28,18,"matAlgo10xSids"],[38,34,28,32,"matAlgo10xSids"],[38,35,28,33,"s"],[38,36,28,34],[38,38,28,36,"b"],[38,39,28,37],[38,41,28,39,"callback"],[38,49,28,47],[38,51,28,49,"inverse"],[38,58,28,56],[38,60,28,58],[39,6,29,4],[40,6,30,4],[40,10,30,8,"avalues"],[40,17,30,15],[40,20,30,18,"s"],[40,21,30,19],[40,22,30,20,"_values"],[40,29,30,27],[41,6,31,4],[41,10,31,8,"aindex"],[41,16,31,14],[41,19,31,17,"s"],[41,20,31,18],[41,21,31,19,"_index"],[41,27,31,25],[42,6,32,4],[42,10,32,8,"aptr"],[42,14,32,12],[42,17,32,15,"s"],[42,18,32,16],[42,19,32,17,"_ptr"],[42,23,32,21],[43,6,33,4],[43,10,33,8,"asize"],[43,15,33,13],[43,18,33,16,"s"],[43,19,33,17],[43,20,33,18,"_size"],[43,25,33,23],[44,6,34,4],[44,10,34,8,"adt"],[44,13,34,11],[44,16,34,14,"s"],[44,17,34,15],[44,18,34,16,"_datatype"],[44,27,34,25],[46,6,36,4],[47,6,37,4],[47,10,37,8],[47,11,37,9,"avalues"],[47,18,37,16],[47,20,37,18],[48,8,38,6],[48,14,38,12],[48,18,38,16,"Error"],[48,23,38,21],[48,24,38,22],[48,92,38,90],[48,93,38,91],[49,6,39,4],[51,6,41,4],[52,6,42,4],[52,10,42,8,"rows"],[52,14,42,12],[52,17,42,15,"asize"],[52,22,42,20],[52,23,42,21],[52,24,42,22],[52,25,42,23],[53,6,43,4],[53,10,43,8,"columns"],[53,17,43,15],[53,20,43,18,"asize"],[53,25,43,23],[53,26,43,24],[53,27,43,25],[53,28,43,26],[55,6,45,4],[56,6,46,4],[56,10,46,8,"dt"],[56,12,46,10],[57,6,47,4],[58,6,48,4],[58,10,48,8,"cf"],[58,12,48,10],[58,15,48,13,"callback"],[58,23,48,21],[60,6,50,4],[61,6,51,4],[61,10,51,8],[61,17,51,15,"adt"],[61,20,51,18],[61,25,51,23],[61,33,51,31],[61,35,51,33],[62,8,52,6],[63,8,53,6,"dt"],[63,10,53,8],[63,13,53,11,"adt"],[63,16,53,14],[64,8,54,6],[65,8,55,6,"b"],[65,9,55,7],[65,12,55,10,"typed"],[65,17,55,15],[65,18,55,16,"convert"],[65,25,55,23],[65,26,55,24,"b"],[65,27,55,25],[65,29,55,27,"dt"],[65,31,55,29],[65,32,55,30],[66,8,56,6],[67,8,57,6,"cf"],[67,10,57,8],[67,13,57,11,"typed"],[67,18,57,16],[67,19,57,17,"find"],[67,23,57,21],[67,24,57,22,"callback"],[67,32,57,30],[67,34,57,32],[67,35,57,33,"dt"],[67,37,57,35],[67,39,57,37,"dt"],[67,41,57,39],[67,42,57,40],[67,43,57,41],[68,6,58,4],[70,6,60,4],[71,6,61,4],[71,10,61,8,"cdata"],[71,15,61,13],[71,18,61,16],[71,20,61,18],[73,6,63,4],[74,6,64,4],[74,10,64,8,"x"],[74,11,64,9],[74,14,64,12],[74,16,64,14],[75,6,65,4],[76,6,66,4],[76,10,66,8,"w"],[76,11,66,9],[76,14,66,12],[76,16,66,14],[78,6,68,4],[79,6,69,4],[79,11,69,9],[79,15,69,13,"j"],[79,16,69,14],[79,19,69,17],[79,20,69,18],[79,22,69,20,"j"],[79,23,69,21],[79,26,69,24,"columns"],[79,33,69,31],[79,35,69,33,"j"],[79,36,69,34],[79,38,69,36],[79,40,69,38],[80,8,70,6],[81,8,71,6],[81,12,71,10,"mark"],[81,16,71,14],[81,19,71,17,"j"],[81,20,71,18],[81,23,71,21],[81,24,71,22],[82,8,72,6],[83,8,73,6],[83,13,73,11],[83,17,73,15,"k0"],[83,19,73,17],[83,22,73,20,"aptr"],[83,26,73,24],[83,27,73,25,"j"],[83,28,73,26],[83,29,73,27],[83,31,73,29,"k1"],[83,33,73,31],[83,36,73,34,"aptr"],[83,40,73,38],[83,41,73,39,"j"],[83,42,73,40],[83,45,73,43],[83,46,73,44],[83,47,73,45],[83,49,73,47,"k"],[83,50,73,48],[83,53,73,51,"k0"],[83,55,73,53],[83,57,73,55,"k"],[83,58,73,56],[83,61,73,59,"k1"],[83,63,73,61],[83,65,73,63,"k"],[83,66,73,64],[83,68,73,66],[83,70,73,68],[84,10,74,8],[85,10,75,8],[85,14,75,12,"r"],[85,15,75,13],[85,18,75,16,"aindex"],[85,24,75,22],[85,25,75,23,"k"],[85,26,75,24],[85,27,75,25],[86,10,76,8],[87,10,77,8,"x"],[87,11,77,9],[87,12,77,10,"r"],[87,13,77,11],[87,14,77,12],[87,17,77,15,"avalues"],[87,24,77,22],[87,25,77,23,"k"],[87,26,77,24],[87,27,77,25],[88,10,78,8,"w"],[88,11,78,9],[88,12,78,10,"r"],[88,13,78,11],[88,14,78,12],[88,17,78,15,"mark"],[88,21,78,19],[89,8,79,6],[90,8,80,6],[91,8,81,6],[91,13,81,11],[91,17,81,15,"i"],[91,18,81,16],[91,21,81,19],[91,22,81,20],[91,24,81,22,"i"],[91,25,81,23],[91,28,81,26,"rows"],[91,32,81,30],[91,34,81,32,"i"],[91,35,81,33],[91,37,81,35],[91,39,81,37],[92,10,82,8],[93,10,83,8],[93,14,83,12,"j"],[93,15,83,13],[93,20,83,18],[93,21,83,19],[93,23,83,21],[94,12,84,10],[95,12,85,10,"cdata"],[95,17,85,15],[95,18,85,16,"i"],[95,19,85,17],[95,20,85,18],[95,23,85,21],[95,25,85,23],[96,10,86,8],[97,10,87,8],[98,10,88,8],[98,14,88,12,"w"],[98,15,88,13],[98,16,88,14,"i"],[98,17,88,15],[98,18,88,16],[98,23,88,21,"mark"],[98,27,88,25],[98,29,88,27],[99,12,89,10],[100,12,90,10,"cdata"],[100,17,90,15],[100,18,90,16,"i"],[100,19,90,17],[100,20,90,18],[100,21,90,19,"j"],[100,22,90,20],[100,23,90,21],[100,26,90,24,"inverse"],[100,33,90,31],[100,36,90,34,"cf"],[100,38,90,36],[100,39,90,37,"b"],[100,40,90,38],[100,42,90,40,"x"],[100,43,90,41],[100,44,90,42,"i"],[100,45,90,43],[100,46,90,44],[100,47,90,45],[100,50,90,48,"cf"],[100,52,90,50],[100,53,90,51,"x"],[100,54,90,52],[100,55,90,53,"i"],[100,56,90,54],[100,57,90,55],[100,59,90,57,"b"],[100,60,90,58],[100,61,90,59],[101,10,91,8],[101,11,91,9],[101,17,91,15],[102,12,92,10],[103,12,93,10,"cdata"],[103,17,93,15],[103,18,93,16,"i"],[103,19,93,17],[103,20,93,18],[103,21,93,19,"j"],[103,22,93,20],[103,23,93,21],[103,26,93,24,"b"],[103,27,93,25],[104,10,94,8],[105,8,95,6],[106,6,96,4],[108,6,98,4],[109,6,99,4],[109,13,99,11],[109,17,99,15,"DenseMatrix"],[109,28,99,26],[109,29,99,27],[110,8,100,6,"data"],[110,12,100,10],[110,14,100,12,"cdata"],[110,19,100,17],[111,8,101,6,"size"],[111,12,101,10],[111,14,101,12],[111,15,101,13,"rows"],[111,19,101,17],[111,21,101,19,"columns"],[111,28,101,26],[111,29,101,27],[112,8,102,6,"datatype"],[112,16,102,14],[112,18,102,16,"dt"],[113,6,103,4],[113,7,103,5],[113,8,103,6],[114,4,104,2],[114,5,104,3],[115,2,105,0],[115,3,105,1],[115,4,105,2],[116,0,105,3],[116,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo10xSids"],"mappings":"AAA;6ECG;SCwB;GD4E;CDC"},"hasCjsExports":false},"type":"js/module"}]}