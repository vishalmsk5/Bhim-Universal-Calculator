{"dependencies":[{"name":"../../utils/is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"DL0lZsaza5vr7zl/bAzDYPBSOyA=","exportNames":["*"],"imports":1}},{"name":"../../utils/number.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":46},"end":{"line":2,"column":50,"index":96}}],"key":"0sWcInmWGTRVMc5qHFyD6Xk9iLc=","exportNames":["*"],"imports":1}},{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":97},"end":{"line":3,"column":49,"index":146}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createPartitionSelect\", {\n    enumerable: true,\n    get: function () {\n      return createPartitionSelect;\n    }\n  });\n  var _utilsIsJs = require(_dependencyMap[0], \"../../utils/is.js\");\n  var _utilsNumberJs = require(_dependencyMap[1], \"../../utils/number.js\");\n  var _utilsFactoryJs = require(_dependencyMap[2], \"../../utils/factory.js\");\n  var name = 'partitionSelect';\n  var dependencies = ['typed', 'isNumeric', 'isNaN', 'compare'];\n  var createPartitionSelect = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      isNumeric,\n      isNaN: mathIsNaN,\n      compare\n    } = _ref;\n    var asc = compare;\n    var desc = (a, b) => -compare(a, b);\n\n    /**\n     * Partition-based selection of an array or 1D matrix.\n     * Will find the kth smallest value, and mutates the input array.\n     * Uses Quickselect.\n     *\n     * Syntax:\n     *\n     *    math.partitionSelect(x, k)\n     *    math.partitionSelect(x, k, compare)\n     *\n     * Examples:\n     *\n     *    math.partitionSelect([5, 10, 1], 2)                               // returns 10\n     *    math.partitionSelect(['C', 'B', 'A', 'D'], 1, math.compareText)   // returns 'B'\n     *\n     *    function sortByLength (a, b) {\n     *      return a.length - b.length\n     *    }\n     *    math.partitionSelect(['Langdon', 'Tom', 'Sara'], 2, sortByLength) // returns 'Langdon'\n     *\n     *    // the input array is mutated\n     *    arr = [5, 2, 1]\n     *    math.partitionSelect(arr, 0) // returns 1, arr is now: [1, 2, 5]\n     *    math.partitionSelect(arr, 1, 'desc') // returns 2, arr is now: [5, 2, 1]\n     *\n     * See also:\n     *\n     *    sort\n     *\n     * @param {Matrix | Array} x    A one dimensional matrix or array to sort\n     * @param {Number} k            The kth smallest value to be retrieved zero-based index\n     * @param {Function | 'asc' | 'desc'} [compare='asc']\n     *        An optional comparator function. The function is called as\n     *        `compare(a, b)`, and must return 1 when a > b, -1 when a < b,\n     *        and 0 when a == b.\n     * @return {*} Returns the kth lowest value.\n     */\n    return typed(name, {\n      'Array | Matrix, number': function Array__Matrix_number(x, k) {\n        return _partitionSelect(x, k, asc);\n      },\n      'Array | Matrix, number, string': function Array__Matrix_number_string(x, k, compare) {\n        if (compare === 'asc') {\n          return _partitionSelect(x, k, asc);\n        } else if (compare === 'desc') {\n          return _partitionSelect(x, k, desc);\n        } else {\n          throw new Error('Compare string must be \"asc\" or \"desc\"');\n        }\n      },\n      'Array | Matrix, number, function': _partitionSelect\n    });\n    function _partitionSelect(x, k, compare) {\n      if (!(0, _utilsNumberJs.isInteger)(k) || k < 0) {\n        throw new Error('k must be a non-negative integer');\n      }\n      if ((0, _utilsIsJs.isMatrix)(x)) {\n        var size = x.size();\n        if (size.length > 1) {\n          throw new Error('Only one dimensional matrices supported');\n        }\n        return quickSelect(x.valueOf(), k, compare);\n      }\n      if (Array.isArray(x)) {\n        return quickSelect(x, k, compare);\n      }\n    }\n\n    /**\n     * Quickselect algorithm.\n     * Code adapted from:\n     * https://blog.teamleadnet.com/2012/07/quick-select-algorithm-find-kth-element.html\n     *\n     * @param {Array} arr\n     * @param {Number} k\n     * @param {Function} compare\n     * @private\n     */\n    function quickSelect(arr, k, compare) {\n      if (k >= arr.length) {\n        throw new Error('k out of bounds');\n      }\n\n      // check for NaN values since these can cause an infinite while loop\n      for (var i = 0; i < arr.length; i++) {\n        if (isNumeric(arr[i]) && mathIsNaN(arr[i])) {\n          return arr[i]; // return NaN\n        }\n      }\n      var from = 0;\n      var to = arr.length - 1;\n\n      // if from == to we reached the kth element\n      while (from < to) {\n        var r = from;\n        var w = to;\n        var pivot = arr[Math.floor(Math.random() * (to - from + 1)) + from];\n\n        // stop if the reader and writer meets\n        while (r < w) {\n          // arr[r] >= pivot\n          if (compare(arr[r], pivot) >= 0) {\n            // put the large values at the end\n            var tmp = arr[w];\n            arr[w] = arr[r];\n            arr[r] = tmp;\n            --w;\n          } else {\n            // the value is smaller than the pivot, skip\n            ++r;\n          }\n        }\n\n        // if we stepped up (r++) we need to step one down (arr[r] > pivot)\n        if (compare(arr[r], pivot) > 0) {\n          --r;\n        }\n\n        // the r pointer is on the end of the first k elements\n        if (k <= r) {\n          to = r;\n        } else {\n          from = r + 1;\n        }\n      }\n      return arr[k];\n    }\n  });\n});","lineCount":156,"map":[[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"createPartitionSelect"],[10,34,6,0],[11,4,6,0],[12,2,6,0],[13,2,1,0],[13,6,1,0,"_utilsIsJs"],[13,16,1,0],[13,19,1,0,"require"],[13,26,1,0],[13,27,1,0,"_dependencyMap"],[13,41,1,0],[14,2,2,0],[14,6,2,0,"_utilsNumberJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_utilsFactoryJs"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,4,0],[16,6,4,4,"name"],[16,10,4,8],[16,13,4,11],[16,30,4,28],[17,2,5,0],[17,6,5,4,"dependencies"],[17,18,5,16],[17,21,5,19],[17,22,5,20],[17,29,5,27],[17,31,5,29],[17,42,5,40],[17,44,5,42],[17,51,5,49],[17,53,5,51],[17,62,5,60],[17,63,5,61],[18,2,6,7],[18,6,6,11,"createPartitionSelect"],[18,27,6,32],[18,30,6,35],[18,45,6,50],[18,49,6,50,"factory"],[18,64,6,57],[18,65,6,57,"factory"],[18,72,6,57],[18,74,6,58,"name"],[18,78,6,62],[18,80,6,64,"dependencies"],[18,92,6,76],[18,94,6,78,"_ref"],[18,98,6,82],[18,102,6,86],[19,4,7,2],[19,8,7,6],[20,6,8,4,"typed"],[20,11,8,9],[21,6,9,4,"isNumeric"],[21,15,9,13],[22,6,10,4,"isNaN"],[22,11,10,9],[22,13,10,11,"mathIsNaN"],[22,22,10,20],[23,6,11,4,"compare"],[24,4,12,2],[24,5,12,3],[24,8,12,6,"_ref"],[24,12,12,10],[25,4,13,2],[25,8,13,6,"asc"],[25,11,13,9],[25,14,13,12,"compare"],[25,21,13,19],[26,4,14,2],[26,8,14,6,"desc"],[26,12,14,10],[26,15,14,13,"desc"],[26,16,14,14,"a"],[26,17,14,15],[26,19,14,17,"b"],[26,20,14,18],[26,25,14,23],[26,26,14,24,"compare"],[26,33,14,31],[26,34,14,32,"a"],[26,35,14,33],[26,37,14,35,"b"],[26,38,14,36],[26,39,14,37],[28,4,16,2],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[49,0,37,0],[50,0,38,0],[51,0,39,0],[52,0,40,0],[53,0,41,0],[54,0,42,0],[55,0,43,0],[56,0,44,0],[57,0,45,0],[58,0,46,0],[59,0,47,0],[60,0,48,0],[61,0,49,0],[62,0,50,0],[63,0,51,0],[64,0,52,0],[65,4,53,2],[65,11,53,9,"typed"],[65,16,53,14],[65,17,53,15,"name"],[65,21,53,19],[65,23,53,21],[66,6,54,4],[66,30,54,28],[66,32,54,30],[66,41,54,39,"Array__Matrix_number"],[66,61,54,59,"Array__Matrix_number"],[66,62,54,60,"x"],[66,63,54,61],[66,65,54,63,"k"],[66,66,54,64],[66,68,54,66],[67,8,55,6],[67,15,55,13,"_partitionSelect"],[67,31,55,29],[67,32,55,30,"x"],[67,33,55,31],[67,35,55,33,"k"],[67,36,55,34],[67,38,55,36,"asc"],[67,41,55,39],[67,42,55,40],[68,6,56,4],[68,7,56,5],[69,6,57,4],[69,38,57,36],[69,40,57,38],[69,49,57,47,"Array__Matrix_number_string"],[69,76,57,74,"Array__Matrix_number_string"],[69,77,57,75,"x"],[69,78,57,76],[69,80,57,78,"k"],[69,81,57,79],[69,83,57,81,"compare"],[69,90,57,88],[69,92,57,90],[70,8,58,6],[70,12,58,10,"compare"],[70,19,58,17],[70,24,58,22],[70,29,58,27],[70,31,58,29],[71,10,59,8],[71,17,59,15,"_partitionSelect"],[71,33,59,31],[71,34,59,32,"x"],[71,35,59,33],[71,37,59,35,"k"],[71,38,59,36],[71,40,59,38,"asc"],[71,43,59,41],[71,44,59,42],[72,8,60,6],[72,9,60,7],[72,15,60,13],[72,19,60,17,"compare"],[72,26,60,24],[72,31,60,29],[72,37,60,35],[72,39,60,37],[73,10,61,8],[73,17,61,15,"_partitionSelect"],[73,33,61,31],[73,34,61,32,"x"],[73,35,61,33],[73,37,61,35,"k"],[73,38,61,36],[73,40,61,38,"desc"],[73,44,61,42],[73,45,61,43],[74,8,62,6],[74,9,62,7],[74,15,62,13],[75,10,63,8],[75,16,63,14],[75,20,63,18,"Error"],[75,25,63,23],[75,26,63,24],[75,66,63,64],[75,67,63,65],[76,8,64,6],[77,6,65,4],[77,7,65,5],[78,6,66,4],[78,40,66,38],[78,42,66,40,"_partitionSelect"],[79,4,67,2],[79,5,67,3],[79,6,67,4],[80,4,68,2],[80,13,68,11,"_partitionSelect"],[80,29,68,27,"_partitionSelect"],[80,30,68,28,"x"],[80,31,68,29],[80,33,68,31,"k"],[80,34,68,32],[80,36,68,34,"compare"],[80,43,68,41],[80,45,68,43],[81,6,69,4],[81,10,69,8],[81,11,69,9],[81,15,69,9,"isInteger"],[81,29,69,18],[81,30,69,18,"isInteger"],[81,39,69,18],[81,41,69,19,"k"],[81,42,69,20],[81,43,69,21],[81,47,69,25,"k"],[81,48,69,26],[81,51,69,29],[81,52,69,30],[81,54,69,32],[82,8,70,6],[82,14,70,12],[82,18,70,16,"Error"],[82,23,70,21],[82,24,70,22],[82,58,70,56],[82,59,70,57],[83,6,71,4],[84,6,72,4],[84,10,72,8],[84,14,72,8,"isMatrix"],[84,24,72,16],[84,25,72,16,"isMatrix"],[84,33,72,16],[84,35,72,17,"x"],[84,36,72,18],[84,37,72,19],[84,39,72,21],[85,8,73,6],[85,12,73,10,"size"],[85,16,73,14],[85,19,73,17,"x"],[85,20,73,18],[85,21,73,19,"size"],[85,25,73,23],[85,26,73,24],[85,27,73,25],[86,8,74,6],[86,12,74,10,"size"],[86,16,74,14],[86,17,74,15,"length"],[86,23,74,21],[86,26,74,24],[86,27,74,25],[86,29,74,27],[87,10,75,8],[87,16,75,14],[87,20,75,18,"Error"],[87,25,75,23],[87,26,75,24],[87,67,75,65],[87,68,75,66],[88,8,76,6],[89,8,77,6],[89,15,77,13,"quickSelect"],[89,26,77,24],[89,27,77,25,"x"],[89,28,77,26],[89,29,77,27,"valueOf"],[89,36,77,34],[89,37,77,35],[89,38,77,36],[89,40,77,38,"k"],[89,41,77,39],[89,43,77,41,"compare"],[89,50,77,48],[89,51,77,49],[90,6,78,4],[91,6,79,4],[91,10,79,8,"Array"],[91,15,79,13],[91,16,79,14,"isArray"],[91,23,79,21],[91,24,79,22,"x"],[91,25,79,23],[91,26,79,24],[91,28,79,26],[92,8,80,6],[92,15,80,13,"quickSelect"],[92,26,80,24],[92,27,80,25,"x"],[92,28,80,26],[92,30,80,28,"k"],[92,31,80,29],[92,33,80,31,"compare"],[92,40,80,38],[92,41,80,39],[93,6,81,4],[94,4,82,2],[96,4,84,2],[97,0,85,0],[98,0,86,0],[99,0,87,0],[100,0,88,0],[101,0,89,0],[102,0,90,0],[103,0,91,0],[104,0,92,0],[105,0,93,0],[106,4,94,2],[106,13,94,11,"quickSelect"],[106,24,94,22,"quickSelect"],[106,25,94,23,"arr"],[106,28,94,26],[106,30,94,28,"k"],[106,31,94,29],[106,33,94,31,"compare"],[106,40,94,38],[106,42,94,40],[107,6,95,4],[107,10,95,8,"k"],[107,11,95,9],[107,15,95,13,"arr"],[107,18,95,16],[107,19,95,17,"length"],[107,25,95,23],[107,27,95,25],[108,8,96,6],[108,14,96,12],[108,18,96,16,"Error"],[108,23,96,21],[108,24,96,22],[108,41,96,39],[108,42,96,40],[109,6,97,4],[111,6,99,4],[112,6,100,4],[112,11,100,9],[112,15,100,13,"i"],[112,16,100,14],[112,19,100,17],[112,20,100,18],[112,22,100,20,"i"],[112,23,100,21],[112,26,100,24,"arr"],[112,29,100,27],[112,30,100,28,"length"],[112,36,100,34],[112,38,100,36,"i"],[112,39,100,37],[112,41,100,39],[112,43,100,41],[113,8,101,6],[113,12,101,10,"isNumeric"],[113,21,101,19],[113,22,101,20,"arr"],[113,25,101,23],[113,26,101,24,"i"],[113,27,101,25],[113,28,101,26],[113,29,101,27],[113,33,101,31,"mathIsNaN"],[113,42,101,40],[113,43,101,41,"arr"],[113,46,101,44],[113,47,101,45,"i"],[113,48,101,46],[113,49,101,47],[113,50,101,48],[113,52,101,50],[114,10,102,8],[114,17,102,15,"arr"],[114,20,102,18],[114,21,102,19,"i"],[114,22,102,20],[114,23,102,21],[114,24,102,22],[114,25,102,23],[115,8,103,6],[116,6,104,4],[117,6,105,4],[117,10,105,8,"from"],[117,14,105,12],[117,17,105,15],[117,18,105,16],[118,6,106,4],[118,10,106,8,"to"],[118,12,106,10],[118,15,106,13,"arr"],[118,18,106,16],[118,19,106,17,"length"],[118,25,106,23],[118,28,106,26],[118,29,106,27],[120,6,108,4],[121,6,109,4],[121,13,109,11,"from"],[121,17,109,15],[121,20,109,18,"to"],[121,22,109,20],[121,24,109,22],[122,8,110,6],[122,12,110,10,"r"],[122,13,110,11],[122,16,110,14,"from"],[122,20,110,18],[123,8,111,6],[123,12,111,10,"w"],[123,13,111,11],[123,16,111,14,"to"],[123,18,111,16],[124,8,112,6],[124,12,112,10,"pivot"],[124,17,112,15],[124,20,112,18,"arr"],[124,23,112,21],[124,24,112,22,"Math"],[124,28,112,26],[124,29,112,27,"floor"],[124,34,112,32],[124,35,112,33,"Math"],[124,39,112,37],[124,40,112,38,"random"],[124,46,112,44],[124,47,112,45],[124,48,112,46],[124,52,112,50,"to"],[124,54,112,52],[124,57,112,55,"from"],[124,61,112,59],[124,64,112,62],[124,65,112,63],[124,66,112,64],[124,67,112,65],[124,70,112,68,"from"],[124,74,112,72],[124,75,112,73],[126,8,114,6],[127,8,115,6],[127,15,115,13,"r"],[127,16,115,14],[127,19,115,17,"w"],[127,20,115,18],[127,22,115,20],[128,10,116,8],[129,10,117,8],[129,14,117,12,"compare"],[129,21,117,19],[129,22,117,20,"arr"],[129,25,117,23],[129,26,117,24,"r"],[129,27,117,25],[129,28,117,26],[129,30,117,28,"pivot"],[129,35,117,33],[129,36,117,34],[129,40,117,38],[129,41,117,39],[129,43,117,41],[130,12,118,10],[131,12,119,10],[131,16,119,14,"tmp"],[131,19,119,17],[131,22,119,20,"arr"],[131,25,119,23],[131,26,119,24,"w"],[131,27,119,25],[131,28,119,26],[132,12,120,10,"arr"],[132,15,120,13],[132,16,120,14,"w"],[132,17,120,15],[132,18,120,16],[132,21,120,19,"arr"],[132,24,120,22],[132,25,120,23,"r"],[132,26,120,24],[132,27,120,25],[133,12,121,10,"arr"],[133,15,121,13],[133,16,121,14,"r"],[133,17,121,15],[133,18,121,16],[133,21,121,19,"tmp"],[133,24,121,22],[134,12,122,10],[134,14,122,12,"w"],[134,15,122,13],[135,10,123,8],[135,11,123,9],[135,17,123,15],[136,12,124,10],[137,12,125,10],[137,14,125,12,"r"],[137,15,125,13],[138,10,126,8],[139,8,127,6],[141,8,129,6],[142,8,130,6],[142,12,130,10,"compare"],[142,19,130,17],[142,20,130,18,"arr"],[142,23,130,21],[142,24,130,22,"r"],[142,25,130,23],[142,26,130,24],[142,28,130,26,"pivot"],[142,33,130,31],[142,34,130,32],[142,37,130,35],[142,38,130,36],[142,40,130,38],[143,10,131,8],[143,12,131,10,"r"],[143,13,131,11],[144,8,132,6],[146,8,134,6],[147,8,135,6],[147,12,135,10,"k"],[147,13,135,11],[147,17,135,15,"r"],[147,18,135,16],[147,20,135,18],[148,10,136,8,"to"],[148,12,136,10],[148,15,136,13,"r"],[148,16,136,14],[149,8,137,6],[149,9,137,7],[149,15,137,13],[150,10,138,8,"from"],[150,14,138,12],[150,17,138,15,"r"],[150,18,138,16],[150,21,138,19],[150,22,138,20],[151,8,139,6],[152,6,140,4],[153,6,141,4],[153,13,141,11,"arr"],[153,16,141,14],[153,17,141,15,"k"],[153,18,141,16],[153,19,141,17],[154,4,142,2],[155,2,143,0],[155,3,143,1],[155,4,143,2],[156,0,143,3],[156,3]],"functionMap":{"names":["<global>","factory$argument_2","desc","Array__Matrix_number","Array__Matrix_number_string","_partitionSelect","quickSelect"],"mappings":"AAA;8ECK;aCQ,wBD;8BEwC;KFE;sCGC;KHQ;EIG;GJc;EKY;GLgD;CDC"},"hasCjsExports":false},"type":"js/module"}]}