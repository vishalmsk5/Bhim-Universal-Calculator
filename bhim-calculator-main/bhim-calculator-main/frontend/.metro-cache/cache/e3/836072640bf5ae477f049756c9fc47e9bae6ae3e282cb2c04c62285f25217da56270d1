{"dependencies":[{"name":"../../utils/map.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"+oNptzAOU7QDEYn1hYzZ8uchKBw=","exportNames":["*"],"imports":1}},{"name":"../../utils/is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":108,"index":156}}],"key":"DL0lZsaza5vr7zl/bAzDYPBSOyA=","exportNames":["*"],"imports":1}},{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":157},"end":{"line":3,"column":49,"index":206}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createResolve\", {\n    enumerable: true,\n    get: function () {\n      return createResolve;\n    }\n  });\n  var _utilsMapJs = require(_dependencyMap[0], \"../../utils/map.js\");\n  var _utilsIsJs = require(_dependencyMap[1], \"../../utils/is.js\");\n  var _utilsFactoryJs = require(_dependencyMap[2], \"../../utils/factory.js\");\n  var name = 'resolve';\n  var dependencies = ['typed', 'parse', 'ConstantNode', 'FunctionNode', 'OperatorNode', 'ParenthesisNode'];\n  var createResolve = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      parse,\n      ConstantNode,\n      FunctionNode,\n      OperatorNode,\n      ParenthesisNode\n    } = _ref;\n    /**\n     * resolve(expr, scope) replaces variable nodes with their scoped values\n     *\n     * Syntax:\n     *\n     *     math.resolve(expr, scope)\n     *\n     * Examples:\n     *\n     *     math.resolve('x + y', {x:1, y:2})           // Node '1 + 2'\n     *     math.resolve(math.parse('x+y'), {x:1, y:2}) // Node '1 + 2'\n     *     math.simplify('x+y', {x:2, y: math.parse('x+x')}).toString() // \"6\"\n     *\n     * See also:\n     *\n     *     simplify, evaluate\n     *\n     * @param {Node | Node[]} node\n     *     The expression tree (or trees) to be simplified\n     * @param {Object} scope\n     *     Scope specifying variables to be resolved\n     * @return {Node | Node[]} Returns `node` with variables recursively substituted.\n     * @throws {ReferenceError}\n     *     If there is a cyclic dependency among the variables in `scope`,\n     *     resolution is impossible and a ReferenceError is thrown.\n     */\n    function _resolve(node, scope) {\n      var within = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Set();\n      // note `within`:\n      // `within` is not documented, since it is for internal cycle\n      // detection only\n      if (!scope) {\n        return node;\n      }\n      if ((0, _utilsIsJs.isSymbolNode)(node)) {\n        if (within.has(node.name)) {\n          var variables = Array.from(within).join(', ');\n          throw new ReferenceError(\"recursive loop of variable definitions among {\".concat(variables, \"}\"));\n        }\n        var value = scope.get(node.name);\n        if ((0, _utilsIsJs.isNode)(value)) {\n          var nextWithin = new Set(within);\n          nextWithin.add(node.name);\n          return _resolve(value, scope, nextWithin);\n        } else if (typeof value === 'number') {\n          return parse(String(value));\n        } else if (value !== undefined) {\n          return new ConstantNode(value);\n        } else {\n          return node;\n        }\n      } else if ((0, _utilsIsJs.isOperatorNode)(node)) {\n        var args = node.args.map(function (arg) {\n          return _resolve(arg, scope, within);\n        });\n        return new OperatorNode(node.op, node.fn, args, node.implicit);\n      } else if ((0, _utilsIsJs.isParenthesisNode)(node)) {\n        return new ParenthesisNode(_resolve(node.content, scope, within));\n      } else if ((0, _utilsIsJs.isFunctionNode)(node)) {\n        var _args = node.args.map(function (arg) {\n          return _resolve(arg, scope, within);\n        });\n        return new FunctionNode(node.name, _args);\n      }\n\n      // Otherwise just recursively resolve any children (might also work\n      // for some of the above special cases)\n      return node.map(child => _resolve(child, scope, within));\n    }\n    return typed('resolve', {\n      Node: _resolve,\n      'Node, Map | null | undefined': _resolve,\n      'Node, Object': (n, scope) => _resolve(n, (0, _utilsMapJs.createMap)(scope)),\n      // For arrays and matrices, we map `self` rather than `_resolve`\n      // because resolve is fairly expensive anyway, and this way\n      // we get nice error messages if one entry in the array has wrong type.\n      'Array | Matrix': typed.referToSelf(self => A => A.map(n => self(n))),\n      'Array | Matrix, null | undefined': typed.referToSelf(self => A => A.map(n => self(n))),\n      'Array, Object': typed.referTo('Array,Map', selfAM => (A, scope) => selfAM(A, (0, _utilsMapJs.createMap)(scope))),\n      'Matrix, Object': typed.referTo('Matrix,Map', selfMM => (A, scope) => selfMM(A, (0, _utilsMapJs.createMap)(scope))),\n      'Array | Matrix, Map': typed.referToSelf(self => (A, scope) => A.map(n => self(n, scope)))\n    });\n  });\n});","lineCount":110,"map":[[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"createResolve"],[10,26,6,0],[11,4,6,0],[12,2,6,0],[13,2,1,0],[13,6,1,0,"_utilsMapJs"],[13,17,1,0],[13,20,1,0,"require"],[13,27,1,0],[13,28,1,0,"_dependencyMap"],[13,42,1,0],[14,2,2,0],[14,6,2,0,"_utilsIsJs"],[14,16,2,0],[14,19,2,0,"require"],[14,26,2,0],[14,27,2,0,"_dependencyMap"],[14,41,2,0],[15,2,3,0],[15,6,3,0,"_utilsFactoryJs"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,4,0],[16,6,4,4,"name"],[16,10,4,8],[16,13,4,11],[16,22,4,20],[17,2,5,0],[17,6,5,4,"dependencies"],[17,18,5,16],[17,21,5,19],[17,22,5,20],[17,29,5,27],[17,31,5,29],[17,38,5,36],[17,40,5,38],[17,54,5,52],[17,56,5,54],[17,70,5,68],[17,72,5,70],[17,86,5,84],[17,88,5,86],[17,105,5,103],[17,106,5,104],[18,2,6,7],[18,6,6,11,"createResolve"],[18,19,6,24],[18,22,6,27],[18,37,6,42],[18,41,6,42,"factory"],[18,56,6,49],[18,57,6,49,"factory"],[18,64,6,49],[18,66,6,50,"name"],[18,70,6,54],[18,72,6,56,"dependencies"],[18,84,6,68],[18,86,6,70,"_ref"],[18,90,6,74],[18,94,6,78],[19,4,7,2],[19,8,7,6],[20,6,8,4,"typed"],[20,11,8,9],[21,6,9,4,"parse"],[21,11,9,9],[22,6,10,4,"ConstantNode"],[22,18,10,16],[23,6,11,4,"FunctionNode"],[23,18,11,16],[24,6,12,4,"OperatorNode"],[24,18,12,16],[25,6,13,4,"ParenthesisNode"],[26,4,14,2],[26,5,14,3],[26,8,14,6,"_ref"],[26,12,14,10],[27,4,15,2],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[49,0,37,0],[50,0,38,0],[51,0,39,0],[52,0,40,0],[53,4,41,2],[53,13,41,11,"_resolve"],[53,21,41,19,"_resolve"],[53,22,41,20,"node"],[53,26,41,24],[53,28,41,26,"scope"],[53,33,41,31],[53,35,41,33],[54,6,42,4],[54,10,42,8,"within"],[54,16,42,14],[54,19,42,17,"arguments"],[54,28,42,26],[54,29,42,27,"length"],[54,35,42,33],[54,38,42,36],[54,39,42,37],[54,43,42,41,"arguments"],[54,52,42,50],[54,53,42,51],[54,54,42,52],[54,55,42,53],[54,60,42,58,"undefined"],[54,69,42,67],[54,72,42,70,"arguments"],[54,81,42,79],[54,82,42,80],[54,83,42,81],[54,84,42,82],[54,87,42,85],[54,91,42,89,"Set"],[54,94,42,92],[54,95,42,93],[54,96,42,94],[55,6,43,4],[56,6,44,4],[57,6,45,4],[58,6,46,4],[58,10,46,8],[58,11,46,9,"scope"],[58,16,46,14],[58,18,46,16],[59,8,47,6],[59,15,47,13,"node"],[59,19,47,17],[60,6,48,4],[61,6,49,4],[61,10,49,8],[61,14,49,8,"isSymbolNode"],[61,24,49,20],[61,25,49,20,"isSymbolNode"],[61,37,49,20],[61,39,49,21,"node"],[61,43,49,25],[61,44,49,26],[61,46,49,28],[62,8,50,6],[62,12,50,10,"within"],[62,18,50,16],[62,19,50,17,"has"],[62,22,50,20],[62,23,50,21,"node"],[62,27,50,25],[62,28,50,26,"name"],[62,32,50,30],[62,33,50,31],[62,35,50,33],[63,10,51,8],[63,14,51,12,"variables"],[63,23,51,21],[63,26,51,24,"Array"],[63,31,51,29],[63,32,51,30,"from"],[63,36,51,34],[63,37,51,35,"within"],[63,43,51,41],[63,44,51,42],[63,45,51,43,"join"],[63,49,51,47],[63,50,51,48],[63,54,51,52],[63,55,51,53],[64,10,52,8],[64,16,52,14],[64,20,52,18,"ReferenceError"],[64,34,52,32],[64,35,52,33],[64,83,52,81],[64,84,52,82,"concat"],[64,90,52,88],[64,91,52,89,"variables"],[64,100,52,98],[64,102,52,100],[64,105,52,103],[64,106,52,104],[64,107,52,105],[65,8,53,6],[66,8,54,6],[66,12,54,10,"value"],[66,17,54,15],[66,20,54,18,"scope"],[66,25,54,23],[66,26,54,24,"get"],[66,29,54,27],[66,30,54,28,"node"],[66,34,54,32],[66,35,54,33,"name"],[66,39,54,37],[66,40,54,38],[67,8,55,6],[67,12,55,10],[67,16,55,10,"isNode"],[67,26,55,16],[67,27,55,16,"isNode"],[67,33,55,16],[67,35,55,17,"value"],[67,40,55,22],[67,41,55,23],[67,43,55,25],[68,10,56,8],[68,14,56,12,"nextWithin"],[68,24,56,22],[68,27,56,25],[68,31,56,29,"Set"],[68,34,56,32],[68,35,56,33,"within"],[68,41,56,39],[68,42,56,40],[69,10,57,8,"nextWithin"],[69,20,57,18],[69,21,57,19,"add"],[69,24,57,22],[69,25,57,23,"node"],[69,29,57,27],[69,30,57,28,"name"],[69,34,57,32],[69,35,57,33],[70,10,58,8],[70,17,58,15,"_resolve"],[70,25,58,23],[70,26,58,24,"value"],[70,31,58,29],[70,33,58,31,"scope"],[70,38,58,36],[70,40,58,38,"nextWithin"],[70,50,58,48],[70,51,58,49],[71,8,59,6],[71,9,59,7],[71,15,59,13],[71,19,59,17],[71,26,59,24,"value"],[71,31,59,29],[71,36,59,34],[71,44,59,42],[71,46,59,44],[72,10,60,8],[72,17,60,15,"parse"],[72,22,60,20],[72,23,60,21,"String"],[72,29,60,27],[72,30,60,28,"value"],[72,35,60,33],[72,36,60,34],[72,37,60,35],[73,8,61,6],[73,9,61,7],[73,15,61,13],[73,19,61,17,"value"],[73,24,61,22],[73,29,61,27,"undefined"],[73,38,61,36],[73,40,61,38],[74,10,62,8],[74,17,62,15],[74,21,62,19,"ConstantNode"],[74,33,62,31],[74,34,62,32,"value"],[74,39,62,37],[74,40,62,38],[75,8,63,6],[75,9,63,7],[75,15,63,13],[76,10,64,8],[76,17,64,15,"node"],[76,21,64,19],[77,8,65,6],[78,6,66,4],[78,7,66,5],[78,13,66,11],[78,17,66,15],[78,21,66,15,"isOperatorNode"],[78,31,66,29],[78,32,66,29,"isOperatorNode"],[78,46,66,29],[78,48,66,30,"node"],[78,52,66,34],[78,53,66,35],[78,55,66,37],[79,8,67,6],[79,12,67,10,"args"],[79,16,67,14],[79,19,67,17,"node"],[79,23,67,21],[79,24,67,22,"args"],[79,28,67,26],[79,29,67,27,"map"],[79,32,67,30],[79,33,67,31],[79,43,67,41,"arg"],[79,46,67,44],[79,48,67,46],[80,10,68,8],[80,17,68,15,"_resolve"],[80,25,68,23],[80,26,68,24,"arg"],[80,29,68,27],[80,31,68,29,"scope"],[80,36,68,34],[80,38,68,36,"within"],[80,44,68,42],[80,45,68,43],[81,8,69,6],[81,9,69,7],[81,10,69,8],[82,8,70,6],[82,15,70,13],[82,19,70,17,"OperatorNode"],[82,31,70,29],[82,32,70,30,"node"],[82,36,70,34],[82,37,70,35,"op"],[82,39,70,37],[82,41,70,39,"node"],[82,45,70,43],[82,46,70,44,"fn"],[82,48,70,46],[82,50,70,48,"args"],[82,54,70,52],[82,56,70,54,"node"],[82,60,70,58],[82,61,70,59,"implicit"],[82,69,70,67],[82,70,70,68],[83,6,71,4],[83,7,71,5],[83,13,71,11],[83,17,71,15],[83,21,71,15,"isParenthesisNode"],[83,31,71,32],[83,32,71,32,"isParenthesisNode"],[83,49,71,32],[83,51,71,33,"node"],[83,55,71,37],[83,56,71,38],[83,58,71,40],[84,8,72,6],[84,15,72,13],[84,19,72,17,"ParenthesisNode"],[84,34,72,32],[84,35,72,33,"_resolve"],[84,43,72,41],[84,44,72,42,"node"],[84,48,72,46],[84,49,72,47,"content"],[84,56,72,54],[84,58,72,56,"scope"],[84,63,72,61],[84,65,72,63,"within"],[84,71,72,69],[84,72,72,70],[84,73,72,71],[85,6,73,4],[85,7,73,5],[85,13,73,11],[85,17,73,15],[85,21,73,15,"isFunctionNode"],[85,31,73,29],[85,32,73,29,"isFunctionNode"],[85,46,73,29],[85,48,73,30,"node"],[85,52,73,34],[85,53,73,35],[85,55,73,37],[86,8,74,6],[86,12,74,10,"_args"],[86,17,74,15],[86,20,74,18,"node"],[86,24,74,22],[86,25,74,23,"args"],[86,29,74,27],[86,30,74,28,"map"],[86,33,74,31],[86,34,74,32],[86,44,74,42,"arg"],[86,47,74,45],[86,49,74,47],[87,10,75,8],[87,17,75,15,"_resolve"],[87,25,75,23],[87,26,75,24,"arg"],[87,29,75,27],[87,31,75,29,"scope"],[87,36,75,34],[87,38,75,36,"within"],[87,44,75,42],[87,45,75,43],[88,8,76,6],[88,9,76,7],[88,10,76,8],[89,8,77,6],[89,15,77,13],[89,19,77,17,"FunctionNode"],[89,31,77,29],[89,32,77,30,"node"],[89,36,77,34],[89,37,77,35,"name"],[89,41,77,39],[89,43,77,41,"_args"],[89,48,77,46],[89,49,77,47],[90,6,78,4],[92,6,80,4],[93,6,81,4],[94,6,82,4],[94,13,82,11,"node"],[94,17,82,15],[94,18,82,16,"map"],[94,21,82,19],[94,22,82,20,"child"],[94,27,82,25],[94,31,82,29,"_resolve"],[94,39,82,37],[94,40,82,38,"child"],[94,45,82,43],[94,47,82,45,"scope"],[94,52,82,50],[94,54,82,52,"within"],[94,60,82,58],[94,61,82,59],[94,62,82,60],[95,4,83,2],[96,4,84,2],[96,11,84,9,"typed"],[96,16,84,14],[96,17,84,15],[96,26,84,24],[96,28,84,26],[97,6,85,4,"Node"],[97,10,85,8],[97,12,85,10,"_resolve"],[97,20,85,18],[98,6,86,4],[98,36,86,34],[98,38,86,36,"_resolve"],[98,46,86,44],[99,6,87,4],[99,20,87,18],[99,22,87,20,"Node, Object"],[99,23,87,21,"n"],[99,24,87,22],[99,26,87,24,"scope"],[99,31,87,29],[99,36,87,34,"_resolve"],[99,44,87,42],[99,45,87,43,"n"],[99,46,87,44],[99,48,87,46],[99,52,87,46,"createMap"],[99,63,87,55],[99,64,87,55,"createMap"],[99,73,87,55],[99,75,87,56,"scope"],[99,80,87,61],[99,81,87,62],[99,82,87,63],[100,6,88,4],[101,6,89,4],[102,6,90,4],[103,6,91,4],[103,22,91,20],[103,24,91,22,"typed"],[103,29,91,27],[103,30,91,28,"referToSelf"],[103,41,91,39],[103,42,91,40,"self"],[103,46,91,44],[103,50,91,48,"A"],[103,51,91,49],[103,55,91,53,"A"],[103,56,91,54],[103,57,91,55,"map"],[103,60,91,58],[103,61,91,59,"n"],[103,62,91,60],[103,66,91,64,"self"],[103,70,91,68],[103,71,91,69,"n"],[103,72,91,70],[103,73,91,71],[103,74,91,72],[103,75,91,73],[104,6,92,4],[104,40,92,38],[104,42,92,40,"typed"],[104,47,92,45],[104,48,92,46,"referToSelf"],[104,59,92,57],[104,60,92,58,"self"],[104,64,92,62],[104,68,92,66,"A"],[104,69,92,67],[104,73,92,71,"A"],[104,74,92,72],[104,75,92,73,"map"],[104,78,92,76],[104,79,92,77,"n"],[104,80,92,78],[104,84,92,82,"self"],[104,88,92,86],[104,89,92,87,"n"],[104,90,92,88],[104,91,92,89],[104,92,92,90],[104,93,92,91],[105,6,93,4],[105,21,93,19],[105,23,93,21,"typed"],[105,28,93,26],[105,29,93,27,"referTo"],[105,36,93,34],[105,37,93,35],[105,48,93,46],[105,50,93,48,"selfAM"],[105,56,93,54],[105,60,93,58],[105,61,93,59,"A"],[105,62,93,60],[105,64,93,62,"scope"],[105,69,93,67],[105,74,93,72,"selfAM"],[105,80,93,78],[105,81,93,79,"A"],[105,82,93,80],[105,84,93,82],[105,88,93,82,"createMap"],[105,99,93,91],[105,100,93,91,"createMap"],[105,109,93,91],[105,111,93,92,"scope"],[105,116,93,97],[105,117,93,98],[105,118,93,99],[105,119,93,100],[106,6,94,4],[106,22,94,20],[106,24,94,22,"typed"],[106,29,94,27],[106,30,94,28,"referTo"],[106,37,94,35],[106,38,94,36],[106,50,94,48],[106,52,94,50,"selfMM"],[106,58,94,56],[106,62,94,60],[106,63,94,61,"A"],[106,64,94,62],[106,66,94,64,"scope"],[106,71,94,69],[106,76,94,74,"selfMM"],[106,82,94,80],[106,83,94,81,"A"],[106,84,94,82],[106,86,94,84],[106,90,94,84,"createMap"],[106,101,94,93],[106,102,94,93,"createMap"],[106,111,94,93],[106,113,94,94,"scope"],[106,118,94,99],[106,119,94,100],[106,120,94,101],[106,121,94,102],[107,6,95,4],[107,27,95,25],[107,29,95,27,"typed"],[107,34,95,32],[107,35,95,33,"referToSelf"],[107,46,95,44],[107,47,95,45,"self"],[107,51,95,49],[107,55,95,53],[107,56,95,54,"A"],[107,57,95,55],[107,59,95,57,"scope"],[107,64,95,62],[107,69,95,67,"A"],[107,70,95,68],[107,71,95,69,"map"],[107,74,95,72],[107,75,95,73,"n"],[107,76,95,74],[107,80,95,78,"self"],[107,84,95,82],[107,85,95,83,"n"],[107,86,95,84],[107,88,95,86,"scope"],[107,93,95,91],[107,94,95,92],[107,95,95,93],[108,4,96,2],[108,5,96,3],[108,6,96,4],[109,2,97,0],[109,3,97,1],[109,4,97,2],[110,0,97,3],[110,3]],"functionMap":{"names":["<global>","factory$argument_2","_resolve","node.args.map$argument_0","node.map$argument_0","typed$argument_1.NodeObject","typed.referToSelf$argument_0","<anonymous>","A.map$argument_0","typed.referTo$argument_1"],"mappings":"AAA;sECK;ECmC;+BC0B;ODE;gCCK;ODE;oBEM,uCF;GDC;oBII,2CJ;wCKI,QC,WC,YD,CN;0DKC,QC,WC,YD,CN;gDQC,UF,yCN;kDQC,UF,yCN;6CKC,QC,oBC,mBD,CN;CDE"},"hasCjsExports":false},"type":"js/module"}]}