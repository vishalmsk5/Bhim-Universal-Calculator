{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo01xDSid\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo01xDSid;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo01xDSid';\n  var dependencies = ['typed'];\n  var createMatAlgo01xDSid = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed\n    } = _ref;\n    /**\n     * Iterates over SparseMatrix nonzero items and invokes the callback function f(Dij, Sij).\n     * Callback function invoked NNZ times (number of nonzero items in SparseMatrix).\n     *\n     *\n     *          ┌  f(Dij, Sij)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  Dij          ; otherwise\n     *\n     *\n     * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n     * @param {Matrix}   sparseMatrix      The SparseMatrix instance (S)\n     * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n     *\n     * @return {Matrix}                    DenseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n     */\n    return function algorithm1(denseMatrix, sparseMatrix, callback, inverse) {\n      // dense matrix arrays\n      var adata = denseMatrix._data;\n      var asize = denseMatrix._size;\n      var adt = denseMatrix._datatype || denseMatrix.getDataType();\n      // sparse matrix arrays\n      var bvalues = sparseMatrix._values;\n      var bindex = sparseMatrix._index;\n      var bptr = sparseMatrix._ptr;\n      var bsize = sparseMatrix._size;\n      var bdt = sparseMatrix._datatype || sparseMatrix._data === undefined ? sparseMatrix._datatype : sparseMatrix.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!bvalues) {\n        throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // process data types\n      var dt = typeof adt === 'string' && adt !== 'mixed' && adt === bdt ? adt : undefined;\n      // callback function\n      var cf = dt ? typed.find(callback, [dt, dt]) : callback;\n\n      // vars\n      var i, j;\n\n      // result (DenseMatrix)\n      var cdata = [];\n      // initialize c\n      for (i = 0; i < rows; i++) {\n        cdata[i] = [];\n      }\n\n      // workspace\n      var x = [];\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // loop columns in b\n      for (j = 0; j < columns; j++) {\n        // column mark\n        var mark = j + 1;\n        // values in column j\n        for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          i = bindex[k];\n          // update workspace\n          x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n          // mark i as updated\n          w[i] = mark;\n        }\n        // loop rows\n        for (i = 0; i < rows; i++) {\n          // check row is in workspace\n          if (w[i] === mark) {\n            // c[i][j] was already calculated\n            cdata[i][j] = x[i];\n          } else {\n            // item does not exist in S\n            cdata[i][j] = adata[i][j];\n          }\n        }\n      }\n\n      // return dense matrix\n      return denseMatrix.createDenseMatrix({\n        data: cdata,\n        size: [rows, columns],\n        datatype: adt === denseMatrix._datatype && bdt === sparseMatrix._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":125,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo01xDSid"],[10,33,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,29,3,27],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,30,4,28],[17,2,5,7],[17,6,5,11,"createMatAlgo01xDSid"],[17,26,5,31],[17,29,5,34],[17,44,5,49],[17,48,5,49,"factory"],[17,63,5,56],[17,64,5,56,"factory"],[17,71,5,56],[17,73,5,57,"name"],[17,77,5,61],[17,79,5,63,"dependencies"],[17,91,5,75],[17,93,5,77,"_ref"],[17,97,5,81],[17,101,5,85],[18,4,6,2],[18,8,6,6],[19,6,7,4,"typed"],[20,4,8,2],[20,5,8,3],[20,8,8,6,"_ref"],[20,12,8,10],[21,4,9,2],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,4,28,2],[40,11,28,9],[40,20,28,18,"algorithm1"],[40,30,28,28,"algorithm1"],[40,31,28,29,"denseMatrix"],[40,42,28,40],[40,44,28,42,"sparseMatrix"],[40,56,28,54],[40,58,28,56,"callback"],[40,66,28,64],[40,68,28,66,"inverse"],[40,75,28,73],[40,77,28,75],[41,6,29,4],[42,6,30,4],[42,10,30,8,"adata"],[42,15,30,13],[42,18,30,16,"denseMatrix"],[42,29,30,27],[42,30,30,28,"_data"],[42,35,30,33],[43,6,31,4],[43,10,31,8,"asize"],[43,15,31,13],[43,18,31,16,"denseMatrix"],[43,29,31,27],[43,30,31,28,"_size"],[43,35,31,33],[44,6,32,4],[44,10,32,8,"adt"],[44,13,32,11],[44,16,32,14,"denseMatrix"],[44,27,32,25],[44,28,32,26,"_datatype"],[44,37,32,35],[44,41,32,39,"denseMatrix"],[44,52,32,50],[44,53,32,51,"getDataType"],[44,64,32,62],[44,65,32,63],[44,66,32,64],[45,6,33,4],[46,6,34,4],[46,10,34,8,"bvalues"],[46,17,34,15],[46,20,34,18,"sparseMatrix"],[46,32,34,30],[46,33,34,31,"_values"],[46,40,34,38],[47,6,35,4],[47,10,35,8,"bindex"],[47,16,35,14],[47,19,35,17,"sparseMatrix"],[47,31,35,29],[47,32,35,30,"_index"],[47,38,35,36],[48,6,36,4],[48,10,36,8,"bptr"],[48,14,36,12],[48,17,36,15,"sparseMatrix"],[48,29,36,27],[48,30,36,28,"_ptr"],[48,34,36,32],[49,6,37,4],[49,10,37,8,"bsize"],[49,15,37,13],[49,18,37,16,"sparseMatrix"],[49,30,37,28],[49,31,37,29,"_size"],[49,36,37,34],[50,6,38,4],[50,10,38,8,"bdt"],[50,13,38,11],[50,16,38,14,"sparseMatrix"],[50,28,38,26],[50,29,38,27,"_datatype"],[50,38,38,36],[50,42,38,40,"sparseMatrix"],[50,54,38,52],[50,55,38,53,"_data"],[50,60,38,58],[50,65,38,63,"undefined"],[50,74,38,72],[50,77,38,75,"sparseMatrix"],[50,89,38,87],[50,90,38,88,"_datatype"],[50,99,38,97],[50,102,38,100,"sparseMatrix"],[50,114,38,112],[50,115,38,113,"getDataType"],[50,126,38,124],[50,127,38,125],[50,128,38,126],[52,6,40,4],[53,6,41,4],[53,10,41,8,"asize"],[53,15,41,13],[53,16,41,14,"length"],[53,22,41,20],[53,27,41,25,"bsize"],[53,32,41,30],[53,33,41,31,"length"],[53,39,41,37],[53,41,41,39],[54,8,42,6],[54,14,42,12],[54,18,42,16,"DimensionError"],[54,40,42,30],[54,41,42,30,"DimensionError"],[54,55,42,30],[54,56,42,31,"asize"],[54,61,42,36],[54,62,42,37,"length"],[54,68,42,43],[54,70,42,45,"bsize"],[54,75,42,50],[54,76,42,51,"length"],[54,82,42,57],[54,83,42,58],[55,6,43,4],[57,6,45,4],[58,6,46,4],[58,10,46,8,"asize"],[58,15,46,13],[58,16,46,14],[58,17,46,15],[58,18,46,16],[58,23,46,21,"bsize"],[58,28,46,26],[58,29,46,27],[58,30,46,28],[58,31,46,29],[58,35,46,33,"asize"],[58,40,46,38],[58,41,46,39],[58,42,46,40],[58,43,46,41],[58,48,46,46,"bsize"],[58,53,46,51],[58,54,46,52],[58,55,46,53],[58,56,46,54],[58,58,46,56],[59,8,47,6],[59,14,47,12],[59,18,47,16,"RangeError"],[59,28,47,26],[59,29,47,27],[59,61,47,59],[59,64,47,62,"asize"],[59,69,47,67],[59,72,47,70],[59,97,47,95],[59,100,47,98,"bsize"],[59,105,47,103],[59,108,47,106],[59,111,47,109],[59,112,47,110],[60,6,48,4],[62,6,50,4],[63,6,51,4],[63,10,51,8],[63,11,51,9,"bvalues"],[63,18,51,16],[63,20,51,18],[64,8,52,6],[64,14,52,12],[64,18,52,16,"Error"],[64,23,52,21],[64,24,52,22],[64,92,52,90],[64,93,52,91],[65,6,53,4],[67,6,55,4],[68,6,56,4],[68,10,56,8,"rows"],[68,14,56,12],[68,17,56,15,"asize"],[68,22,56,20],[68,23,56,21],[68,24,56,22],[68,25,56,23],[69,6,57,4],[69,10,57,8,"columns"],[69,17,57,15],[69,20,57,18,"asize"],[69,25,57,23],[69,26,57,24],[69,27,57,25],[69,28,57,26],[71,6,59,4],[72,6,60,4],[72,10,60,8,"dt"],[72,12,60,10],[72,15,60,13],[72,22,60,20,"adt"],[72,25,60,23],[72,30,60,28],[72,38,60,36],[72,42,60,40,"adt"],[72,45,60,43],[72,50,60,48],[72,57,60,55],[72,61,60,59,"adt"],[72,64,60,62],[72,69,60,67,"bdt"],[72,72,60,70],[72,75,60,73,"adt"],[72,78,60,76],[72,81,60,79,"undefined"],[72,90,60,88],[73,6,61,4],[74,6,62,4],[74,10,62,8,"cf"],[74,12,62,10],[74,15,62,13,"dt"],[74,17,62,15],[74,20,62,18,"typed"],[74,25,62,23],[74,26,62,24,"find"],[74,30,62,28],[74,31,62,29,"callback"],[74,39,62,37],[74,41,62,39],[74,42,62,40,"dt"],[74,44,62,42],[74,46,62,44,"dt"],[74,48,62,46],[74,49,62,47],[74,50,62,48],[74,53,62,51,"callback"],[74,61,62,59],[76,6,64,4],[77,6,65,4],[77,10,65,8,"i"],[77,11,65,9],[77,13,65,11,"j"],[77,14,65,12],[79,6,67,4],[80,6,68,4],[80,10,68,8,"cdata"],[80,15,68,13],[80,18,68,16],[80,20,68,18],[81,6,69,4],[82,6,70,4],[82,11,70,9,"i"],[82,12,70,10],[82,15,70,13],[82,16,70,14],[82,18,70,16,"i"],[82,19,70,17],[82,22,70,20,"rows"],[82,26,70,24],[82,28,70,26,"i"],[82,29,70,27],[82,31,70,29],[82,33,70,31],[83,8,71,6,"cdata"],[83,13,71,11],[83,14,71,12,"i"],[83,15,71,13],[83,16,71,14],[83,19,71,17],[83,21,71,19],[84,6,72,4],[86,6,74,4],[87,6,75,4],[87,10,75,8,"x"],[87,11,75,9],[87,14,75,12],[87,16,75,14],[88,6,76,4],[89,6,77,4],[89,10,77,8,"w"],[89,11,77,9],[89,14,77,12],[89,16,77,14],[91,6,79,4],[92,6,80,4],[92,11,80,9,"j"],[92,12,80,10],[92,15,80,13],[92,16,80,14],[92,18,80,16,"j"],[92,19,80,17],[92,22,80,20,"columns"],[92,29,80,27],[92,31,80,29,"j"],[92,32,80,30],[92,34,80,32],[92,36,80,34],[93,8,81,6],[94,8,82,6],[94,12,82,10,"mark"],[94,16,82,14],[94,19,82,17,"j"],[94,20,82,18],[94,23,82,21],[94,24,82,22],[95,8,83,6],[96,8,84,6],[96,13,84,11],[96,17,84,15,"k0"],[96,19,84,17],[96,22,84,20,"bptr"],[96,26,84,24],[96,27,84,25,"j"],[96,28,84,26],[96,29,84,27],[96,31,84,29,"k1"],[96,33,84,31],[96,36,84,34,"bptr"],[96,40,84,38],[96,41,84,39,"j"],[96,42,84,40],[96,45,84,43],[96,46,84,44],[96,47,84,45],[96,49,84,47,"k"],[96,50,84,48],[96,53,84,51,"k0"],[96,55,84,53],[96,57,84,55,"k"],[96,58,84,56],[96,61,84,59,"k1"],[96,63,84,61],[96,65,84,63,"k"],[96,66,84,64],[96,68,84,66],[96,70,84,68],[97,10,85,8],[98,10,86,8,"i"],[98,11,86,9],[98,14,86,12,"bindex"],[98,20,86,18],[98,21,86,19,"k"],[98,22,86,20],[98,23,86,21],[99,10,87,8],[100,10,88,8,"x"],[100,11,88,9],[100,12,88,10,"i"],[100,13,88,11],[100,14,88,12],[100,17,88,15,"inverse"],[100,24,88,22],[100,27,88,25,"cf"],[100,29,88,27],[100,30,88,28,"bvalues"],[100,37,88,35],[100,38,88,36,"k"],[100,39,88,37],[100,40,88,38],[100,42,88,40,"adata"],[100,47,88,45],[100,48,88,46,"i"],[100,49,88,47],[100,50,88,48],[100,51,88,49,"j"],[100,52,88,50],[100,53,88,51],[100,54,88,52],[100,57,88,55,"cf"],[100,59,88,57],[100,60,88,58,"adata"],[100,65,88,63],[100,66,88,64,"i"],[100,67,88,65],[100,68,88,66],[100,69,88,67,"j"],[100,70,88,68],[100,71,88,69],[100,73,88,71,"bvalues"],[100,80,88,78],[100,81,88,79,"k"],[100,82,88,80],[100,83,88,81],[100,84,88,82],[101,10,89,8],[102,10,90,8,"w"],[102,11,90,9],[102,12,90,10,"i"],[102,13,90,11],[102,14,90,12],[102,17,90,15,"mark"],[102,21,90,19],[103,8,91,6],[104,8,92,6],[105,8,93,6],[105,13,93,11,"i"],[105,14,93,12],[105,17,93,15],[105,18,93,16],[105,20,93,18,"i"],[105,21,93,19],[105,24,93,22,"rows"],[105,28,93,26],[105,30,93,28,"i"],[105,31,93,29],[105,33,93,31],[105,35,93,33],[106,10,94,8],[107,10,95,8],[107,14,95,12,"w"],[107,15,95,13],[107,16,95,14,"i"],[107,17,95,15],[107,18,95,16],[107,23,95,21,"mark"],[107,27,95,25],[107,29,95,27],[108,12,96,10],[109,12,97,10,"cdata"],[109,17,97,15],[109,18,97,16,"i"],[109,19,97,17],[109,20,97,18],[109,21,97,19,"j"],[109,22,97,20],[109,23,97,21],[109,26,97,24,"x"],[109,27,97,25],[109,28,97,26,"i"],[109,29,97,27],[109,30,97,28],[110,10,98,8],[110,11,98,9],[110,17,98,15],[111,12,99,10],[112,12,100,10,"cdata"],[112,17,100,15],[112,18,100,16,"i"],[112,19,100,17],[112,20,100,18],[112,21,100,19,"j"],[112,22,100,20],[112,23,100,21],[112,26,100,24,"adata"],[112,31,100,29],[112,32,100,30,"i"],[112,33,100,31],[112,34,100,32],[112,35,100,33,"j"],[112,36,100,34],[112,37,100,35],[113,10,101,8],[114,8,102,6],[115,6,103,4],[117,6,105,4],[118,6,106,4],[118,13,106,11,"denseMatrix"],[118,24,106,22],[118,25,106,23,"createDenseMatrix"],[118,42,106,40],[118,43,106,41],[119,8,107,6,"data"],[119,12,107,10],[119,14,107,12,"cdata"],[119,19,107,17],[120,8,108,6,"size"],[120,12,108,10],[120,14,108,12],[120,15,108,13,"rows"],[120,19,108,17],[120,21,108,19,"columns"],[120,28,108,26],[120,29,108,27],[121,8,109,6,"datatype"],[121,16,109,14],[121,18,109,16,"adt"],[121,21,109,19],[121,26,109,24,"denseMatrix"],[121,37,109,35],[121,38,109,36,"_datatype"],[121,47,109,45],[121,51,109,49,"bdt"],[121,54,109,52],[121,59,109,57,"sparseMatrix"],[121,71,109,69],[121,72,109,70,"_datatype"],[121,81,109,79],[121,84,109,82,"dt"],[121,86,109,84],[121,89,109,87,"undefined"],[122,6,110,4],[122,7,110,5],[122,8,110,6],[123,4,111,2],[123,5,111,3],[124,2,112,0],[124,3,112,1],[124,4,112,2],[125,0,112,3],[125,3]],"functionMap":{"names":["<global>","factory$argument_2","algorithm1"],"mappings":"AAA;6ECI;SCuB;GDmF;CDC"},"hasCjsExports":false},"type":"js/module"}]}