{"dependencies":[{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}},{"name":"../../utils/number.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":50,"index":100}}],"key":"0sWcInmWGTRVMc5qHFyD6Xk9iLc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createBernoulli\", {\n    enumerable: true,\n    get: function () {\n      return createBernoulli;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../utils/factory.js\");\n  var _utilsNumberJs = require(_dependencyMap[1], \"../../utils/number.js\");\n  var name = 'bernoulli';\n  var dependencies = ['typed', 'config', 'isInteger', 'number', '?BigNumber', '?Fraction'];\n  var createBernoulli = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      config,\n      number,\n      BigNumber: _BigNumber,\n      Fraction\n    } = _ref;\n    /**\n     * Return the `n`th Bernoulli number, for positive integers `n`\n     *\n     * Syntax:\n     *\n     *     math.bernoulli(n)\n     *\n     * Examples:\n     *\n     *     math.bernoulli(1)                  // returns -0.5\n     *     // All other odd Bernoulli numbers are 0:\n     *     math.bernoulli(7)                  // returns 0\n     *     math.bernoulli(math.bignumber(6))  // value bignumber(1).div(42)\n     *     // Produces exact rationals for bigint or fraction input:\n     *     math.bernoulli(8n)                 // Fraction -1,30\n     *     math.bernoulli(math.fraction(10))  // Fraction 5,66\n     *\n     * See also:\n     *\n     *     combinations, gamma, stirlingS2\n     *\n     * @param {number | BigNumber | bigint | Fraction} n\n     *    Index of the Bernoulli number\n     * @return {number | BigNumber | Fraction}\n     *    nth Bernoulli number, of a type corresponding to the argument n\n     */\n\n    var numberCache = [undefined];\n    var fractionCache = [undefined];\n    var bigCache = [undefined];\n    var cachedPrecision = 50;\n    return typed(name, {\n      number: index => _bernoulli(index, n => n, numberCache, (a, b) => a + b, (a, b) => a * b, (a, b) => a / b),\n      'bigint | Fraction': index => _bernoulli(number(index), n => new Fraction(n), fractionCache, (a, b) => a.add(b), (a, b) => a.mul(b), (a, b) => a.div(b)),\n      BigNumber: index => {\n        if (config.precision !== cachedPrecision) {\n          bigCache = [undefined];\n          cachedPrecision = config.precision;\n        }\n        return _bernoulli(number(index), n => new _BigNumber(n), bigCache, (a, b) => a.add(b), (a, b) => a.mul(b), (a, b) => a.div(b));\n      }\n    });\n  });\n\n  /**\n   * Underlying implementation, with all operations passed in.\n   * Parameters:\n   * 1. index: a (positive integer) number specifying which Bernoulli number\n   *    to compute.\n   * 2. promote: a function that takes an integer number and returns\n   *    the desired type for the Bernoulli number values.\n   * 3. A: a cache array of partial computation data that _bernoulli should use.\n   *    Different cache arrays should be provided for different types.\n   * 4. plus: a function that adds two values of the desired type.\n   * 5. times: a function that multiplies two values of the desired type.\n   * 6. divide: a function that divides one value of the desired type by another.\n   */\n  function _bernoulli(index, promote, A, plus, times, divide) {\n    if (index < 0 || !(0, _utilsNumberJs.isInteger)(index)) {\n      throw new RangeError('Bernoulli index must be nonnegative integer');\n    }\n    if (index === 0) return promote(1);\n    if (index === 1) return divide(promote(-1), promote(2));\n    if (index % 2 === 1) return promote(0);\n    // We proceed as in https://math.stackexchange.com/a/2844337\n    // (by no means the most efficient, but very simple to implement)\n    // A cache entry consists of a triple\n    // [cotangent coefficient a_n, prefactor, Bernouilli number B_2n]\n    var one = promote(1);\n    if (A.length === 1) {\n      A.push([divide(one, promote(-3)), divide(one, promote(-2)), divide(one, promote(6))]);\n    }\n    var half = index / 2;\n    var zero = promote(0);\n    var two = promote(2);\n    while (A.length <= half) {\n      var i = A.length; // next cotangent coefficient to compute\n      var lim = Math.floor((i + 1) / 2);\n      var a = zero;\n      for (var m = 1; m < lim; ++m) {\n        a = plus(a, times(A[m][0], A[i - m][0]));\n      }\n      a = times(a, two);\n      if (i % 2 === 0) a = plus(a, times(A[lim][0], A[lim][0]));\n      a = divide(a, promote(-(2 * i + 1)));\n      var prefactor = divide(times(A[i - 1][1], promote(-i * (2 * i - 1))), two);\n      A.push([a, prefactor, times(prefactor, a)]);\n    }\n    return A[half][2];\n  }\n});","lineCount":115,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createBernoulli"],[10,28,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_utilsNumberJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,24,3,22],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,31,4,29],[16,39,4,37],[16,41,4,39],[16,52,4,50],[16,54,4,52],[16,62,4,60],[16,64,4,62],[16,76,4,74],[16,78,4,76],[16,89,4,87],[16,90,4,88],[17,2,5,7],[17,6,5,11,"createBernoulli"],[17,21,5,26],[17,24,5,29],[17,39,5,44],[17,43,5,44,"factory"],[17,58,5,51],[17,59,5,51,"factory"],[17,66,5,51],[17,68,5,52,"name"],[17,72,5,56],[17,74,5,58,"dependencies"],[17,86,5,70],[17,88,5,72,"_ref"],[17,92,5,76],[17,96,5,80],[18,4,6,2],[18,8,6,6],[19,6,7,4,"typed"],[19,11,7,9],[20,6,8,4,"config"],[20,12,8,10],[21,6,9,4,"number"],[21,12,9,10],[22,6,10,4,"BigNumber"],[22,15,10,13],[22,17,10,15,"_BigNumber"],[22,27,10,25],[23,6,11,4,"Fraction"],[24,4,12,2],[24,5,12,3],[24,8,12,6,"_ref"],[24,12,12,10],[25,4,13,2],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[49,0,37,0],[50,0,38,0],[52,4,40,2],[52,8,40,6,"numberCache"],[52,19,40,17],[52,22,40,20],[52,23,40,21,"undefined"],[52,32,40,30],[52,33,40,31],[53,4,41,2],[53,8,41,6,"fractionCache"],[53,21,41,19],[53,24,41,22],[53,25,41,23,"undefined"],[53,34,41,32],[53,35,41,33],[54,4,42,2],[54,8,42,6,"bigCache"],[54,16,42,14],[54,19,42,17],[54,20,42,18,"undefined"],[54,29,42,27],[54,30,42,28],[55,4,43,2],[55,8,43,6,"cachedPrecision"],[55,23,43,21],[55,26,43,24],[55,28,43,26],[56,4,44,2],[56,11,44,9,"typed"],[56,16,44,14],[56,17,44,15,"name"],[56,21,44,19],[56,23,44,21],[57,6,45,4,"number"],[57,12,45,10],[57,14,45,12,"index"],[57,19,45,17],[57,23,45,21,"_bernoulli"],[57,33,45,31],[57,34,45,32,"index"],[57,39,45,37],[57,41,45,39,"n"],[57,42,45,40],[57,46,45,44,"n"],[57,47,45,45],[57,49,45,47,"numberCache"],[57,60,45,58],[57,62,45,60],[57,63,45,61,"a"],[57,64,45,62],[57,66,45,64,"b"],[57,67,45,65],[57,72,45,70,"a"],[57,73,45,71],[57,76,45,74,"b"],[57,77,45,75],[57,79,45,77],[57,80,45,78,"a"],[57,81,45,79],[57,83,45,81,"b"],[57,84,45,82],[57,89,45,87,"a"],[57,90,45,88],[57,93,45,91,"b"],[57,94,45,92],[57,96,45,94],[57,97,45,95,"a"],[57,98,45,96],[57,100,45,98,"b"],[57,101,45,99],[57,106,45,104,"a"],[57,107,45,105],[57,110,45,108,"b"],[57,111,45,109],[57,112,45,110],[58,6,46,4],[58,25,46,23],[58,27,46,25,"index"],[58,32,46,30],[58,36,46,34,"_bernoulli"],[58,46,46,44],[58,47,46,45,"number"],[58,53,46,51],[58,54,46,52,"index"],[58,59,46,57],[58,60,46,58],[58,62,46,60,"n"],[58,63,46,61],[58,67,46,65],[58,71,46,69,"Fraction"],[58,79,46,77],[58,80,46,78,"n"],[58,81,46,79],[58,82,46,80],[58,84,46,82,"fractionCache"],[58,97,46,95],[58,99,46,97],[58,100,46,98,"a"],[58,101,46,99],[58,103,46,101,"b"],[58,104,46,102],[58,109,46,107,"a"],[58,110,46,108],[58,111,46,109,"add"],[58,114,46,112],[58,115,46,113,"b"],[58,116,46,114],[58,117,46,115],[58,119,46,117],[58,120,46,118,"a"],[58,121,46,119],[58,123,46,121,"b"],[58,124,46,122],[58,129,46,127,"a"],[58,130,46,128],[58,131,46,129,"mul"],[58,134,46,132],[58,135,46,133,"b"],[58,136,46,134],[58,137,46,135],[58,139,46,137],[58,140,46,138,"a"],[58,141,46,139],[58,143,46,141,"b"],[58,144,46,142],[58,149,46,147,"a"],[58,150,46,148],[58,151,46,149,"div"],[58,154,46,152],[58,155,46,153,"b"],[58,156,46,154],[58,157,46,155],[58,158,46,156],[59,6,47,4,"BigNumber"],[59,15,47,13],[59,17,47,15,"index"],[59,22,47,20],[59,26,47,24],[60,8,48,6],[60,12,48,10,"config"],[60,18,48,16],[60,19,48,17,"precision"],[60,28,48,26],[60,33,48,31,"cachedPrecision"],[60,48,48,46],[60,50,48,48],[61,10,49,8,"bigCache"],[61,18,49,16],[61,21,49,19],[61,22,49,20,"undefined"],[61,31,49,29],[61,32,49,30],[62,10,50,8,"cachedPrecision"],[62,25,50,23],[62,28,50,26,"config"],[62,34,50,32],[62,35,50,33,"precision"],[62,44,50,42],[63,8,51,6],[64,8,52,6],[64,15,52,13,"_bernoulli"],[64,25,52,23],[64,26,52,24,"number"],[64,32,52,30],[64,33,52,31,"index"],[64,38,52,36],[64,39,52,37],[64,41,52,39,"n"],[64,42,52,40],[64,46,52,44],[64,50,52,48,"_BigNumber"],[64,60,52,58],[64,61,52,59,"n"],[64,62,52,60],[64,63,52,61],[64,65,52,63,"bigCache"],[64,73,52,71],[64,75,52,73],[64,76,52,74,"a"],[64,77,52,75],[64,79,52,77,"b"],[64,80,52,78],[64,85,52,83,"a"],[64,86,52,84],[64,87,52,85,"add"],[64,90,52,88],[64,91,52,89,"b"],[64,92,52,90],[64,93,52,91],[64,95,52,93],[64,96,52,94,"a"],[64,97,52,95],[64,99,52,97,"b"],[64,100,52,98],[64,105,52,103,"a"],[64,106,52,104],[64,107,52,105,"mul"],[64,110,52,108],[64,111,52,109,"b"],[64,112,52,110],[64,113,52,111],[64,115,52,113],[64,116,52,114,"a"],[64,117,52,115],[64,119,52,117,"b"],[64,120,52,118],[64,125,52,123,"a"],[64,126,52,124],[64,127,52,125,"div"],[64,130,52,128],[64,131,52,129,"b"],[64,132,52,130],[64,133,52,131],[64,134,52,132],[65,6,53,4],[66,4,54,2],[66,5,54,3],[66,6,54,4],[67,2,55,0],[67,3,55,1],[67,4,55,2],[69,2,57,0],[70,0,58,0],[71,0,59,0],[72,0,60,0],[73,0,61,0],[74,0,62,0],[75,0,63,0],[76,0,64,0],[77,0,65,0],[78,0,66,0],[79,0,67,0],[80,0,68,0],[81,0,69,0],[82,2,70,0],[82,11,70,9,"_bernoulli"],[82,21,70,19,"_bernoulli"],[82,22,70,20,"index"],[82,27,70,25],[82,29,70,27,"promote"],[82,36,70,34],[82,38,70,36,"A"],[82,39,70,37],[82,41,70,39,"plus"],[82,45,70,43],[82,47,70,45,"times"],[82,52,70,50],[82,54,70,52,"divide"],[82,60,70,58],[82,62,70,60],[83,4,71,2],[83,8,71,6,"index"],[83,13,71,11],[83,16,71,14],[83,17,71,15],[83,21,71,19],[83,22,71,20],[83,26,71,20,"isInteger"],[83,40,71,29],[83,41,71,29,"isInteger"],[83,50,71,29],[83,52,71,30,"index"],[83,57,71,35],[83,58,71,36],[83,60,71,38],[84,6,72,4],[84,12,72,10],[84,16,72,14,"RangeError"],[84,26,72,24],[84,27,72,25],[84,72,72,70],[84,73,72,71],[85,4,73,2],[86,4,74,2],[86,8,74,6,"index"],[86,13,74,11],[86,18,74,16],[86,19,74,17],[86,21,74,19],[86,28,74,26,"promote"],[86,35,74,33],[86,36,74,34],[86,37,74,35],[86,38,74,36],[87,4,75,2],[87,8,75,6,"index"],[87,13,75,11],[87,18,75,16],[87,19,75,17],[87,21,75,19],[87,28,75,26,"divide"],[87,34,75,32],[87,35,75,33,"promote"],[87,42,75,40],[87,43,75,41],[87,44,75,42],[87,45,75,43],[87,46,75,44],[87,48,75,46,"promote"],[87,55,75,53],[87,56,75,54],[87,57,75,55],[87,58,75,56],[87,59,75,57],[88,4,76,2],[88,8,76,6,"index"],[88,13,76,11],[88,16,76,14],[88,17,76,15],[88,22,76,20],[88,23,76,21],[88,25,76,23],[88,32,76,30,"promote"],[88,39,76,37],[88,40,76,38],[88,41,76,39],[88,42,76,40],[89,4,77,2],[90,4,78,2],[91,4,79,2],[92,4,80,2],[93,4,81,2],[93,8,81,6,"one"],[93,11,81,9],[93,14,81,12,"promote"],[93,21,81,19],[93,22,81,20],[93,23,81,21],[93,24,81,22],[94,4,82,2],[94,8,82,6,"A"],[94,9,82,7],[94,10,82,8,"length"],[94,16,82,14],[94,21,82,19],[94,22,82,20],[94,24,82,22],[95,6,83,4,"A"],[95,7,83,5],[95,8,83,6,"push"],[95,12,83,10],[95,13,83,11],[95,14,83,12,"divide"],[95,20,83,18],[95,21,83,19,"one"],[95,24,83,22],[95,26,83,24,"promote"],[95,33,83,31],[95,34,83,32],[95,35,83,33],[95,36,83,34],[95,37,83,35],[95,38,83,36],[95,40,83,38,"divide"],[95,46,83,44],[95,47,83,45,"one"],[95,50,83,48],[95,52,83,50,"promote"],[95,59,83,57],[95,60,83,58],[95,61,83,59],[95,62,83,60],[95,63,83,61],[95,64,83,62],[95,66,83,64,"divide"],[95,72,83,70],[95,73,83,71,"one"],[95,76,83,74],[95,78,83,76,"promote"],[95,85,83,83],[95,86,83,84],[95,87,83,85],[95,88,83,86],[95,89,83,87],[95,90,83,88],[95,91,83,89],[96,4,84,2],[97,4,85,2],[97,8,85,6,"half"],[97,12,85,10],[97,15,85,13,"index"],[97,20,85,18],[97,23,85,21],[97,24,85,22],[98,4,86,2],[98,8,86,6,"zero"],[98,12,86,10],[98,15,86,13,"promote"],[98,22,86,20],[98,23,86,21],[98,24,86,22],[98,25,86,23],[99,4,87,2],[99,8,87,6,"two"],[99,11,87,9],[99,14,87,12,"promote"],[99,21,87,19],[99,22,87,20],[99,23,87,21],[99,24,87,22],[100,4,88,2],[100,11,88,9,"A"],[100,12,88,10],[100,13,88,11,"length"],[100,19,88,17],[100,23,88,21,"half"],[100,27,88,25],[100,29,88,27],[101,6,89,4],[101,10,89,8,"i"],[101,11,89,9],[101,14,89,12,"A"],[101,15,89,13],[101,16,89,14,"length"],[101,22,89,20],[101,23,89,21],[101,24,89,22],[102,6,90,4],[102,10,90,8,"lim"],[102,13,90,11],[102,16,90,14,"Math"],[102,20,90,18],[102,21,90,19,"floor"],[102,26,90,24],[102,27,90,25],[102,28,90,26,"i"],[102,29,90,27],[102,32,90,30],[102,33,90,31],[102,37,90,35],[102,38,90,36],[102,39,90,37],[103,6,91,4],[103,10,91,8,"a"],[103,11,91,9],[103,14,91,12,"zero"],[103,18,91,16],[104,6,92,4],[104,11,92,9],[104,15,92,13,"m"],[104,16,92,14],[104,19,92,17],[104,20,92,18],[104,22,92,20,"m"],[104,23,92,21],[104,26,92,24,"lim"],[104,29,92,27],[104,31,92,29],[104,33,92,31,"m"],[104,34,92,32],[104,36,92,34],[105,8,93,6,"a"],[105,9,93,7],[105,12,93,10,"plus"],[105,16,93,14],[105,17,93,15,"a"],[105,18,93,16],[105,20,93,18,"times"],[105,25,93,23],[105,26,93,24,"A"],[105,27,93,25],[105,28,93,26,"m"],[105,29,93,27],[105,30,93,28],[105,31,93,29],[105,32,93,30],[105,33,93,31],[105,35,93,33,"A"],[105,36,93,34],[105,37,93,35,"i"],[105,38,93,36],[105,41,93,39,"m"],[105,42,93,40],[105,43,93,41],[105,44,93,42],[105,45,93,43],[105,46,93,44],[105,47,93,45],[105,48,93,46],[106,6,94,4],[107,6,95,4,"a"],[107,7,95,5],[107,10,95,8,"times"],[107,15,95,13],[107,16,95,14,"a"],[107,17,95,15],[107,19,95,17,"two"],[107,22,95,20],[107,23,95,21],[108,6,96,4],[108,10,96,8,"i"],[108,11,96,9],[108,14,96,12],[108,15,96,13],[108,20,96,18],[108,21,96,19],[108,23,96,21,"a"],[108,24,96,22],[108,27,96,25,"plus"],[108,31,96,29],[108,32,96,30,"a"],[108,33,96,31],[108,35,96,33,"times"],[108,40,96,38],[108,41,96,39,"A"],[108,42,96,40],[108,43,96,41,"lim"],[108,46,96,44],[108,47,96,45],[108,48,96,46],[108,49,96,47],[108,50,96,48],[108,52,96,50,"A"],[108,53,96,51],[108,54,96,52,"lim"],[108,57,96,55],[108,58,96,56],[108,59,96,57],[108,60,96,58],[108,61,96,59],[108,62,96,60],[108,63,96,61],[109,6,97,4,"a"],[109,7,97,5],[109,10,97,8,"divide"],[109,16,97,14],[109,17,97,15,"a"],[109,18,97,16],[109,20,97,18,"promote"],[109,27,97,25],[109,28,97,26],[109,30,97,28],[109,31,97,29],[109,34,97,32,"i"],[109,35,97,33],[109,38,97,36],[109,39,97,37],[109,40,97,38],[109,41,97,39],[109,42,97,40],[110,6,98,4],[110,10,98,8,"prefactor"],[110,19,98,17],[110,22,98,20,"divide"],[110,28,98,26],[110,29,98,27,"times"],[110,34,98,32],[110,35,98,33,"A"],[110,36,98,34],[110,37,98,35,"i"],[110,38,98,36],[110,41,98,39],[110,42,98,40],[110,43,98,41],[110,44,98,42],[110,45,98,43],[110,46,98,44],[110,48,98,46,"promote"],[110,55,98,53],[110,56,98,54],[110,57,98,55,"i"],[110,58,98,56],[110,62,98,60],[110,63,98,61],[110,66,98,64,"i"],[110,67,98,65],[110,70,98,68],[110,71,98,69],[110,72,98,70],[110,73,98,71],[110,74,98,72],[110,76,98,74,"two"],[110,79,98,77],[110,80,98,78],[111,6,99,4,"A"],[111,7,99,5],[111,8,99,6,"push"],[111,12,99,10],[111,13,99,11],[111,14,99,12,"a"],[111,15,99,13],[111,17,99,15,"prefactor"],[111,26,99,24],[111,28,99,26,"times"],[111,33,99,31],[111,34,99,32,"prefactor"],[111,43,99,41],[111,45,99,43,"a"],[111,46,99,44],[111,47,99,45],[111,48,99,46],[111,49,99,47],[112,4,100,2],[113,4,101,2],[113,11,101,9,"A"],[113,12,101,10],[113,13,101,11,"half"],[113,17,101,15],[113,18,101,16],[113,19,101,17],[113,20,101,18],[113,21,101,19],[114,2,102,0],[115,0,102,1],[115,3]],"functionMap":{"names":["<global>","factory$argument_2","typed$argument_1.number","_bernoulli$argument_1","_bernoulli$argument_3","_bernoulli$argument_4","_bernoulli$argument_5","typed$argument_1.bigintFraction","typed$argument_1.BigNumber","_bernoulli"],"mappings":"AAA;wECI;YCwC,2BC,MD,eE,eF,EG,eH,EI,eJ,CD;yBMC,mCJ,oBI,iBH,kBG,EF,kBE,ED,kBC,CN;eOC;uCLK,sBK,YJ,kBI,EH,kBG,EF,kBE;KPC;CDE;ASe"},"hasCjsExports":false},"type":"js/module"}]}