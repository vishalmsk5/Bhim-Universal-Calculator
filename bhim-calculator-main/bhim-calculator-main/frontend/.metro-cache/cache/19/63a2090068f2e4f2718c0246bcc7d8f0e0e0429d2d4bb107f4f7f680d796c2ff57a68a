{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo02xDS0\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo02xDS0;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo02xDS0';\n  var dependencies = ['typed', 'equalScalar'];\n  var createMatAlgo02xDS0 = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      equalScalar\n    } = _ref;\n    /**\n     * Iterates over SparseMatrix nonzero items and invokes the callback function f(Dij, Sij).\n     * Callback function invoked NNZ times (number of nonzero items in SparseMatrix).\n     *\n     *\n     *          ┌  f(Dij, Sij)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  0            ; otherwise\n     *\n     *\n     * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n     * @param {Matrix}   sparseMatrix      The SparseMatrix instance (S)\n     * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n     *\n     * @return {Matrix}                    SparseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n     */\n    return function matAlgo02xDS0(denseMatrix, sparseMatrix, callback, inverse) {\n      // dense matrix arrays\n      var adata = denseMatrix._data;\n      var asize = denseMatrix._size;\n      var adt = denseMatrix._datatype || denseMatrix.getDataType();\n      // sparse matrix arrays\n      var bvalues = sparseMatrix._values;\n      var bindex = sparseMatrix._index;\n      var bptr = sparseMatrix._ptr;\n      var bsize = sparseMatrix._size;\n      var bdt = sparseMatrix._datatype || sparseMatrix._data === undefined ? sparseMatrix._datatype : sparseMatrix.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!bvalues) {\n        throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // equal signature to use\n      var eq = equalScalar;\n      // zero value\n      var zero = 0;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        // datatype\n        dt = adt;\n        // find signature that matches (dt, dt)\n        eq = typed.find(equalScalar, [dt, dt]);\n        // convert 0 to the same datatype\n        zero = typed.convert(0, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result (SparseMatrix)\n      var cvalues = [];\n      var cindex = [];\n      var cptr = [];\n\n      // loop columns in b\n      for (var j = 0; j < columns; j++) {\n        // update cptr\n        cptr[j] = cindex.length;\n        // values in column j\n        for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          var i = bindex[k];\n          // update C(i,j)\n          var cij = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n          // check for nonzero\n          if (!eq(cij, zero)) {\n            // push i & v\n            cindex.push(i);\n            cvalues.push(cij);\n          }\n        }\n      }\n      // update cptr\n      cptr[columns] = cindex.length;\n\n      // return sparse matrix\n      return sparseMatrix.createSparseMatrix({\n        values: cvalues,\n        index: cindex,\n        ptr: cptr,\n        size: [rows, columns],\n        datatype: adt === denseMatrix._datatype && bdt === sparseMatrix._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":129,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo02xDS0"],[10,32,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,28,3,26],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,31,4,29],[16,44,4,42],[16,45,4,43],[17,2,5,7],[17,6,5,11,"createMatAlgo02xDS0"],[17,25,5,30],[17,28,5,33],[17,43,5,48],[17,47,5,48,"factory"],[17,62,5,55],[17,63,5,55,"factory"],[17,70,5,55],[17,72,5,56,"name"],[17,76,5,60],[17,78,5,62,"dependencies"],[17,90,5,74],[17,92,5,76,"_ref"],[17,96,5,80],[17,100,5,84],[18,4,6,2],[18,8,6,6],[19,6,7,4,"typed"],[19,11,7,9],[20,6,8,4,"equalScalar"],[21,4,9,2],[21,5,9,3],[21,8,9,6,"_ref"],[21,12,9,10],[22,4,10,2],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,4,29,2],[41,11,29,9],[41,20,29,18,"matAlgo02xDS0"],[41,33,29,31,"matAlgo02xDS0"],[41,34,29,32,"denseMatrix"],[41,45,29,43],[41,47,29,45,"sparseMatrix"],[41,59,29,57],[41,61,29,59,"callback"],[41,69,29,67],[41,71,29,69,"inverse"],[41,78,29,76],[41,80,29,78],[42,6,30,4],[43,6,31,4],[43,10,31,8,"adata"],[43,15,31,13],[43,18,31,16,"denseMatrix"],[43,29,31,27],[43,30,31,28,"_data"],[43,35,31,33],[44,6,32,4],[44,10,32,8,"asize"],[44,15,32,13],[44,18,32,16,"denseMatrix"],[44,29,32,27],[44,30,32,28,"_size"],[44,35,32,33],[45,6,33,4],[45,10,33,8,"adt"],[45,13,33,11],[45,16,33,14,"denseMatrix"],[45,27,33,25],[45,28,33,26,"_datatype"],[45,37,33,35],[45,41,33,39,"denseMatrix"],[45,52,33,50],[45,53,33,51,"getDataType"],[45,64,33,62],[45,65,33,63],[45,66,33,64],[46,6,34,4],[47,6,35,4],[47,10,35,8,"bvalues"],[47,17,35,15],[47,20,35,18,"sparseMatrix"],[47,32,35,30],[47,33,35,31,"_values"],[47,40,35,38],[48,6,36,4],[48,10,36,8,"bindex"],[48,16,36,14],[48,19,36,17,"sparseMatrix"],[48,31,36,29],[48,32,36,30,"_index"],[48,38,36,36],[49,6,37,4],[49,10,37,8,"bptr"],[49,14,37,12],[49,17,37,15,"sparseMatrix"],[49,29,37,27],[49,30,37,28,"_ptr"],[49,34,37,32],[50,6,38,4],[50,10,38,8,"bsize"],[50,15,38,13],[50,18,38,16,"sparseMatrix"],[50,30,38,28],[50,31,38,29,"_size"],[50,36,38,34],[51,6,39,4],[51,10,39,8,"bdt"],[51,13,39,11],[51,16,39,14,"sparseMatrix"],[51,28,39,26],[51,29,39,27,"_datatype"],[51,38,39,36],[51,42,39,40,"sparseMatrix"],[51,54,39,52],[51,55,39,53,"_data"],[51,60,39,58],[51,65,39,63,"undefined"],[51,74,39,72],[51,77,39,75,"sparseMatrix"],[51,89,39,87],[51,90,39,88,"_datatype"],[51,99,39,97],[51,102,39,100,"sparseMatrix"],[51,114,39,112],[51,115,39,113,"getDataType"],[51,126,39,124],[51,127,39,125],[51,128,39,126],[53,6,41,4],[54,6,42,4],[54,10,42,8,"asize"],[54,15,42,13],[54,16,42,14,"length"],[54,22,42,20],[54,27,42,25,"bsize"],[54,32,42,30],[54,33,42,31,"length"],[54,39,42,37],[54,41,42,39],[55,8,43,6],[55,14,43,12],[55,18,43,16,"DimensionError"],[55,40,43,30],[55,41,43,30,"DimensionError"],[55,55,43,30],[55,56,43,31,"asize"],[55,61,43,36],[55,62,43,37,"length"],[55,68,43,43],[55,70,43,45,"bsize"],[55,75,43,50],[55,76,43,51,"length"],[55,82,43,57],[55,83,43,58],[56,6,44,4],[58,6,46,4],[59,6,47,4],[59,10,47,8,"asize"],[59,15,47,13],[59,16,47,14],[59,17,47,15],[59,18,47,16],[59,23,47,21,"bsize"],[59,28,47,26],[59,29,47,27],[59,30,47,28],[59,31,47,29],[59,35,47,33,"asize"],[59,40,47,38],[59,41,47,39],[59,42,47,40],[59,43,47,41],[59,48,47,46,"bsize"],[59,53,47,51],[59,54,47,52],[59,55,47,53],[59,56,47,54],[59,58,47,56],[60,8,48,6],[60,14,48,12],[60,18,48,16,"RangeError"],[60,28,48,26],[60,29,48,27],[60,61,48,59],[60,64,48,62,"asize"],[60,69,48,67],[60,72,48,70],[60,97,48,95],[60,100,48,98,"bsize"],[60,105,48,103],[60,108,48,106],[60,111,48,109],[60,112,48,110],[61,6,49,4],[63,6,51,4],[64,6,52,4],[64,10,52,8],[64,11,52,9,"bvalues"],[64,18,52,16],[64,20,52,18],[65,8,53,6],[65,14,53,12],[65,18,53,16,"Error"],[65,23,53,21],[65,24,53,22],[65,92,53,90],[65,93,53,91],[66,6,54,4],[68,6,56,4],[69,6,57,4],[69,10,57,8,"rows"],[69,14,57,12],[69,17,57,15,"asize"],[69,22,57,20],[69,23,57,21],[69,24,57,22],[69,25,57,23],[70,6,58,4],[70,10,58,8,"columns"],[70,17,58,15],[70,20,58,18,"asize"],[70,25,58,23],[70,26,58,24],[70,27,58,25],[70,28,58,26],[72,6,60,4],[73,6,61,4],[73,10,61,8,"dt"],[73,12,61,10],[74,6,62,4],[75,6,63,4],[75,10,63,8,"eq"],[75,12,63,10],[75,15,63,13,"equalScalar"],[75,26,63,24],[76,6,64,4],[77,6,65,4],[77,10,65,8,"zero"],[77,14,65,12],[77,17,65,15],[77,18,65,16],[78,6,66,4],[79,6,67,4],[79,10,67,8,"cf"],[79,12,67,10],[79,15,67,13,"callback"],[79,23,67,21],[81,6,69,4],[82,6,70,4],[82,10,70,8],[82,17,70,15,"adt"],[82,20,70,18],[82,25,70,23],[82,33,70,31],[82,37,70,35,"adt"],[82,40,70,38],[82,45,70,43,"bdt"],[82,48,70,46],[82,52,70,50,"adt"],[82,55,70,53],[82,60,70,58],[82,67,70,65],[82,69,70,67],[83,8,71,6],[84,8,72,6,"dt"],[84,10,72,8],[84,13,72,11,"adt"],[84,16,72,14],[85,8,73,6],[86,8,74,6,"eq"],[86,10,74,8],[86,13,74,11,"typed"],[86,18,74,16],[86,19,74,17,"find"],[86,23,74,21],[86,24,74,22,"equalScalar"],[86,35,74,33],[86,37,74,35],[86,38,74,36,"dt"],[86,40,74,38],[86,42,74,40,"dt"],[86,44,74,42],[86,45,74,43],[86,46,74,44],[87,8,75,6],[88,8,76,6,"zero"],[88,12,76,10],[88,15,76,13,"typed"],[88,20,76,18],[88,21,76,19,"convert"],[88,28,76,26],[88,29,76,27],[88,30,76,28],[88,32,76,30,"dt"],[88,34,76,32],[88,35,76,33],[89,8,77,6],[90,8,78,6,"cf"],[90,10,78,8],[90,13,78,11,"typed"],[90,18,78,16],[90,19,78,17,"find"],[90,23,78,21],[90,24,78,22,"callback"],[90,32,78,30],[90,34,78,32],[90,35,78,33,"dt"],[90,37,78,35],[90,39,78,37,"dt"],[90,41,78,39],[90,42,78,40],[90,43,78,41],[91,6,79,4],[93,6,81,4],[94,6,82,4],[94,10,82,8,"cvalues"],[94,17,82,15],[94,20,82,18],[94,22,82,20],[95,6,83,4],[95,10,83,8,"cindex"],[95,16,83,14],[95,19,83,17],[95,21,83,19],[96,6,84,4],[96,10,84,8,"cptr"],[96,14,84,12],[96,17,84,15],[96,19,84,17],[98,6,86,4],[99,6,87,4],[99,11,87,9],[99,15,87,13,"j"],[99,16,87,14],[99,19,87,17],[99,20,87,18],[99,22,87,20,"j"],[99,23,87,21],[99,26,87,24,"columns"],[99,33,87,31],[99,35,87,33,"j"],[99,36,87,34],[99,38,87,36],[99,40,87,38],[100,8,88,6],[101,8,89,6,"cptr"],[101,12,89,10],[101,13,89,11,"j"],[101,14,89,12],[101,15,89,13],[101,18,89,16,"cindex"],[101,24,89,22],[101,25,89,23,"length"],[101,31,89,29],[102,8,90,6],[103,8,91,6],[103,13,91,11],[103,17,91,15,"k0"],[103,19,91,17],[103,22,91,20,"bptr"],[103,26,91,24],[103,27,91,25,"j"],[103,28,91,26],[103,29,91,27],[103,31,91,29,"k1"],[103,33,91,31],[103,36,91,34,"bptr"],[103,40,91,38],[103,41,91,39,"j"],[103,42,91,40],[103,45,91,43],[103,46,91,44],[103,47,91,45],[103,49,91,47,"k"],[103,50,91,48],[103,53,91,51,"k0"],[103,55,91,53],[103,57,91,55,"k"],[103,58,91,56],[103,61,91,59,"k1"],[103,63,91,61],[103,65,91,63,"k"],[103,66,91,64],[103,68,91,66],[103,70,91,68],[104,10,92,8],[105,10,93,8],[105,14,93,12,"i"],[105,15,93,13],[105,18,93,16,"bindex"],[105,24,93,22],[105,25,93,23,"k"],[105,26,93,24],[105,27,93,25],[106,10,94,8],[107,10,95,8],[107,14,95,12,"cij"],[107,17,95,15],[107,20,95,18,"inverse"],[107,27,95,25],[107,30,95,28,"cf"],[107,32,95,30],[107,33,95,31,"bvalues"],[107,40,95,38],[107,41,95,39,"k"],[107,42,95,40],[107,43,95,41],[107,45,95,43,"adata"],[107,50,95,48],[107,51,95,49,"i"],[107,52,95,50],[107,53,95,51],[107,54,95,52,"j"],[107,55,95,53],[107,56,95,54],[107,57,95,55],[107,60,95,58,"cf"],[107,62,95,60],[107,63,95,61,"adata"],[107,68,95,66],[107,69,95,67,"i"],[107,70,95,68],[107,71,95,69],[107,72,95,70,"j"],[107,73,95,71],[107,74,95,72],[107,76,95,74,"bvalues"],[107,83,95,81],[107,84,95,82,"k"],[107,85,95,83],[107,86,95,84],[107,87,95,85],[108,10,96,8],[109,10,97,8],[109,14,97,12],[109,15,97,13,"eq"],[109,17,97,15],[109,18,97,16,"cij"],[109,21,97,19],[109,23,97,21,"zero"],[109,27,97,25],[109,28,97,26],[109,30,97,28],[110,12,98,10],[111,12,99,10,"cindex"],[111,18,99,16],[111,19,99,17,"push"],[111,23,99,21],[111,24,99,22,"i"],[111,25,99,23],[111,26,99,24],[112,12,100,10,"cvalues"],[112,19,100,17],[112,20,100,18,"push"],[112,24,100,22],[112,25,100,23,"cij"],[112,28,100,26],[112,29,100,27],[113,10,101,8],[114,8,102,6],[115,6,103,4],[116,6,104,4],[117,6,105,4,"cptr"],[117,10,105,8],[117,11,105,9,"columns"],[117,18,105,16],[117,19,105,17],[117,22,105,20,"cindex"],[117,28,105,26],[117,29,105,27,"length"],[117,35,105,33],[119,6,107,4],[120,6,108,4],[120,13,108,11,"sparseMatrix"],[120,25,108,23],[120,26,108,24,"createSparseMatrix"],[120,44,108,42],[120,45,108,43],[121,8,109,6,"values"],[121,14,109,12],[121,16,109,14,"cvalues"],[121,23,109,21],[122,8,110,6,"index"],[122,13,110,11],[122,15,110,13,"cindex"],[122,21,110,19],[123,8,111,6,"ptr"],[123,11,111,9],[123,13,111,11,"cptr"],[123,17,111,15],[124,8,112,6,"size"],[124,12,112,10],[124,14,112,12],[124,15,112,13,"rows"],[124,19,112,17],[124,21,112,19,"columns"],[124,28,112,26],[124,29,112,27],[125,8,113,6,"datatype"],[125,16,113,14],[125,18,113,16,"adt"],[125,21,113,19],[125,26,113,24,"denseMatrix"],[125,37,113,35],[125,38,113,36,"_datatype"],[125,47,113,45],[125,51,113,49,"bdt"],[125,54,113,52],[125,59,113,57,"sparseMatrix"],[125,71,113,69],[125,72,113,70,"_datatype"],[125,81,113,79],[125,84,113,82,"dt"],[125,86,113,84],[125,89,113,87,"undefined"],[126,6,114,4],[126,7,114,5],[126,8,114,6],[127,4,115,2],[127,5,115,3],[128,2,116,0],[128,3,116,1],[128,4,116,2],[129,0,116,3],[129,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo02xDS0"],"mappings":"AAA;4ECI;SCwB;GDsF;CDC"},"hasCjsExports":false},"type":"js/module"}]}