{"dependencies":[{"name":"../../utils/object.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RQrRGqbksOCD9OzK2x3a4ahzdIU=","exportNames":["*"],"imports":1}},{"name":"../../utils/string.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":47,"index":94}}],"key":"T/CgcIKKhkpXsq2SV9hlw6YQi24=","exportNames":["*"],"imports":1}},{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":95},"end":{"line":3,"column":49,"index":144}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createTrace\", {\n    enumerable: true,\n    get: function () {\n      return createTrace;\n    }\n  });\n  var _utilsObjectJs = require(_dependencyMap[0], \"../../utils/object.js\");\n  var _utilsStringJs = require(_dependencyMap[1], \"../../utils/string.js\");\n  var _utilsFactoryJs = require(_dependencyMap[2], \"../../utils/factory.js\");\n  var name = 'trace';\n  var dependencies = ['typed', 'matrix', 'add'];\n  var createTrace = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      matrix,\n      add\n    } = _ref;\n    /**\n     * Calculate the trace of a matrix: the sum of the elements on the main\n     * diagonal of a square matrix.\n     *\n     * Syntax:\n     *\n     *    math.trace(x)\n     *\n     * Examples:\n     *\n     *    math.trace([[1, 2], [3, 4]]) // returns 5\n     *\n     *    const A = [\n     *      [1, 2, 3],\n     *      [-1, 2, 3],\n     *      [2, 0, 3]\n     *    ]\n     *    math.trace(A) // returns 6\n     *\n     * See also:\n     *\n     *    diag\n     *\n     * @param {Array | Matrix} x  A matrix\n     *\n     * @return {number} The trace of `x`\n     */\n    return typed('trace', {\n      Array: function _arrayTrace(x) {\n        // use dense matrix implementation\n        return _denseTrace(matrix(x));\n      },\n      SparseMatrix: _sparseTrace,\n      DenseMatrix: _denseTrace,\n      any: _utilsObjectJs.clone\n    });\n    function _denseTrace(m) {\n      // matrix size & data\n      var size = m._size;\n      var data = m._data;\n\n      // process dimensions\n      switch (size.length) {\n        case 1:\n          // vector\n          if (size[0] === 1) {\n            // return data[0]\n            return (0, _utilsObjectJs.clone)(data[0]);\n          }\n          throw new RangeError('Matrix must be square (size: ' + (0, _utilsStringJs.format)(size) + ')');\n        case 2:\n          {\n            // two dimensional\n            var rows = size[0];\n            var cols = size[1];\n            if (rows === cols) {\n              // calulate sum\n              var sum = 0;\n              // loop diagonal\n              for (var i = 0; i < rows; i++) {\n                sum = add(sum, data[i][i]);\n              }\n              // return trace\n              return sum;\n            } else {\n              throw new RangeError('Matrix must be square (size: ' + (0, _utilsStringJs.format)(size) + ')');\n            }\n          }\n        default:\n          // multi dimensional\n          throw new RangeError('Matrix must be two dimensional (size: ' + (0, _utilsStringJs.format)(size) + ')');\n      }\n    }\n    function _sparseTrace(m) {\n      // matrix arrays\n      var values = m._values;\n      var index = m._index;\n      var ptr = m._ptr;\n      var size = m._size;\n      // check dimensions\n      var rows = size[0];\n      var columns = size[1];\n      // matrix must be square\n      if (rows === columns) {\n        // calulate sum\n        var sum = 0;\n        // check we have data (avoid looping columns)\n        if (values.length > 0) {\n          // loop columns\n          for (var j = 0; j < columns; j++) {\n            // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n            var k0 = ptr[j];\n            var k1 = ptr[j + 1];\n            // loop k within [k0, k1[\n            for (var k = k0; k < k1; k++) {\n              // row index\n              var i = index[k];\n              // check row\n              if (i === j) {\n                // accumulate value\n                sum = add(sum, values[k]);\n                // exit loop\n                break;\n              }\n              if (i > j) {\n                // exit loop, no value on the diagonal for column j\n                break;\n              }\n            }\n          }\n        }\n        // return trace\n        return sum;\n      }\n      throw new RangeError('Matrix must be square (size: ' + (0, _utilsStringJs.format)(size) + ')');\n    }\n  });\n});","lineCount":141,"map":[[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"createTrace"],[10,24,6,0],[11,4,6,0],[12,2,6,0],[13,2,1,0],[13,6,1,0,"_utilsObjectJs"],[13,20,1,0],[13,23,1,0,"require"],[13,30,1,0],[13,31,1,0,"_dependencyMap"],[13,45,1,0],[14,2,2,0],[14,6,2,0,"_utilsStringJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_utilsFactoryJs"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,4,0],[16,6,4,4,"name"],[16,10,4,8],[16,13,4,11],[16,20,4,18],[17,2,5,0],[17,6,5,4,"dependencies"],[17,18,5,16],[17,21,5,19],[17,22,5,20],[17,29,5,27],[17,31,5,29],[17,39,5,37],[17,41,5,39],[17,46,5,44],[17,47,5,45],[18,2,6,7],[18,6,6,11,"createTrace"],[18,17,6,22],[18,20,6,25],[18,35,6,40],[18,39,6,40,"factory"],[18,54,6,47],[18,55,6,47,"factory"],[18,62,6,47],[18,64,6,48,"name"],[18,68,6,52],[18,70,6,54,"dependencies"],[18,82,6,66],[18,84,6,68,"_ref"],[18,88,6,72],[18,92,6,76],[19,4,7,2],[19,8,7,6],[20,6,8,4,"typed"],[20,11,8,9],[21,6,9,4,"matrix"],[21,12,9,10],[22,6,10,4,"add"],[23,4,11,2],[23,5,11,3],[23,8,11,6,"_ref"],[23,12,11,10],[24,4,12,2],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[49,0,37,0],[50,0,38,0],[51,4,39,2],[51,11,39,9,"typed"],[51,16,39,14],[51,17,39,15],[51,24,39,22],[51,26,39,24],[52,6,40,4,"Array"],[52,11,40,9],[52,13,40,11],[52,22,40,20,"_arrayTrace"],[52,33,40,31,"_arrayTrace"],[52,34,40,32,"x"],[52,35,40,33],[52,37,40,35],[53,8,41,6],[54,8,42,6],[54,15,42,13,"_denseTrace"],[54,26,42,24],[54,27,42,25,"matrix"],[54,33,42,31],[54,34,42,32,"x"],[54,35,42,33],[54,36,42,34],[54,37,42,35],[55,6,43,4],[55,7,43,5],[56,6,44,4,"SparseMatrix"],[56,18,44,16],[56,20,44,18,"_sparseTrace"],[56,32,44,30],[57,6,45,4,"DenseMatrix"],[57,17,45,15],[57,19,45,17,"_denseTrace"],[57,30,45,28],[58,6,46,4,"any"],[58,9,46,7],[58,11,46,9,"clone"],[58,25,46,14],[58,26,46,14,"clone"],[59,4,47,2],[59,5,47,3],[59,6,47,4],[60,4,48,2],[60,13,48,11,"_denseTrace"],[60,24,48,22,"_denseTrace"],[60,25,48,23,"m"],[60,26,48,24],[60,28,48,26],[61,6,49,4],[62,6,50,4],[62,10,50,8,"size"],[62,14,50,12],[62,17,50,15,"m"],[62,18,50,16],[62,19,50,17,"_size"],[62,24,50,22],[63,6,51,4],[63,10,51,8,"data"],[63,14,51,12],[63,17,51,15,"m"],[63,18,51,16],[63,19,51,17,"_data"],[63,24,51,22],[65,6,53,4],[66,6,54,4],[66,14,54,12,"size"],[66,18,54,16],[66,19,54,17,"length"],[66,25,54,23],[67,8,55,6],[67,13,55,11],[67,14,55,12],[68,10,56,8],[69,10,57,8],[69,14,57,12,"size"],[69,18,57,16],[69,19,57,17],[69,20,57,18],[69,21,57,19],[69,26,57,24],[69,27,57,25],[69,29,57,27],[70,12,58,10],[71,12,59,10],[71,19,59,17],[71,23,59,17,"clone"],[71,37,59,22],[71,38,59,22,"clone"],[71,43,59,22],[71,45,59,23,"data"],[71,49,59,27],[71,50,59,28],[71,51,59,29],[71,52,59,30],[71,53,59,31],[72,10,60,8],[73,10,61,8],[73,16,61,14],[73,20,61,18,"RangeError"],[73,30,61,28],[73,31,61,29],[73,62,61,60],[73,65,61,63],[73,69,61,63,"format"],[73,83,61,69],[73,84,61,69,"format"],[73,90,61,69],[73,92,61,70,"size"],[73,96,61,74],[73,97,61,75],[73,100,61,78],[73,103,61,81],[73,104,61,82],[74,8,62,6],[74,13,62,11],[74,14,62,12],[75,10,63,8],[76,12,64,10],[77,12,65,10],[77,16,65,14,"rows"],[77,20,65,18],[77,23,65,21,"size"],[77,27,65,25],[77,28,65,26],[77,29,65,27],[77,30,65,28],[78,12,66,10],[78,16,66,14,"cols"],[78,20,66,18],[78,23,66,21,"size"],[78,27,66,25],[78,28,66,26],[78,29,66,27],[78,30,66,28],[79,12,67,10],[79,16,67,14,"rows"],[79,20,67,18],[79,25,67,23,"cols"],[79,29,67,27],[79,31,67,29],[80,14,68,12],[81,14,69,12],[81,18,69,16,"sum"],[81,21,69,19],[81,24,69,22],[81,25,69,23],[82,14,70,12],[83,14,71,12],[83,19,71,17],[83,23,71,21,"i"],[83,24,71,22],[83,27,71,25],[83,28,71,26],[83,30,71,28,"i"],[83,31,71,29],[83,34,71,32,"rows"],[83,38,71,36],[83,40,71,38,"i"],[83,41,71,39],[83,43,71,41],[83,45,71,43],[84,16,72,14,"sum"],[84,19,72,17],[84,22,72,20,"add"],[84,25,72,23],[84,26,72,24,"sum"],[84,29,72,27],[84,31,72,29,"data"],[84,35,72,33],[84,36,72,34,"i"],[84,37,72,35],[84,38,72,36],[84,39,72,37,"i"],[84,40,72,38],[84,41,72,39],[84,42,72,40],[85,14,73,12],[86,14,74,12],[87,14,75,12],[87,21,75,19,"sum"],[87,24,75,22],[88,12,76,10],[88,13,76,11],[88,19,76,17],[89,14,77,12],[89,20,77,18],[89,24,77,22,"RangeError"],[89,34,77,32],[89,35,77,33],[89,66,77,64],[89,69,77,67],[89,73,77,67,"format"],[89,87,77,73],[89,88,77,73,"format"],[89,94,77,73],[89,96,77,74,"size"],[89,100,77,78],[89,101,77,79],[89,104,77,82],[89,107,77,85],[89,108,77,86],[90,12,78,10],[91,10,79,8],[92,8,80,6],[93,10,81,8],[94,10,82,8],[94,16,82,14],[94,20,82,18,"RangeError"],[94,30,82,28],[94,31,82,29],[94,71,82,69],[94,74,82,72],[94,78,82,72,"format"],[94,92,82,78],[94,93,82,78,"format"],[94,99,82,78],[94,101,82,79,"size"],[94,105,82,83],[94,106,82,84],[94,109,82,87],[94,112,82,90],[94,113,82,91],[95,6,83,4],[96,4,84,2],[97,4,85,2],[97,13,85,11,"_sparseTrace"],[97,25,85,23,"_sparseTrace"],[97,26,85,24,"m"],[97,27,85,25],[97,29,85,27],[98,6,86,4],[99,6,87,4],[99,10,87,8,"values"],[99,16,87,14],[99,19,87,17,"m"],[99,20,87,18],[99,21,87,19,"_values"],[99,28,87,26],[100,6,88,4],[100,10,88,8,"index"],[100,15,88,13],[100,18,88,16,"m"],[100,19,88,17],[100,20,88,18,"_index"],[100,26,88,24],[101,6,89,4],[101,10,89,8,"ptr"],[101,13,89,11],[101,16,89,14,"m"],[101,17,89,15],[101,18,89,16,"_ptr"],[101,22,89,20],[102,6,90,4],[102,10,90,8,"size"],[102,14,90,12],[102,17,90,15,"m"],[102,18,90,16],[102,19,90,17,"_size"],[102,24,90,22],[103,6,91,4],[104,6,92,4],[104,10,92,8,"rows"],[104,14,92,12],[104,17,92,15,"size"],[104,21,92,19],[104,22,92,20],[104,23,92,21],[104,24,92,22],[105,6,93,4],[105,10,93,8,"columns"],[105,17,93,15],[105,20,93,18,"size"],[105,24,93,22],[105,25,93,23],[105,26,93,24],[105,27,93,25],[106,6,94,4],[107,6,95,4],[107,10,95,8,"rows"],[107,14,95,12],[107,19,95,17,"columns"],[107,26,95,24],[107,28,95,26],[108,8,96,6],[109,8,97,6],[109,12,97,10,"sum"],[109,15,97,13],[109,18,97,16],[109,19,97,17],[110,8,98,6],[111,8,99,6],[111,12,99,10,"values"],[111,18,99,16],[111,19,99,17,"length"],[111,25,99,23],[111,28,99,26],[111,29,99,27],[111,31,99,29],[112,10,100,8],[113,10,101,8],[113,15,101,13],[113,19,101,17,"j"],[113,20,101,18],[113,23,101,21],[113,24,101,22],[113,26,101,24,"j"],[113,27,101,25],[113,30,101,28,"columns"],[113,37,101,35],[113,39,101,37,"j"],[113,40,101,38],[113,42,101,40],[113,44,101,42],[114,12,102,10],[115,12,103,10],[115,16,103,14,"k0"],[115,18,103,16],[115,21,103,19,"ptr"],[115,24,103,22],[115,25,103,23,"j"],[115,26,103,24],[115,27,103,25],[116,12,104,10],[116,16,104,14,"k1"],[116,18,104,16],[116,21,104,19,"ptr"],[116,24,104,22],[116,25,104,23,"j"],[116,26,104,24],[116,29,104,27],[116,30,104,28],[116,31,104,29],[117,12,105,10],[118,12,106,10],[118,17,106,15],[118,21,106,19,"k"],[118,22,106,20],[118,25,106,23,"k0"],[118,27,106,25],[118,29,106,27,"k"],[118,30,106,28],[118,33,106,31,"k1"],[118,35,106,33],[118,37,106,35,"k"],[118,38,106,36],[118,40,106,38],[118,42,106,40],[119,14,107,12],[120,14,108,12],[120,18,108,16,"i"],[120,19,108,17],[120,22,108,20,"index"],[120,27,108,25],[120,28,108,26,"k"],[120,29,108,27],[120,30,108,28],[121,14,109,12],[122,14,110,12],[122,18,110,16,"i"],[122,19,110,17],[122,24,110,22,"j"],[122,25,110,23],[122,27,110,25],[123,16,111,14],[124,16,112,14,"sum"],[124,19,112,17],[124,22,112,20,"add"],[124,25,112,23],[124,26,112,24,"sum"],[124,29,112,27],[124,31,112,29,"values"],[124,37,112,35],[124,38,112,36,"k"],[124,39,112,37],[124,40,112,38],[124,41,112,39],[125,16,113,14],[126,16,114,14],[127,14,115,12],[128,14,116,12],[128,18,116,16,"i"],[128,19,116,17],[128,22,116,20,"j"],[128,23,116,21],[128,25,116,23],[129,16,117,14],[130,16,118,14],[131,14,119,12],[132,12,120,10],[133,10,121,8],[134,8,122,6],[135,8,123,6],[136,8,124,6],[136,15,124,13,"sum"],[136,18,124,16],[137,6,125,4],[138,6,126,4],[138,12,126,10],[138,16,126,14,"RangeError"],[138,26,126,24],[138,27,126,25],[138,58,126,56],[138,61,126,59],[138,65,126,59,"format"],[138,79,126,65],[138,80,126,65,"format"],[138,86,126,65],[138,88,126,66,"size"],[138,92,126,70],[138,93,126,71],[138,96,126,74],[138,99,126,77],[138,100,126,78],[139,4,127,2],[140,2,128,0],[140,3,128,1],[140,4,128,2],[141,0,128,3],[141,3]],"functionMap":{"names":["<global>","factory$argument_2","_arrayTrace","_denseTrace","_sparseTrace"],"mappings":"AAA;oECK;WCkC;KDG;EEK;GFoC;EGC;GH0C;CDC"},"hasCjsExports":false},"type":"js/module"}]}