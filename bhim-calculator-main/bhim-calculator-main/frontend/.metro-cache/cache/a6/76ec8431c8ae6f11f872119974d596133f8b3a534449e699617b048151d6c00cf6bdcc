{"dependencies":[{"name":"../../utils/collection.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"fi1hvvRFVO+J7CgKvCdHAHsYQlM=","exportNames":["*"],"imports":1}},{"name":"../../utils/is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":48,"index":105}}],"key":"DL0lZsaza5vr7zl/bAzDYPBSOyA=","exportNames":["*"],"imports":1}},{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":49,"index":155}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}},{"name":"./utils/improveErrorMessage.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":156},"end":{"line":4,"column":69,"index":225}}],"key":"OctJ2iR6C74+6ORuXPT3M8Q90Dc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createVariance\", {\n    enumerable: true,\n    get: function () {\n      return createVariance;\n    }\n  });\n  var _utilsCollectionJs = require(_dependencyMap[0], \"../../utils/collection.js\");\n  var _utilsIsJs = require(_dependencyMap[1], \"../../utils/is.js\");\n  var _utilsFactoryJs = require(_dependencyMap[2], \"../../utils/factory.js\");\n  var _utilsImproveErrorMessageJs = require(_dependencyMap[3], \"./utils/improveErrorMessage.js\");\n  var DEFAULT_NORMALIZATION = 'unbiased';\n  var name = 'variance';\n  var dependencies = ['typed', 'add', 'subtract', 'multiply', 'divide', 'mapSlices', 'isNaN'];\n  var createVariance = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      add,\n      subtract,\n      multiply,\n      divide,\n      mapSlices,\n      isNaN: mathIsNaN\n    } = _ref;\n    /**\n     * Compute the variance of a matrix or a  list with values.\n     * In case of a multidimensional array or matrix, the variance over all\n     * elements will be calculated.\n     *\n     * Additionally, it is possible to compute the variance along the rows\n     * or columns of a matrix by specifying the dimension as the second argument.\n     *\n     * Optionally, the type of normalization can be specified as the final\n     * parameter. The parameter `normalization` can be one of the following values:\n     *\n     * - 'unbiased' (default) The sum of squared errors is divided by (n - 1)\n     * - 'uncorrected'        The sum of squared errors is divided by n\n     * - 'biased'             The sum of squared errors is divided by (n + 1)\n     *\n     *\n     * Note that older browser may not like the variable name `var`. In that\n     * case, the function can be called as `math['var'](...)` instead of\n     * `math.var(...)`.\n     *\n     * Syntax:\n     *\n     *     math.variance(a, b, c, ...)\n     *     math.variance(A)\n     *     math.variance(A, normalization)\n     *     math.variance(A, dimension)\n     *     math.variance(A, dimension, normalization)\n     *\n     * Examples:\n     *\n     *     math.variance(2, 4, 6)                     // returns 4\n     *     math.variance([2, 4, 6, 8])                // returns 6.666666666666667\n     *     math.variance([2, 4, 6, 8], 'uncorrected') // returns 5\n     *     math.variance([2, 4, 6, 8], 'biased')      // returns 4\n     *\n     *     math.variance([[1, 2, 3], [4, 5, 6]])      // returns 3.5\n     *     math.variance([[1, 2, 3], [4, 6, 8]], 0)   // returns [4.5, 8, 12.5]\n     *     math.variance([[1, 2, 3], [4, 6, 8]], 1)   // returns [1, 4]\n     *     math.variance([[1, 2, 3], [4, 6, 8]], 1, 'biased') // returns [0.5, 2]\n     *\n     * See also:\n     *\n     *    mean, median, max, min, prod, std, sum\n     *\n     * @param {Array | Matrix} array\n     *                        A single matrix or or multiple scalar values\n     * @param {string} [normalization='unbiased']\n     *                        Determines how to normalize the variance.\n     *                        Choose 'unbiased' (default), 'uncorrected', or 'biased'.\n     * @param dimension {number | BigNumber}\n     *                        Determines the axis to compute the variance for a matrix\n     * @return {*} The variance\n     */\n    return typed(name, {\n      // variance([a, b, c, d, ...])\n      'Array | Matrix': function Array__Matrix(array) {\n        return _var(array, DEFAULT_NORMALIZATION);\n      },\n      // variance([a, b, c, d, ...], normalization)\n      'Array | Matrix, string': _var,\n      // variance([a, b, c, c, ...], dim)\n      'Array | Matrix, number | BigNumber': function Array__Matrix_number__BigNumber(array, dim) {\n        return _varDim(array, dim, DEFAULT_NORMALIZATION);\n      },\n      // variance([a, b, c, c, ...], dim, normalization)\n      'Array | Matrix, number | BigNumber, string': _varDim,\n      // variance(a, b, c, d, ...)\n      '...': function _(args) {\n        return _var(args, DEFAULT_NORMALIZATION);\n      }\n    });\n\n    /**\n     * Recursively calculate the variance of an n-dimensional array\n     * @param {Array} array\n     * @param {string} normalization\n     *                        Determines how to normalize the variance:\n     *                        - 'unbiased'    The sum of squared errors is divided by (n - 1)\n     *                        - 'uncorrected' The sum of squared errors is divided by n\n     *                        - 'biased'      The sum of squared errors is divided by (n + 1)\n     * @return {number | BigNumber} variance\n     * @private\n     */\n    function _var(array, normalization) {\n      var sum;\n      var num = 0;\n      if (array.length === 0) {\n        throw new SyntaxError('Function variance requires one or more parameters (0 provided)');\n      }\n\n      // calculate the mean and number of elements\n      (0, _utilsCollectionJs.deepForEach)(array, function (value) {\n        try {\n          sum = sum === undefined ? value : add(sum, value);\n          num++;\n        } catch (err) {\n          throw (0, _utilsImproveErrorMessageJs.improveErrorMessage)(err, 'variance', value);\n        }\n      });\n      if (num === 0) throw new Error('Cannot calculate variance of an empty array');\n      var mean = divide(sum, num);\n\n      // calculate the variance\n      sum = undefined;\n      (0, _utilsCollectionJs.deepForEach)(array, function (value) {\n        var diff = subtract(value, mean);\n        sum = sum === undefined ? multiply(diff, diff) : add(sum, multiply(diff, diff));\n      });\n      if (mathIsNaN(sum)) {\n        return sum;\n      }\n      switch (normalization) {\n        case 'uncorrected':\n          return divide(sum, num);\n        case 'biased':\n          return divide(sum, num + 1);\n        case 'unbiased':\n          {\n            var zero = (0, _utilsIsJs.isBigNumber)(sum) ? sum.mul(0) : 0;\n            return num === 1 ? zero : divide(sum, num - 1);\n          }\n        default:\n          throw new Error('Unknown normalization \"' + normalization + '\". ' + 'Choose \"unbiased\" (default), \"uncorrected\", or \"biased\".');\n      }\n    }\n    function _varDim(array, dim, normalization) {\n      try {\n        if (array.length === 0) {\n          throw new SyntaxError('Function variance requires one or more parameters (0 provided)');\n        }\n        return mapSlices(array, dim, x => _var(x, normalization));\n      } catch (err) {\n        throw (0, _utilsImproveErrorMessageJs.improveErrorMessage)(err, 'variance');\n      }\n    }\n  });\n});","lineCount":166,"map":[[7,2,8,0,"Object"],[7,8,8,0],[7,9,8,0,"defineProperty"],[7,23,8,0],[7,24,8,0,"exports"],[7,31,8,0],[8,4,8,0,"enumerable"],[8,14,8,0],[9,4,8,0,"get"],[9,7,8,0],[9,18,8,0,"get"],[9,19,8,0],[10,6,8,0],[10,13,8,0,"createVariance"],[10,27,8,0],[11,4,8,0],[12,2,8,0],[13,2,1,0],[13,6,1,0,"_utilsCollectionJs"],[13,24,1,0],[13,27,1,0,"require"],[13,34,1,0],[13,35,1,0,"_dependencyMap"],[13,49,1,0],[14,2,2,0],[14,6,2,0,"_utilsIsJs"],[14,16,2,0],[14,19,2,0,"require"],[14,26,2,0],[14,27,2,0,"_dependencyMap"],[14,41,2,0],[15,2,3,0],[15,6,3,0,"_utilsFactoryJs"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,4,0],[16,6,4,0,"_utilsImproveErrorMessageJs"],[16,33,4,0],[16,36,4,0,"require"],[16,43,4,0],[16,44,4,0,"_dependencyMap"],[16,58,4,0],[17,2,5,0],[17,6,5,4,"DEFAULT_NORMALIZATION"],[17,27,5,25],[17,30,5,28],[17,40,5,38],[18,2,6,0],[18,6,6,4,"name"],[18,10,6,8],[18,13,6,11],[18,23,6,21],[19,2,7,0],[19,6,7,4,"dependencies"],[19,18,7,16],[19,21,7,19],[19,22,7,20],[19,29,7,27],[19,31,7,29],[19,36,7,34],[19,38,7,36],[19,48,7,46],[19,50,7,48],[19,60,7,58],[19,62,7,60],[19,70,7,68],[19,72,7,70],[19,83,7,81],[19,85,7,83],[19,92,7,90],[19,93,7,91],[20,2,8,7],[20,6,8,11,"createVariance"],[20,20,8,25],[20,23,8,28],[20,38,8,43],[20,42,8,43,"factory"],[20,57,8,50],[20,58,8,50,"factory"],[20,65,8,50],[20,67,8,51,"name"],[20,71,8,55],[20,73,8,57,"dependencies"],[20,85,8,69],[20,87,8,71,"_ref"],[20,91,8,75],[20,95,8,79],[21,4,9,2],[21,8,9,6],[22,6,10,4,"typed"],[22,11,10,9],[23,6,11,4,"add"],[23,9,11,7],[24,6,12,4,"subtract"],[24,14,12,12],[25,6,13,4,"multiply"],[25,14,13,12],[26,6,14,4,"divide"],[26,12,14,10],[27,6,15,4,"mapSlices"],[27,15,15,13],[28,6,16,4,"isNaN"],[28,11,16,9],[28,13,16,11,"mathIsNaN"],[29,4,17,2],[29,5,17,3],[29,8,17,6,"_ref"],[29,12,17,10],[30,4,18,2],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[49,0,37,0],[50,0,38,0],[51,0,39,0],[52,0,40,0],[53,0,41,0],[54,0,42,0],[55,0,43,0],[56,0,44,0],[57,0,45,0],[58,0,46,0],[59,0,47,0],[60,0,48,0],[61,0,49,0],[62,0,50,0],[63,0,51,0],[64,0,52,0],[65,0,53,0],[66,0,54,0],[67,0,55,0],[68,0,56,0],[69,0,57,0],[70,0,58,0],[71,0,59,0],[72,0,60,0],[73,0,61,0],[74,0,62,0],[75,0,63,0],[76,0,64,0],[77,0,65,0],[78,0,66,0],[79,0,67,0],[80,0,68,0],[81,0,69,0],[82,0,70,0],[83,4,71,2],[83,11,71,9,"typed"],[83,16,71,14],[83,17,71,15,"name"],[83,21,71,19],[83,23,71,21],[84,6,72,4],[85,6,73,4],[85,22,73,20],[85,24,73,22],[85,33,73,31,"Array__Matrix"],[85,46,73,44,"Array__Matrix"],[85,47,73,45,"array"],[85,52,73,50],[85,54,73,52],[86,8,74,6],[86,15,74,13,"_var"],[86,19,74,17],[86,20,74,18,"array"],[86,25,74,23],[86,27,74,25,"DEFAULT_NORMALIZATION"],[86,48,74,46],[86,49,74,47],[87,6,75,4],[87,7,75,5],[88,6,76,4],[89,6,77,4],[89,30,77,28],[89,32,77,30,"_var"],[89,36,77,34],[90,6,78,4],[91,6,79,4],[91,42,79,40],[91,44,79,42],[91,53,79,51,"Array__Matrix_number__BigNumber"],[91,84,79,82,"Array__Matrix_number__BigNumber"],[91,85,79,83,"array"],[91,90,79,88],[91,92,79,90,"dim"],[91,95,79,93],[91,97,79,95],[92,8,80,6],[92,15,80,13,"_varDim"],[92,22,80,20],[92,23,80,21,"array"],[92,28,80,26],[92,30,80,28,"dim"],[92,33,80,31],[92,35,80,33,"DEFAULT_NORMALIZATION"],[92,56,80,54],[92,57,80,55],[93,6,81,4],[93,7,81,5],[94,6,82,4],[95,6,83,4],[95,50,83,48],[95,52,83,50,"_varDim"],[95,59,83,57],[96,6,84,4],[97,6,85,4],[97,11,85,9],[97,13,85,11],[97,22,85,20,"_"],[97,23,85,21,"_"],[97,24,85,22,"args"],[97,28,85,26],[97,30,85,28],[98,8,86,6],[98,15,86,13,"_var"],[98,19,86,17],[98,20,86,18,"args"],[98,24,86,22],[98,26,86,24,"DEFAULT_NORMALIZATION"],[98,47,86,45],[98,48,86,46],[99,6,87,4],[100,4,88,2],[100,5,88,3],[100,6,88,4],[102,4,90,2],[103,0,91,0],[104,0,92,0],[105,0,93,0],[106,0,94,0],[107,0,95,0],[108,0,96,0],[109,0,97,0],[110,0,98,0],[111,0,99,0],[112,0,100,0],[113,4,101,2],[113,13,101,11,"_var"],[113,17,101,15,"_var"],[113,18,101,16,"array"],[113,23,101,21],[113,25,101,23,"normalization"],[113,38,101,36],[113,40,101,38],[114,6,102,4],[114,10,102,8,"sum"],[114,13,102,11],[115,6,103,4],[115,10,103,8,"num"],[115,13,103,11],[115,16,103,14],[115,17,103,15],[116,6,104,4],[116,10,104,8,"array"],[116,15,104,13],[116,16,104,14,"length"],[116,22,104,20],[116,27,104,25],[116,28,104,26],[116,30,104,28],[117,8,105,6],[117,14,105,12],[117,18,105,16,"SyntaxError"],[117,29,105,27],[117,30,105,28],[117,94,105,92],[117,95,105,93],[118,6,106,4],[120,6,108,4],[121,6,109,4],[121,10,109,4,"deepForEach"],[121,28,109,15],[121,29,109,15,"deepForEach"],[121,40,109,15],[121,42,109,16,"array"],[121,47,109,21],[121,49,109,23],[121,59,109,33,"value"],[121,64,109,38],[121,66,109,40],[122,8,110,6],[122,12,110,10],[123,10,111,8,"sum"],[123,13,111,11],[123,16,111,14,"sum"],[123,19,111,17],[123,24,111,22,"undefined"],[123,33,111,31],[123,36,111,34,"value"],[123,41,111,39],[123,44,111,42,"add"],[123,47,111,45],[123,48,111,46,"sum"],[123,51,111,49],[123,53,111,51,"value"],[123,58,111,56],[123,59,111,57],[124,10,112,8,"num"],[124,13,112,11],[124,15,112,13],[125,8,113,6],[125,9,113,7],[125,10,113,8],[125,17,113,15,"err"],[125,20,113,18],[125,22,113,20],[126,10,114,8],[126,16,114,14],[126,20,114,14,"improveErrorMessage"],[126,47,114,33],[126,48,114,33,"improveErrorMessage"],[126,67,114,33],[126,69,114,34,"err"],[126,72,114,37],[126,74,114,39],[126,84,114,49],[126,86,114,51,"value"],[126,91,114,56],[126,92,114,57],[127,8,115,6],[128,6,116,4],[128,7,116,5],[128,8,116,6],[129,6,117,4],[129,10,117,8,"num"],[129,13,117,11],[129,18,117,16],[129,19,117,17],[129,21,117,19],[129,27,117,25],[129,31,117,29,"Error"],[129,36,117,34],[129,37,117,35],[129,82,117,80],[129,83,117,81],[130,6,118,4],[130,10,118,8,"mean"],[130,14,118,12],[130,17,118,15,"divide"],[130,23,118,21],[130,24,118,22,"sum"],[130,27,118,25],[130,29,118,27,"num"],[130,32,118,30],[130,33,118,31],[132,6,120,4],[133,6,121,4,"sum"],[133,9,121,7],[133,12,121,10,"undefined"],[133,21,121,19],[134,6,122,4],[134,10,122,4,"deepForEach"],[134,28,122,15],[134,29,122,15,"deepForEach"],[134,40,122,15],[134,42,122,16,"array"],[134,47,122,21],[134,49,122,23],[134,59,122,33,"value"],[134,64,122,38],[134,66,122,40],[135,8,123,6],[135,12,123,10,"diff"],[135,16,123,14],[135,19,123,17,"subtract"],[135,27,123,25],[135,28,123,26,"value"],[135,33,123,31],[135,35,123,33,"mean"],[135,39,123,37],[135,40,123,38],[136,8,124,6,"sum"],[136,11,124,9],[136,14,124,12,"sum"],[136,17,124,15],[136,22,124,20,"undefined"],[136,31,124,29],[136,34,124,32,"multiply"],[136,42,124,40],[136,43,124,41,"diff"],[136,47,124,45],[136,49,124,47,"diff"],[136,53,124,51],[136,54,124,52],[136,57,124,55,"add"],[136,60,124,58],[136,61,124,59,"sum"],[136,64,124,62],[136,66,124,64,"multiply"],[136,74,124,72],[136,75,124,73,"diff"],[136,79,124,77],[136,81,124,79,"diff"],[136,85,124,83],[136,86,124,84],[136,87,124,85],[137,6,125,4],[137,7,125,5],[137,8,125,6],[138,6,126,4],[138,10,126,8,"mathIsNaN"],[138,19,126,17],[138,20,126,18,"sum"],[138,23,126,21],[138,24,126,22],[138,26,126,24],[139,8,127,6],[139,15,127,13,"sum"],[139,18,127,16],[140,6,128,4],[141,6,129,4],[141,14,129,12,"normalization"],[141,27,129,25],[142,8,130,6],[142,13,130,11],[142,26,130,24],[143,10,131,8],[143,17,131,15,"divide"],[143,23,131,21],[143,24,131,22,"sum"],[143,27,131,25],[143,29,131,27,"num"],[143,32,131,30],[143,33,131,31],[144,8,132,6],[144,13,132,11],[144,21,132,19],[145,10,133,8],[145,17,133,15,"divide"],[145,23,133,21],[145,24,133,22,"sum"],[145,27,133,25],[145,29,133,27,"num"],[145,32,133,30],[145,35,133,33],[145,36,133,34],[145,37,133,35],[146,8,134,6],[146,13,134,11],[146,23,134,21],[147,10,135,8],[148,12,136,10],[148,16,136,14,"zero"],[148,20,136,18],[148,23,136,21],[148,27,136,21,"isBigNumber"],[148,37,136,32],[148,38,136,32,"isBigNumber"],[148,49,136,32],[148,51,136,33,"sum"],[148,54,136,36],[148,55,136,37],[148,58,136,40,"sum"],[148,61,136,43],[148,62,136,44,"mul"],[148,65,136,47],[148,66,136,48],[148,67,136,49],[148,68,136,50],[148,71,136,53],[148,72,136,54],[149,12,137,10],[149,19,137,17,"num"],[149,22,137,20],[149,27,137,25],[149,28,137,26],[149,31,137,29,"zero"],[149,35,137,33],[149,38,137,36,"divide"],[149,44,137,42],[149,45,137,43,"sum"],[149,48,137,46],[149,50,137,48,"num"],[149,53,137,51],[149,56,137,54],[149,57,137,55],[149,58,137,56],[150,10,138,8],[151,8,139,6],[152,10,140,8],[152,16,140,14],[152,20,140,18,"Error"],[152,25,140,23],[152,26,140,24],[152,51,140,49],[152,54,140,52,"normalization"],[152,67,140,65],[152,70,140,68],[152,75,140,73],[152,78,140,76],[152,136,140,134],[152,137,140,135],[153,6,141,4],[154,4,142,2],[155,4,143,2],[155,13,143,11,"_varDim"],[155,20,143,18,"_varDim"],[155,21,143,19,"array"],[155,26,143,24],[155,28,143,26,"dim"],[155,31,143,29],[155,33,143,31,"normalization"],[155,46,143,44],[155,48,143,46],[156,6,144,4],[156,10,144,8],[157,8,145,6],[157,12,145,10,"array"],[157,17,145,15],[157,18,145,16,"length"],[157,24,145,22],[157,29,145,27],[157,30,145,28],[157,32,145,30],[158,10,146,8],[158,16,146,14],[158,20,146,18,"SyntaxError"],[158,31,146,29],[158,32,146,30],[158,96,146,94],[158,97,146,95],[159,8,147,6],[160,8,148,6],[160,15,148,13,"mapSlices"],[160,24,148,22],[160,25,148,23,"array"],[160,30,148,28],[160,32,148,30,"dim"],[160,35,148,33],[160,37,148,35,"x"],[160,38,148,36],[160,42,148,40,"_var"],[160,46,148,44],[160,47,148,45,"x"],[160,48,148,46],[160,50,148,48,"normalization"],[160,63,148,61],[160,64,148,62],[160,65,148,63],[161,6,149,4],[161,7,149,5],[161,8,149,6],[161,15,149,13,"err"],[161,18,149,16],[161,20,149,18],[162,8,150,6],[162,14,150,12],[162,18,150,12,"improveErrorMessage"],[162,45,150,31],[162,46,150,31,"improveErrorMessage"],[162,65,150,31],[162,67,150,32,"err"],[162,70,150,35],[162,72,150,37],[162,82,150,47],[162,83,150,48],[163,6,151,4],[164,4,152,2],[165,2,153,0],[165,3,153,1],[165,4,153,2],[166,0,153,3],[166,3]],"functionMap":{"names":["<global>","factory$argument_2","Array__Matrix","Array__Matrix_number__BigNumber","_","_var","deepForEach$argument_1","_varDim","mapSlices$argument_2"],"mappings":"AAA;uECO;sBCiE;KDE;0CEI;KFE;WGI;KHE;EIc;uBCQ;KDO;uBCM;KDG;GJiB;EMC;mCCK,2BD;GNI;CDC"},"hasCjsExports":false},"type":"js/module"}]}