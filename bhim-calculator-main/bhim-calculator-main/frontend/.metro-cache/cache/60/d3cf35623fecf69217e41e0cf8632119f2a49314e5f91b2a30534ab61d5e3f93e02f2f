{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo09xS0Sf\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo09xS0Sf;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo09xS0Sf';\n  var dependencies = ['typed', 'equalScalar'];\n  var createMatAlgo09xS0Sf = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      equalScalar\n    } = _ref;\n    /**\n     * Iterates over SparseMatrix A and invokes the callback function f(Aij, Bij).\n     * Callback function invoked NZA times, number of nonzero elements in A.\n     *\n     *\n     *          ┌  f(Aij, Bij)  ; A(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  0            ; otherwise\n     *\n     *\n     * @param {Matrix}   a                 The SparseMatrix instance (A)\n     * @param {Matrix}   b                 The SparseMatrix instance (B)\n     * @param {Function} callback          The f(Aij,Bij) operation to invoke\n     *\n     * @return {Matrix}                    SparseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n     */\n    return function matAlgo09xS0Sf(a, b, callback) {\n      // sparse matrix arrays\n      var avalues = a._values;\n      var aindex = a._index;\n      var aptr = a._ptr;\n      var asize = a._size;\n      var adt = a._datatype || a._data === undefined ? a._datatype : a.getDataType();\n      // sparse matrix arrays\n      var bvalues = b._values;\n      var bindex = b._index;\n      var bptr = b._ptr;\n      var bsize = b._size;\n      var bdt = b._datatype || b._data === undefined ? b._datatype : b.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // equal signature to use\n      var eq = equalScalar;\n      // zero value\n      var zero = 0;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        // datatype\n        dt = adt;\n        // find signature that matches (dt, dt)\n        eq = typed.find(equalScalar, [dt, dt]);\n        // convert 0 to the same datatype\n        zero = typed.convert(0, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result arrays\n      var cvalues = avalues && bvalues ? [] : undefined;\n      var cindex = [];\n      var cptr = [];\n\n      // workspaces\n      var x = cvalues ? [] : undefined;\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // vars\n      var i, j, k, k0, k1;\n\n      // loop columns\n      for (j = 0; j < columns; j++) {\n        // update cptr\n        cptr[j] = cindex.length;\n        // column mark\n        var mark = j + 1;\n        // check we need to process values\n        if (x) {\n          // loop B(:,j)\n          for (k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n            // row\n            i = bindex[k];\n            // update workspace\n            w[i] = mark;\n            x[i] = bvalues[k];\n          }\n        }\n        // loop A(:,j)\n        for (k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          i = aindex[k];\n          // check we need to process values\n          if (x) {\n            // b value @ i,j\n            var vb = w[i] === mark ? x[i] : zero;\n            // invoke f\n            var vc = cf(avalues[k], vb);\n            // check zero value\n            if (!eq(vc, zero)) {\n              // push index\n              cindex.push(i);\n              // push value\n              cvalues.push(vc);\n            }\n          } else {\n            // push index\n            cindex.push(i);\n          }\n        }\n      }\n      // update cptr\n      cptr[columns] = cindex.length;\n\n      // return sparse matrix\n      return a.createSparseMatrix({\n        values: cvalues,\n        index: cindex,\n        ptr: cptr,\n        size: [rows, columns],\n        datatype: adt === a._datatype && bdt === b._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":155,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo09xS0Sf"],[10,33,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,29,3,27],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,31,4,29],[16,44,4,42],[16,45,4,43],[17,2,5,7],[17,6,5,11,"createMatAlgo09xS0Sf"],[17,26,5,31],[17,29,5,34],[17,44,5,49],[17,48,5,49,"factory"],[17,63,5,56],[17,64,5,56,"factory"],[17,71,5,56],[17,73,5,57,"name"],[17,77,5,61],[17,79,5,63,"dependencies"],[17,91,5,75],[17,93,5,77,"_ref"],[17,97,5,81],[17,101,5,85],[18,4,6,2],[18,8,6,6],[19,6,7,4,"typed"],[19,11,7,9],[20,6,8,4,"equalScalar"],[21,4,9,2],[21,5,9,3],[21,8,9,6,"_ref"],[21,12,9,10],[22,4,10,2],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,4,28,2],[40,11,28,9],[40,20,28,18,"matAlgo09xS0Sf"],[40,34,28,32,"matAlgo09xS0Sf"],[40,35,28,33,"a"],[40,36,28,34],[40,38,28,36,"b"],[40,39,28,37],[40,41,28,39,"callback"],[40,49,28,47],[40,51,28,49],[41,6,29,4],[42,6,30,4],[42,10,30,8,"avalues"],[42,17,30,15],[42,20,30,18,"a"],[42,21,30,19],[42,22,30,20,"_values"],[42,29,30,27],[43,6,31,4],[43,10,31,8,"aindex"],[43,16,31,14],[43,19,31,17,"a"],[43,20,31,18],[43,21,31,19,"_index"],[43,27,31,25],[44,6,32,4],[44,10,32,8,"aptr"],[44,14,32,12],[44,17,32,15,"a"],[44,18,32,16],[44,19,32,17,"_ptr"],[44,23,32,21],[45,6,33,4],[45,10,33,8,"asize"],[45,15,33,13],[45,18,33,16,"a"],[45,19,33,17],[45,20,33,18,"_size"],[45,25,33,23],[46,6,34,4],[46,10,34,8,"adt"],[46,13,34,11],[46,16,34,14,"a"],[46,17,34,15],[46,18,34,16,"_datatype"],[46,27,34,25],[46,31,34,29,"a"],[46,32,34,30],[46,33,34,31,"_data"],[46,38,34,36],[46,43,34,41,"undefined"],[46,52,34,50],[46,55,34,53,"a"],[46,56,34,54],[46,57,34,55,"_datatype"],[46,66,34,64],[46,69,34,67,"a"],[46,70,34,68],[46,71,34,69,"getDataType"],[46,82,34,80],[46,83,34,81],[46,84,34,82],[47,6,35,4],[48,6,36,4],[48,10,36,8,"bvalues"],[48,17,36,15],[48,20,36,18,"b"],[48,21,36,19],[48,22,36,20,"_values"],[48,29,36,27],[49,6,37,4],[49,10,37,8,"bindex"],[49,16,37,14],[49,19,37,17,"b"],[49,20,37,18],[49,21,37,19,"_index"],[49,27,37,25],[50,6,38,4],[50,10,38,8,"bptr"],[50,14,38,12],[50,17,38,15,"b"],[50,18,38,16],[50,19,38,17,"_ptr"],[50,23,38,21],[51,6,39,4],[51,10,39,8,"bsize"],[51,15,39,13],[51,18,39,16,"b"],[51,19,39,17],[51,20,39,18,"_size"],[51,25,39,23],[52,6,40,4],[52,10,40,8,"bdt"],[52,13,40,11],[52,16,40,14,"b"],[52,17,40,15],[52,18,40,16,"_datatype"],[52,27,40,25],[52,31,40,29,"b"],[52,32,40,30],[52,33,40,31,"_data"],[52,38,40,36],[52,43,40,41,"undefined"],[52,52,40,50],[52,55,40,53,"b"],[52,56,40,54],[52,57,40,55,"_datatype"],[52,66,40,64],[52,69,40,67,"b"],[52,70,40,68],[52,71,40,69,"getDataType"],[52,82,40,80],[52,83,40,81],[52,84,40,82],[54,6,42,4],[55,6,43,4],[55,10,43,8,"asize"],[55,15,43,13],[55,16,43,14,"length"],[55,22,43,20],[55,27,43,25,"bsize"],[55,32,43,30],[55,33,43,31,"length"],[55,39,43,37],[55,41,43,39],[56,8,44,6],[56,14,44,12],[56,18,44,16,"DimensionError"],[56,40,44,30],[56,41,44,30,"DimensionError"],[56,55,44,30],[56,56,44,31,"asize"],[56,61,44,36],[56,62,44,37,"length"],[56,68,44,43],[56,70,44,45,"bsize"],[56,75,44,50],[56,76,44,51,"length"],[56,82,44,57],[56,83,44,58],[57,6,45,4],[59,6,47,4],[60,6,48,4],[60,10,48,8,"asize"],[60,15,48,13],[60,16,48,14],[60,17,48,15],[60,18,48,16],[60,23,48,21,"bsize"],[60,28,48,26],[60,29,48,27],[60,30,48,28],[60,31,48,29],[60,35,48,33,"asize"],[60,40,48,38],[60,41,48,39],[60,42,48,40],[60,43,48,41],[60,48,48,46,"bsize"],[60,53,48,51],[60,54,48,52],[60,55,48,53],[60,56,48,54],[60,58,48,56],[61,8,49,6],[61,14,49,12],[61,18,49,16,"RangeError"],[61,28,49,26],[61,29,49,27],[61,61,49,59],[61,64,49,62,"asize"],[61,69,49,67],[61,72,49,70],[61,97,49,95],[61,100,49,98,"bsize"],[61,105,49,103],[61,108,49,106],[61,111,49,109],[61,112,49,110],[62,6,50,4],[64,6,52,4],[65,6,53,4],[65,10,53,8,"rows"],[65,14,53,12],[65,17,53,15,"asize"],[65,22,53,20],[65,23,53,21],[65,24,53,22],[65,25,53,23],[66,6,54,4],[66,10,54,8,"columns"],[66,17,54,15],[66,20,54,18,"asize"],[66,25,54,23],[66,26,54,24],[66,27,54,25],[66,28,54,26],[68,6,56,4],[69,6,57,4],[69,10,57,8,"dt"],[69,12,57,10],[70,6,58,4],[71,6,59,4],[71,10,59,8,"eq"],[71,12,59,10],[71,15,59,13,"equalScalar"],[71,26,59,24],[72,6,60,4],[73,6,61,4],[73,10,61,8,"zero"],[73,14,61,12],[73,17,61,15],[73,18,61,16],[74,6,62,4],[75,6,63,4],[75,10,63,8,"cf"],[75,12,63,10],[75,15,63,13,"callback"],[75,23,63,21],[77,6,65,4],[78,6,66,4],[78,10,66,8],[78,17,66,15,"adt"],[78,20,66,18],[78,25,66,23],[78,33,66,31],[78,37,66,35,"adt"],[78,40,66,38],[78,45,66,43,"bdt"],[78,48,66,46],[78,52,66,50,"adt"],[78,55,66,53],[78,60,66,58],[78,67,66,65],[78,69,66,67],[79,8,67,6],[80,8,68,6,"dt"],[80,10,68,8],[80,13,68,11,"adt"],[80,16,68,14],[81,8,69,6],[82,8,70,6,"eq"],[82,10,70,8],[82,13,70,11,"typed"],[82,18,70,16],[82,19,70,17,"find"],[82,23,70,21],[82,24,70,22,"equalScalar"],[82,35,70,33],[82,37,70,35],[82,38,70,36,"dt"],[82,40,70,38],[82,42,70,40,"dt"],[82,44,70,42],[82,45,70,43],[82,46,70,44],[83,8,71,6],[84,8,72,6,"zero"],[84,12,72,10],[84,15,72,13,"typed"],[84,20,72,18],[84,21,72,19,"convert"],[84,28,72,26],[84,29,72,27],[84,30,72,28],[84,32,72,30,"dt"],[84,34,72,32],[84,35,72,33],[85,8,73,6],[86,8,74,6,"cf"],[86,10,74,8],[86,13,74,11,"typed"],[86,18,74,16],[86,19,74,17,"find"],[86,23,74,21],[86,24,74,22,"callback"],[86,32,74,30],[86,34,74,32],[86,35,74,33,"dt"],[86,37,74,35],[86,39,74,37,"dt"],[86,41,74,39],[86,42,74,40],[86,43,74,41],[87,6,75,4],[89,6,77,4],[90,6,78,4],[90,10,78,8,"cvalues"],[90,17,78,15],[90,20,78,18,"avalues"],[90,27,78,25],[90,31,78,29,"bvalues"],[90,38,78,36],[90,41,78,39],[90,43,78,41],[90,46,78,44,"undefined"],[90,55,78,53],[91,6,79,4],[91,10,79,8,"cindex"],[91,16,79,14],[91,19,79,17],[91,21,79,19],[92,6,80,4],[92,10,80,8,"cptr"],[92,14,80,12],[92,17,80,15],[92,19,80,17],[94,6,82,4],[95,6,83,4],[95,10,83,8,"x"],[95,11,83,9],[95,14,83,12,"cvalues"],[95,21,83,19],[95,24,83,22],[95,26,83,24],[95,29,83,27,"undefined"],[95,38,83,36],[96,6,84,4],[97,6,85,4],[97,10,85,8,"w"],[97,11,85,9],[97,14,85,12],[97,16,85,14],[99,6,87,4],[100,6,88,4],[100,10,88,8,"i"],[100,11,88,9],[100,13,88,11,"j"],[100,14,88,12],[100,16,88,14,"k"],[100,17,88,15],[100,19,88,17,"k0"],[100,21,88,19],[100,23,88,21,"k1"],[100,25,88,23],[102,6,90,4],[103,6,91,4],[103,11,91,9,"j"],[103,12,91,10],[103,15,91,13],[103,16,91,14],[103,18,91,16,"j"],[103,19,91,17],[103,22,91,20,"columns"],[103,29,91,27],[103,31,91,29,"j"],[103,32,91,30],[103,34,91,32],[103,36,91,34],[104,8,92,6],[105,8,93,6,"cptr"],[105,12,93,10],[105,13,93,11,"j"],[105,14,93,12],[105,15,93,13],[105,18,93,16,"cindex"],[105,24,93,22],[105,25,93,23,"length"],[105,31,93,29],[106,8,94,6],[107,8,95,6],[107,12,95,10,"mark"],[107,16,95,14],[107,19,95,17,"j"],[107,20,95,18],[107,23,95,21],[107,24,95,22],[108,8,96,6],[109,8,97,6],[109,12,97,10,"x"],[109,13,97,11],[109,15,97,13],[110,10,98,8],[111,10,99,8],[111,15,99,13,"k0"],[111,17,99,15],[111,20,99,18,"bptr"],[111,24,99,22],[111,25,99,23,"j"],[111,26,99,24],[111,27,99,25],[111,29,99,27,"k1"],[111,31,99,29],[111,34,99,32,"bptr"],[111,38,99,36],[111,39,99,37,"j"],[111,40,99,38],[111,43,99,41],[111,44,99,42],[111,45,99,43],[111,47,99,45,"k"],[111,48,99,46],[111,51,99,49,"k0"],[111,53,99,51],[111,55,99,53,"k"],[111,56,99,54],[111,59,99,57,"k1"],[111,61,99,59],[111,63,99,61,"k"],[111,64,99,62],[111,66,99,64],[111,68,99,66],[112,12,100,10],[113,12,101,10,"i"],[113,13,101,11],[113,16,101,14,"bindex"],[113,22,101,20],[113,23,101,21,"k"],[113,24,101,22],[113,25,101,23],[114,12,102,10],[115,12,103,10,"w"],[115,13,103,11],[115,14,103,12,"i"],[115,15,103,13],[115,16,103,14],[115,19,103,17,"mark"],[115,23,103,21],[116,12,104,10,"x"],[116,13,104,11],[116,14,104,12,"i"],[116,15,104,13],[116,16,104,14],[116,19,104,17,"bvalues"],[116,26,104,24],[116,27,104,25,"k"],[116,28,104,26],[116,29,104,27],[117,10,105,8],[118,8,106,6],[119,8,107,6],[120,8,108,6],[120,13,108,11,"k0"],[120,15,108,13],[120,18,108,16,"aptr"],[120,22,108,20],[120,23,108,21,"j"],[120,24,108,22],[120,25,108,23],[120,27,108,25,"k1"],[120,29,108,27],[120,32,108,30,"aptr"],[120,36,108,34],[120,37,108,35,"j"],[120,38,108,36],[120,41,108,39],[120,42,108,40],[120,43,108,41],[120,45,108,43,"k"],[120,46,108,44],[120,49,108,47,"k0"],[120,51,108,49],[120,53,108,51,"k"],[120,54,108,52],[120,57,108,55,"k1"],[120,59,108,57],[120,61,108,59,"k"],[120,62,108,60],[120,64,108,62],[120,66,108,64],[121,10,109,8],[122,10,110,8,"i"],[122,11,110,9],[122,14,110,12,"aindex"],[122,20,110,18],[122,21,110,19,"k"],[122,22,110,20],[122,23,110,21],[123,10,111,8],[124,10,112,8],[124,14,112,12,"x"],[124,15,112,13],[124,17,112,15],[125,12,113,10],[126,12,114,10],[126,16,114,14,"vb"],[126,18,114,16],[126,21,114,19,"w"],[126,22,114,20],[126,23,114,21,"i"],[126,24,114,22],[126,25,114,23],[126,30,114,28,"mark"],[126,34,114,32],[126,37,114,35,"x"],[126,38,114,36],[126,39,114,37,"i"],[126,40,114,38],[126,41,114,39],[126,44,114,42,"zero"],[126,48,114,46],[127,12,115,10],[128,12,116,10],[128,16,116,14,"vc"],[128,18,116,16],[128,21,116,19,"cf"],[128,23,116,21],[128,24,116,22,"avalues"],[128,31,116,29],[128,32,116,30,"k"],[128,33,116,31],[128,34,116,32],[128,36,116,34,"vb"],[128,38,116,36],[128,39,116,37],[129,12,117,10],[130,12,118,10],[130,16,118,14],[130,17,118,15,"eq"],[130,19,118,17],[130,20,118,18,"vc"],[130,22,118,20],[130,24,118,22,"zero"],[130,28,118,26],[130,29,118,27],[130,31,118,29],[131,14,119,12],[132,14,120,12,"cindex"],[132,20,120,18],[132,21,120,19,"push"],[132,25,120,23],[132,26,120,24,"i"],[132,27,120,25],[132,28,120,26],[133,14,121,12],[134,14,122,12,"cvalues"],[134,21,122,19],[134,22,122,20,"push"],[134,26,122,24],[134,27,122,25,"vc"],[134,29,122,27],[134,30,122,28],[135,12,123,10],[136,10,124,8],[136,11,124,9],[136,17,124,15],[137,12,125,10],[138,12,126,10,"cindex"],[138,18,126,16],[138,19,126,17,"push"],[138,23,126,21],[138,24,126,22,"i"],[138,25,126,23],[138,26,126,24],[139,10,127,8],[140,8,128,6],[141,6,129,4],[142,6,130,4],[143,6,131,4,"cptr"],[143,10,131,8],[143,11,131,9,"columns"],[143,18,131,16],[143,19,131,17],[143,22,131,20,"cindex"],[143,28,131,26],[143,29,131,27,"length"],[143,35,131,33],[145,6,133,4],[146,6,134,4],[146,13,134,11,"a"],[146,14,134,12],[146,15,134,13,"createSparseMatrix"],[146,33,134,31],[146,34,134,32],[147,8,135,6,"values"],[147,14,135,12],[147,16,135,14,"cvalues"],[147,23,135,21],[148,8,136,6,"index"],[148,13,136,11],[148,15,136,13,"cindex"],[148,21,136,19],[149,8,137,6,"ptr"],[149,11,137,9],[149,13,137,11,"cptr"],[149,17,137,15],[150,8,138,6,"size"],[150,12,138,10],[150,14,138,12],[150,15,138,13,"rows"],[150,19,138,17],[150,21,138,19,"columns"],[150,28,138,26],[150,29,138,27],[151,8,139,6,"datatype"],[151,16,139,14],[151,18,139,16,"adt"],[151,21,139,19],[151,26,139,24,"a"],[151,27,139,25],[151,28,139,26,"_datatype"],[151,37,139,35],[151,41,139,39,"bdt"],[151,44,139,42],[151,49,139,47,"b"],[151,50,139,48],[151,51,139,49,"_datatype"],[151,60,139,58],[151,63,139,61,"dt"],[151,65,139,63],[151,68,139,66,"undefined"],[152,6,140,4],[152,7,140,5],[152,8,140,6],[153,4,141,2],[153,5,141,3],[154,2,142,0],[154,3,142,1],[154,4,142,2],[155,0,142,3],[155,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo09xS0Sf"],"mappings":"AAA;6ECI;SCuB;GDiH;CDC"},"hasCjsExports":false},"type":"js/module"}]}