{"dependencies":[{"name":"./csReach.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":183},"end":{"line":4,"column":39,"index":222}}],"key":"CD2JoKmZRVIF1Li0PfrcMsdGhZU=","exportNames":["*"],"imports":1}},{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":223},"end":{"line":5,"column":52,"index":275}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createCsSpsolve\", {\n    enumerable: true,\n    get: function () {\n      return createCsSpsolve;\n    }\n  });\n  var _csReachJs = require(_dependencyMap[0], \"./csReach.js\");\n  var _utilsFactoryJs = require(_dependencyMap[1], \"../../../utils/factory.js\");\n  // Copyright (c) 2006-2024, Timothy A. Davis, All Rights Reserved.\n  // SPDX-License-Identifier: LGPL-2.1+\n  // https://github.com/DrTimothyAldenDavis/SuiteSparse/tree/dev/CSparse/Source\n\n  var name = 'csSpsolve';\n  var dependencies = ['divideScalar', 'multiply', 'subtract'];\n  var createCsSpsolve = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var divideScalar = _ref.divideScalar,\n      multiply = _ref.multiply,\n      subtract = _ref.subtract;\n    /**\n     * The function csSpsolve() computes the solution to G * x = bk, where bk is the\n     * kth column of B. When lo is true, the function assumes G = L is lower triangular with the\n     * diagonal entry as the first entry in each column. When lo is true, the function assumes G = U\n     * is upper triangular with the diagonal entry as the last entry in each column.\n     *\n     * @param {Matrix}  g               The G matrix\n     * @param {Matrix}  b               The B matrix\n     * @param {Number}  k               The kth column in B\n     * @param {Array}   xi              The nonzero pattern xi[top] .. xi[n - 1], an array of size = 2 * n\n     *                                  The first n entries is the nonzero pattern, the last n entries is the stack\n     * @param {Array}   x               The soluton to the linear system G * x = b\n     * @param {Array}   pinv            The inverse row permutation vector, must be null for L * x = b\n     * @param {boolean} lo              The lower (true) upper triangular (false) flag\n     *\n     * @return {Number}                 The index for the nonzero pattern\n     */\n    return function csSpsolve(g, b, k, xi, x, pinv, lo) {\n      // g arrays\n      var gvalues = g._values;\n      var gindex = g._index;\n      var gptr = g._ptr;\n      var gsize = g._size;\n      // columns\n      var n = gsize[1];\n      // b arrays\n      var bvalues = b._values;\n      var bindex = b._index;\n      var bptr = b._ptr;\n      // vars\n      var p, p0, p1, q;\n      // xi[top..n-1] = csReach(B(:,k))\n      var top = (0, _csReachJs.csReach)(g, b, k, xi, pinv);\n      // clear x\n      for (p = top; p < n; p++) {\n        x[xi[p]] = 0;\n      }\n      // scatter b\n      for (p0 = bptr[k], p1 = bptr[k + 1], p = p0; p < p1; p++) {\n        x[bindex[p]] = bvalues[p];\n      }\n      // loop columns\n      for (var px = top; px < n; px++) {\n        // x array index for px\n        var j = xi[px];\n        // apply permutation vector (U x = b), j maps to column J of G\n        var J = pinv ? pinv[j] : j;\n        // check column J is empty\n        if (J < 0) {\n          continue;\n        }\n        // column value indeces in G, p0 <= p < p1\n        p0 = gptr[J];\n        p1 = gptr[J + 1];\n        // x(j) /= G(j,j)\n        x[j] = divideScalar(x[j], gvalues[lo ? p0 : p1 - 1]);\n        // first entry L(j,j)\n        p = lo ? p0 + 1 : p0;\n        q = lo ? p1 : p1 - 1;\n        // loop\n        for (; p < q; p++) {\n          // row\n          var i = gindex[p];\n          // x(i) -= G(i,j) * x(j)\n          x[i] = subtract(x[i], multiply(gvalues[p], x[j]));\n        }\n      }\n      // return top of stack\n      return top;\n    };\n  });\n});","lineCount":96,"map":[[7,2,8,0,"Object"],[7,8,8,0],[7,9,8,0,"defineProperty"],[7,23,8,0],[7,24,8,0,"exports"],[7,31,8,0],[8,4,8,0,"enumerable"],[8,14,8,0],[9,4,8,0,"get"],[9,7,8,0],[9,18,8,0,"get"],[9,19,8,0],[10,6,8,0],[10,13,8,0,"createCsSpsolve"],[10,28,8,0],[11,4,8,0],[12,2,8,0],[13,2,4,0],[13,6,4,0,"_csReachJs"],[13,16,4,0],[13,19,4,0,"require"],[13,26,4,0],[13,27,4,0,"_dependencyMap"],[13,41,4,0],[14,2,5,0],[14,6,5,0,"_utilsFactoryJs"],[14,21,5,0],[14,24,5,0,"require"],[14,31,5,0],[14,32,5,0,"_dependencyMap"],[14,46,5,0],[15,2,1,0],[16,2,2,0],[17,2,3,0],[19,2,6,0],[19,6,6,4,"name"],[19,10,6,8],[19,13,6,11],[19,24,6,22],[20,2,7,0],[20,6,7,4,"dependencies"],[20,18,7,16],[20,21,7,19],[20,22,7,20],[20,36,7,34],[20,38,7,36],[20,48,7,46],[20,50,7,48],[20,60,7,58],[20,61,7,59],[21,2,8,7],[21,6,8,11,"createCsSpsolve"],[21,21,8,26],[21,24,8,29],[21,39,8,44],[21,43,8,44,"factory"],[21,58,8,51],[21,59,8,51,"factory"],[21,66,8,51],[21,68,8,52,"name"],[21,72,8,56],[21,74,8,58,"dependencies"],[21,86,8,70],[21,88,8,72,"_ref"],[21,92,8,76],[21,96,8,80],[22,4,9,2],[22,8,10,4,"divideScalar"],[22,20,10,16],[22,23,13,6,"_ref"],[22,27,13,10],[22,28,10,4,"divideScalar"],[22,40,10,16],[23,6,11,4,"multiply"],[23,14,11,12],[23,17,13,6,"_ref"],[23,21,13,10],[23,22,11,4,"multiply"],[23,30,11,12],[24,6,12,4,"subtract"],[24,14,12,12],[24,17,13,6,"_ref"],[24,21,13,10],[24,22,12,4,"subtract"],[24,30,12,12],[25,4,14,2],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[34,0,23,0],[35,0,24,0],[36,0,25,0],[37,0,26,0],[38,0,27,0],[39,0,28,0],[40,0,29,0],[41,0,30,0],[42,4,31,2],[42,11,31,9],[42,20,31,18,"csSpsolve"],[42,29,31,27,"csSpsolve"],[42,30,31,28,"g"],[42,31,31,29],[42,33,31,31,"b"],[42,34,31,32],[42,36,31,34,"k"],[42,37,31,35],[42,39,31,37,"xi"],[42,41,31,39],[42,43,31,41,"x"],[42,44,31,42],[42,46,31,44,"pinv"],[42,50,31,48],[42,52,31,50,"lo"],[42,54,31,52],[42,56,31,54],[43,6,32,4],[44,6,33,4],[44,10,33,8,"gvalues"],[44,17,33,15],[44,20,33,18,"g"],[44,21,33,19],[44,22,33,20,"_values"],[44,29,33,27],[45,6,34,4],[45,10,34,8,"gindex"],[45,16,34,14],[45,19,34,17,"g"],[45,20,34,18],[45,21,34,19,"_index"],[45,27,34,25],[46,6,35,4],[46,10,35,8,"gptr"],[46,14,35,12],[46,17,35,15,"g"],[46,18,35,16],[46,19,35,17,"_ptr"],[46,23,35,21],[47,6,36,4],[47,10,36,8,"gsize"],[47,15,36,13],[47,18,36,16,"g"],[47,19,36,17],[47,20,36,18,"_size"],[47,25,36,23],[48,6,37,4],[49,6,38,4],[49,10,38,8,"n"],[49,11,38,9],[49,14,38,12,"gsize"],[49,19,38,17],[49,20,38,18],[49,21,38,19],[49,22,38,20],[50,6,39,4],[51,6,40,4],[51,10,40,8,"bvalues"],[51,17,40,15],[51,20,40,18,"b"],[51,21,40,19],[51,22,40,20,"_values"],[51,29,40,27],[52,6,41,4],[52,10,41,8,"bindex"],[52,16,41,14],[52,19,41,17,"b"],[52,20,41,18],[52,21,41,19,"_index"],[52,27,41,25],[53,6,42,4],[53,10,42,8,"bptr"],[53,14,42,12],[53,17,42,15,"b"],[53,18,42,16],[53,19,42,17,"_ptr"],[53,23,42,21],[54,6,43,4],[55,6,44,4],[55,10,44,8,"p"],[55,11,44,9],[55,13,44,11,"p0"],[55,15,44,13],[55,17,44,15,"p1"],[55,19,44,17],[55,21,44,19,"q"],[55,22,44,20],[56,6,45,4],[57,6,46,4],[57,10,46,8,"top"],[57,13,46,11],[57,16,46,14],[57,20,46,14,"csReach"],[57,30,46,21],[57,31,46,21,"csReach"],[57,38,46,21],[57,40,46,22,"g"],[57,41,46,23],[57,43,46,25,"b"],[57,44,46,26],[57,46,46,28,"k"],[57,47,46,29],[57,49,46,31,"xi"],[57,51,46,33],[57,53,46,35,"pinv"],[57,57,46,39],[57,58,46,40],[58,6,47,4],[59,6,48,4],[59,11,48,9,"p"],[59,12,48,10],[59,15,48,13,"top"],[59,18,48,16],[59,20,48,18,"p"],[59,21,48,19],[59,24,48,22,"n"],[59,25,48,23],[59,27,48,25,"p"],[59,28,48,26],[59,30,48,28],[59,32,48,30],[60,8,49,6,"x"],[60,9,49,7],[60,10,49,8,"xi"],[60,12,49,10],[60,13,49,11,"p"],[60,14,49,12],[60,15,49,13],[60,16,49,14],[60,19,49,17],[60,20,49,18],[61,6,50,4],[62,6,51,4],[63,6,52,4],[63,11,52,9,"p0"],[63,13,52,11],[63,16,52,14,"bptr"],[63,20,52,18],[63,21,52,19,"k"],[63,22,52,20],[63,23,52,21],[63,25,52,23,"p1"],[63,27,52,25],[63,30,52,28,"bptr"],[63,34,52,32],[63,35,52,33,"k"],[63,36,52,34],[63,39,52,37],[63,40,52,38],[63,41,52,39],[63,43,52,41,"p"],[63,44,52,42],[63,47,52,45,"p0"],[63,49,52,47],[63,51,52,49,"p"],[63,52,52,50],[63,55,52,53,"p1"],[63,57,52,55],[63,59,52,57,"p"],[63,60,52,58],[63,62,52,60],[63,64,52,62],[64,8,53,6,"x"],[64,9,53,7],[64,10,53,8,"bindex"],[64,16,53,14],[64,17,53,15,"p"],[64,18,53,16],[64,19,53,17],[64,20,53,18],[64,23,53,21,"bvalues"],[64,30,53,28],[64,31,53,29,"p"],[64,32,53,30],[64,33,53,31],[65,6,54,4],[66,6,55,4],[67,6,56,4],[67,11,56,9],[67,15,56,13,"px"],[67,17,56,15],[67,20,56,18,"top"],[67,23,56,21],[67,25,56,23,"px"],[67,27,56,25],[67,30,56,28,"n"],[67,31,56,29],[67,33,56,31,"px"],[67,35,56,33],[67,37,56,35],[67,39,56,37],[68,8,57,6],[69,8,58,6],[69,12,58,10,"j"],[69,13,58,11],[69,16,58,14,"xi"],[69,18,58,16],[69,19,58,17,"px"],[69,21,58,19],[69,22,58,20],[70,8,59,6],[71,8,60,6],[71,12,60,10,"J"],[71,13,60,11],[71,16,60,14,"pinv"],[71,20,60,18],[71,23,60,21,"pinv"],[71,27,60,25],[71,28,60,26,"j"],[71,29,60,27],[71,30,60,28],[71,33,60,31,"j"],[71,34,60,32],[72,8,61,6],[73,8,62,6],[73,12,62,10,"J"],[73,13,62,11],[73,16,62,14],[73,17,62,15],[73,19,62,17],[74,10,63,8],[75,8,64,6],[76,8,65,6],[77,8,66,6,"p0"],[77,10,66,8],[77,13,66,11,"gptr"],[77,17,66,15],[77,18,66,16,"J"],[77,19,66,17],[77,20,66,18],[78,8,67,6,"p1"],[78,10,67,8],[78,13,67,11,"gptr"],[78,17,67,15],[78,18,67,16,"J"],[78,19,67,17],[78,22,67,20],[78,23,67,21],[78,24,67,22],[79,8,68,6],[80,8,69,6,"x"],[80,9,69,7],[80,10,69,8,"j"],[80,11,69,9],[80,12,69,10],[80,15,69,13,"divideScalar"],[80,27,69,25],[80,28,69,26,"x"],[80,29,69,27],[80,30,69,28,"j"],[80,31,69,29],[80,32,69,30],[80,34,69,32,"gvalues"],[80,41,69,39],[80,42,69,40,"lo"],[80,44,69,42],[80,47,69,45,"p0"],[80,49,69,47],[80,52,69,50,"p1"],[80,54,69,52],[80,57,69,55],[80,58,69,56],[80,59,69,57],[80,60,69,58],[81,8,70,6],[82,8,71,6,"p"],[82,9,71,7],[82,12,71,10,"lo"],[82,14,71,12],[82,17,71,15,"p0"],[82,19,71,17],[82,22,71,20],[82,23,71,21],[82,26,71,24,"p0"],[82,28,71,26],[83,8,72,6,"q"],[83,9,72,7],[83,12,72,10,"lo"],[83,14,72,12],[83,17,72,15,"p1"],[83,19,72,17],[83,22,72,20,"p1"],[83,24,72,22],[83,27,72,25],[83,28,72,26],[84,8,73,6],[85,8,74,6],[85,15,74,13,"p"],[85,16,74,14],[85,19,74,17,"q"],[85,20,74,18],[85,22,74,20,"p"],[85,23,74,21],[85,25,74,23],[85,27,74,25],[86,10,75,8],[87,10,76,8],[87,14,76,12,"i"],[87,15,76,13],[87,18,76,16,"gindex"],[87,24,76,22],[87,25,76,23,"p"],[87,26,76,24],[87,27,76,25],[88,10,77,8],[89,10,78,8,"x"],[89,11,78,9],[89,12,78,10,"i"],[89,13,78,11],[89,14,78,12],[89,17,78,15,"subtract"],[89,25,78,23],[89,26,78,24,"x"],[89,27,78,25],[89,28,78,26,"i"],[89,29,78,27],[89,30,78,28],[89,32,78,30,"multiply"],[89,40,78,38],[89,41,78,39,"gvalues"],[89,48,78,46],[89,49,78,47,"p"],[89,50,78,48],[89,51,78,49],[89,53,78,51,"x"],[89,54,78,52],[89,55,78,53,"j"],[89,56,78,54],[89,57,78,55],[89,58,78,56],[89,59,78,57],[90,8,79,6],[91,6,80,4],[92,6,81,4],[93,6,82,4],[93,13,82,11,"top"],[93,16,82,14],[94,4,83,2],[94,5,83,3],[95,2,84,0],[95,3,84,1],[95,4,84,2],[96,0,84,3],[96,3]],"functionMap":{"names":["<global>","factory$argument_2","csSpsolve"],"mappings":"AAA;wECO;SCuB;GDoD;CDC"},"hasCjsExports":false},"type":"js/module"}]}