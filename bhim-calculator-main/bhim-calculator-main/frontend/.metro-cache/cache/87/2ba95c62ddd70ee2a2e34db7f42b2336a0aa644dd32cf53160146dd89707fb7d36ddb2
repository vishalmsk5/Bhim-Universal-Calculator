{"dependencies":[{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createKldivergence\", {\n    enumerable: true,\n    get: function () {\n      return createKldivergence;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../utils/factory.js\");\n  var name = 'kldivergence';\n  var dependencies = ['typed', 'matrix', 'divide', 'sum', 'multiply', 'map', 'dotDivide', 'log', 'isNumeric'];\n  var createKldivergence = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      matrix,\n      divide,\n      sum,\n      multiply,\n      map,\n      dotDivide,\n      log,\n      isNumeric\n    } = _ref;\n    /**\n       * Calculate the Kullback-Leibler (KL) divergence  between two distributions\n       *\n       * Syntax:\n       *\n       *     math.kldivergence(x, y)\n       *\n       * Examples:\n       *\n       *     math.kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])   //returns 0.24376698773121153\n       *\n       *\n       * @param  {Array | Matrix} q    First vector\n       * @param  {Array | Matrix} p    Second vector\n       * @return {number}              Returns distance between q and p\n       */\n    return typed(name, {\n      'Array, Array': function Array_Array(q, p) {\n        return _kldiv(matrix(q), matrix(p));\n      },\n      'Matrix, Array': function Matrix_Array(q, p) {\n        return _kldiv(q, matrix(p));\n      },\n      'Array, Matrix': function Array_Matrix(q, p) {\n        return _kldiv(matrix(q), p);\n      },\n      'Matrix, Matrix': function Matrix_Matrix(q, p) {\n        return _kldiv(q, p);\n      }\n    });\n    function _kldiv(q, p) {\n      var plength = p.size().length;\n      var qlength = q.size().length;\n      if (plength > 1) {\n        throw new Error('first object must be one dimensional');\n      }\n      if (qlength > 1) {\n        throw new Error('second object must be one dimensional');\n      }\n      if (plength !== qlength) {\n        throw new Error('Length of two vectors must be equal');\n      }\n\n      // Before calculation, apply normalization\n      var sumq = sum(q);\n      if (sumq === 0) {\n        throw new Error('Sum of elements in first object must be non zero');\n      }\n      var sump = sum(p);\n      if (sump === 0) {\n        throw new Error('Sum of elements in second object must be non zero');\n      }\n      var qnorm = divide(q, sum(q));\n      var pnorm = divide(p, sum(p));\n      var result = sum(multiply(qnorm, map(dotDivide(qnorm, pnorm), x => log(x))));\n      if (isNumeric(result)) {\n        return result;\n      } else {\n        return Number.NaN;\n      }\n    }\n  });\n});","lineCount":90,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"createKldivergence"],[10,31,4,0],[11,4,4,0],[12,2,4,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,4,"name"],[14,10,2,8],[14,13,2,11],[14,27,2,25],[15,2,3,0],[15,6,3,4,"dependencies"],[15,18,3,16],[15,21,3,19],[15,22,3,20],[15,29,3,27],[15,31,3,29],[15,39,3,37],[15,41,3,39],[15,49,3,47],[15,51,3,49],[15,56,3,54],[15,58,3,56],[15,68,3,66],[15,70,3,68],[15,75,3,73],[15,77,3,75],[15,88,3,86],[15,90,3,88],[15,95,3,93],[15,97,3,95],[15,108,3,106],[15,109,3,107],[16,2,4,7],[16,6,4,11,"createKldivergence"],[16,24,4,29],[16,27,4,32],[16,42,4,47],[16,46,4,47,"factory"],[16,61,4,54],[16,62,4,54,"factory"],[16,69,4,54],[16,71,4,55,"name"],[16,75,4,59],[16,77,4,61,"dependencies"],[16,89,4,73],[16,91,4,75,"_ref"],[16,95,4,79],[16,99,4,83],[17,4,5,2],[17,8,5,6],[18,6,6,4,"typed"],[18,11,6,9],[19,6,7,4,"matrix"],[19,12,7,10],[20,6,8,4,"divide"],[20,12,8,10],[21,6,9,4,"sum"],[21,9,9,7],[22,6,10,4,"multiply"],[22,14,10,12],[23,6,11,4,"map"],[23,9,11,7],[24,6,12,4,"dotDivide"],[24,15,12,13],[25,6,13,4,"log"],[25,9,13,7],[26,6,14,4,"isNumeric"],[27,4,15,2],[27,5,15,3],[27,8,15,6,"_ref"],[27,12,15,10],[28,4,16,2],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,4,32,2],[44,11,32,9,"typed"],[44,16,32,14],[44,17,32,15,"name"],[44,21,32,19],[44,23,32,21],[45,6,33,4],[45,20,33,18],[45,22,33,20],[45,31,33,29,"Array_Array"],[45,42,33,40,"Array_Array"],[45,43,33,41,"q"],[45,44,33,42],[45,46,33,44,"p"],[45,47,33,45],[45,49,33,47],[46,8,34,6],[46,15,34,13,"_kldiv"],[46,21,34,19],[46,22,34,20,"matrix"],[46,28,34,26],[46,29,34,27,"q"],[46,30,34,28],[46,31,34,29],[46,33,34,31,"matrix"],[46,39,34,37],[46,40,34,38,"p"],[46,41,34,39],[46,42,34,40],[46,43,34,41],[47,6,35,4],[47,7,35,5],[48,6,36,4],[48,21,36,19],[48,23,36,21],[48,32,36,30,"Matrix_Array"],[48,44,36,42,"Matrix_Array"],[48,45,36,43,"q"],[48,46,36,44],[48,48,36,46,"p"],[48,49,36,47],[48,51,36,49],[49,8,37,6],[49,15,37,13,"_kldiv"],[49,21,37,19],[49,22,37,20,"q"],[49,23,37,21],[49,25,37,23,"matrix"],[49,31,37,29],[49,32,37,30,"p"],[49,33,37,31],[49,34,37,32],[49,35,37,33],[50,6,38,4],[50,7,38,5],[51,6,39,4],[51,21,39,19],[51,23,39,21],[51,32,39,30,"Array_Matrix"],[51,44,39,42,"Array_Matrix"],[51,45,39,43,"q"],[51,46,39,44],[51,48,39,46,"p"],[51,49,39,47],[51,51,39,49],[52,8,40,6],[52,15,40,13,"_kldiv"],[52,21,40,19],[52,22,40,20,"matrix"],[52,28,40,26],[52,29,40,27,"q"],[52,30,40,28],[52,31,40,29],[52,33,40,31,"p"],[52,34,40,32],[52,35,40,33],[53,6,41,4],[53,7,41,5],[54,6,42,4],[54,22,42,20],[54,24,42,22],[54,33,42,31,"Matrix_Matrix"],[54,46,42,44,"Matrix_Matrix"],[54,47,42,45,"q"],[54,48,42,46],[54,50,42,48,"p"],[54,51,42,49],[54,53,42,51],[55,8,43,6],[55,15,43,13,"_kldiv"],[55,21,43,19],[55,22,43,20,"q"],[55,23,43,21],[55,25,43,23,"p"],[55,26,43,24],[55,27,43,25],[56,6,44,4],[57,4,45,2],[57,5,45,3],[57,6,45,4],[58,4,46,2],[58,13,46,11,"_kldiv"],[58,19,46,17,"_kldiv"],[58,20,46,18,"q"],[58,21,46,19],[58,23,46,21,"p"],[58,24,46,22],[58,26,46,24],[59,6,47,4],[59,10,47,8,"plength"],[59,17,47,15],[59,20,47,18,"p"],[59,21,47,19],[59,22,47,20,"size"],[59,26,47,24],[59,27,47,25],[59,28,47,26],[59,29,47,27,"length"],[59,35,47,33],[60,6,48,4],[60,10,48,8,"qlength"],[60,17,48,15],[60,20,48,18,"q"],[60,21,48,19],[60,22,48,20,"size"],[60,26,48,24],[60,27,48,25],[60,28,48,26],[60,29,48,27,"length"],[60,35,48,33],[61,6,49,4],[61,10,49,8,"plength"],[61,17,49,15],[61,20,49,18],[61,21,49,19],[61,23,49,21],[62,8,50,6],[62,14,50,12],[62,18,50,16,"Error"],[62,23,50,21],[62,24,50,22],[62,62,50,60],[62,63,50,61],[63,6,51,4],[64,6,52,4],[64,10,52,8,"qlength"],[64,17,52,15],[64,20,52,18],[64,21,52,19],[64,23,52,21],[65,8,53,6],[65,14,53,12],[65,18,53,16,"Error"],[65,23,53,21],[65,24,53,22],[65,63,53,61],[65,64,53,62],[66,6,54,4],[67,6,55,4],[67,10,55,8,"plength"],[67,17,55,15],[67,22,55,20,"qlength"],[67,29,55,27],[67,31,55,29],[68,8,56,6],[68,14,56,12],[68,18,56,16,"Error"],[68,23,56,21],[68,24,56,22],[68,61,56,59],[68,62,56,60],[69,6,57,4],[71,6,59,4],[72,6,60,4],[72,10,60,8,"sumq"],[72,14,60,12],[72,17,60,15,"sum"],[72,20,60,18],[72,21,60,19,"q"],[72,22,60,20],[72,23,60,21],[73,6,61,4],[73,10,61,8,"sumq"],[73,14,61,12],[73,19,61,17],[73,20,61,18],[73,22,61,20],[74,8,62,6],[74,14,62,12],[74,18,62,16,"Error"],[74,23,62,21],[74,24,62,22],[74,74,62,72],[74,75,62,73],[75,6,63,4],[76,6,64,4],[76,10,64,8,"sump"],[76,14,64,12],[76,17,64,15,"sum"],[76,20,64,18],[76,21,64,19,"p"],[76,22,64,20],[76,23,64,21],[77,6,65,4],[77,10,65,8,"sump"],[77,14,65,12],[77,19,65,17],[77,20,65,18],[77,22,65,20],[78,8,66,6],[78,14,66,12],[78,18,66,16,"Error"],[78,23,66,21],[78,24,66,22],[78,75,66,73],[78,76,66,74],[79,6,67,4],[80,6,68,4],[80,10,68,8,"qnorm"],[80,15,68,13],[80,18,68,16,"divide"],[80,24,68,22],[80,25,68,23,"q"],[80,26,68,24],[80,28,68,26,"sum"],[80,31,68,29],[80,32,68,30,"q"],[80,33,68,31],[80,34,68,32],[80,35,68,33],[81,6,69,4],[81,10,69,8,"pnorm"],[81,15,69,13],[81,18,69,16,"divide"],[81,24,69,22],[81,25,69,23,"p"],[81,26,69,24],[81,28,69,26,"sum"],[81,31,69,29],[81,32,69,30,"p"],[81,33,69,31],[81,34,69,32],[81,35,69,33],[82,6,70,4],[82,10,70,8,"result"],[82,16,70,14],[82,19,70,17,"sum"],[82,22,70,20],[82,23,70,21,"multiply"],[82,31,70,29],[82,32,70,30,"qnorm"],[82,37,70,35],[82,39,70,37,"map"],[82,42,70,40],[82,43,70,41,"dotDivide"],[82,52,70,50],[82,53,70,51,"qnorm"],[82,58,70,56],[82,60,70,58,"pnorm"],[82,65,70,63],[82,66,70,64],[82,68,70,66,"x"],[82,69,70,67],[82,73,70,71,"log"],[82,76,70,74],[82,77,70,75,"x"],[82,78,70,76],[82,79,70,77],[82,80,70,78],[82,81,70,79],[82,82,70,80],[83,6,71,4],[83,10,71,8,"isNumeric"],[83,19,71,17],[83,20,71,18,"result"],[83,26,71,24],[83,27,71,25],[83,29,71,27],[84,8,72,6],[84,15,72,13,"result"],[84,21,72,19],[85,6,73,4],[85,7,73,5],[85,13,73,11],[86,8,74,6],[86,15,74,13,"Number"],[86,21,74,19],[86,22,74,20,"NaN"],[86,25,74,23],[87,6,75,4],[88,4,76,2],[89,2,77,0],[89,3,77,1],[89,4,77,2],[90,0,77,3],[90,3]],"functionMap":{"names":["<global>","factory$argument_2","Array_Array","Matrix_Array","Array_Matrix","Matrix_Matrix","_kldiv","map$argument_1"],"mappings":"AAA;2ECG;oBC6B;KDE;qBEC;KFE;qBGC;KHE;sBIC;KJE;EKE;kECwB,WD;GLM;CDC"},"hasCjsExports":false},"type":"js/module"}]}