{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":183},"end":{"line":4,"column":52,"index":235}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"./csLeaf.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":236},"end":{"line":5,"column":37,"index":273}}],"key":"h4N+tq5F4y6fS/gShxChtx2Sat4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createCsCounts\", {\n    enumerable: true,\n    get: function () {\n      return createCsCounts;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _csLeafJs = require(_dependencyMap[1], \"./csLeaf.js\");\n  // Copyright (c) 2006-2024, Timothy A. Davis, All Rights Reserved.\n  // SPDX-License-Identifier: LGPL-2.1+\n  // https://github.com/DrTimothyAldenDavis/SuiteSparse/tree/dev/CSparse/Source\n\n  var name = 'csCounts';\n  var dependencies = ['transpose'];\n  var createCsCounts = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      transpose\n    } = _ref;\n    /**\n     * Computes the column counts using the upper triangular part of A.\n     * It transposes A internally, none of the input parameters are modified.\n     *\n     * @param {Matrix} a           The sparse matrix A\n     *\n     * @param {Matrix} ata         Count the columns of A'A instead\n     *\n     * @return                     An array of size n of the column counts or null on error\n     */\n    return function (a, parent, post, ata) {\n      // check inputs\n      if (!a || !parent || !post) {\n        return null;\n      }\n      // a matrix arrays\n      var asize = a._size;\n      // rows and columns\n      var m = asize[0];\n      var n = asize[1];\n      // variables\n      var i, j, k, J, p, p0, p1;\n\n      // workspace size\n      var s = 4 * n + (ata ? n + m + 1 : 0);\n      // allocate workspace\n      var w = []; // (s)\n      var ancestor = 0; // first n entries\n      var maxfirst = n; // next n entries\n      var prevleaf = 2 * n; // next n entries\n      var first = 3 * n; // next n entries\n      var head = 4 * n; // next n + 1 entries (used when ata is true)\n      var next = 5 * n + 1; // last entries in workspace\n      // clear workspace w[0..s-1]\n      for (k = 0; k < s; k++) {\n        w[k] = -1;\n      }\n\n      // allocate result\n      var colcount = []; // (n)\n\n      // AT = A'\n      var at = transpose(a);\n      // at arrays\n      var tindex = at._index;\n      var tptr = at._ptr;\n\n      // find w[first + j]\n      for (k = 0; k < n; k++) {\n        j = post[k];\n        // colcount[j]=1 if j is a leaf\n        colcount[j] = w[first + j] === -1 ? 1 : 0;\n        for (; j !== -1 && w[first + j] === -1; j = parent[j]) {\n          w[first + j] = k;\n        }\n      }\n\n      // initialize ata if needed\n      if (ata) {\n        // invert post\n        for (k = 0; k < n; k++) {\n          w[post[k]] = k;\n        }\n        // loop rows (columns in AT)\n        for (i = 0; i < m; i++) {\n          // values in column i of AT\n          for (k = n, p0 = tptr[i], p1 = tptr[i + 1], p = p0; p < p1; p++) {\n            k = Math.min(k, w[tindex[p]]);\n          }\n          // place row i in linked list k\n          w[next + i] = w[head + k];\n          w[head + k] = i;\n        }\n      }\n\n      // each node in its own set\n      for (i = 0; i < n; i++) {\n        w[ancestor + i] = i;\n      }\n      for (k = 0; k < n; k++) {\n        // j is the kth node in postordered etree\n        j = post[k];\n        // check j is not a root\n        if (parent[j] !== -1) {\n          colcount[parent[j]]--;\n        }\n\n        // J=j for LL'=A case\n        for (J = ata ? w[head + k] : j; J !== -1; J = ata ? w[next + J] : -1) {\n          for (p = tptr[J]; p < tptr[J + 1]; p++) {\n            i = tindex[p];\n            var r = (0, _csLeafJs.csLeaf)(i, j, w, first, maxfirst, prevleaf, ancestor);\n            // check A(i,j) is in skeleton\n            if (r.jleaf >= 1) {\n              colcount[j]++;\n            }\n            // check account for overlap in q\n            if (r.jleaf === 2) {\n              colcount[r.q]--;\n            }\n          }\n        }\n        if (parent[j] !== -1) {\n          w[ancestor + j] = parent[j];\n        }\n      }\n      // sum up colcount's of each child\n      for (j = 0; j < n; j++) {\n        if (parent[j] !== -1) {\n          colcount[parent[j]] += colcount[j];\n        }\n      }\n      return colcount;\n    };\n  });\n});","lineCount":140,"map":[[7,2,8,0,"Object"],[7,8,8,0],[7,9,8,0,"defineProperty"],[7,23,8,0],[7,24,8,0,"exports"],[7,31,8,0],[8,4,8,0,"enumerable"],[8,14,8,0],[9,4,8,0,"get"],[9,7,8,0],[9,18,8,0,"get"],[9,19,8,0],[10,6,8,0],[10,13,8,0,"createCsCounts"],[10,27,8,0],[11,4,8,0],[12,2,8,0],[13,2,4,0],[13,6,4,0,"_utilsFactoryJs"],[13,21,4,0],[13,24,4,0,"require"],[13,31,4,0],[13,32,4,0,"_dependencyMap"],[13,46,4,0],[14,2,5,0],[14,6,5,0,"_csLeafJs"],[14,15,5,0],[14,18,5,0,"require"],[14,25,5,0],[14,26,5,0,"_dependencyMap"],[14,40,5,0],[15,2,1,0],[16,2,2,0],[17,2,3,0],[19,2,6,0],[19,6,6,4,"name"],[19,10,6,8],[19,13,6,11],[19,23,6,21],[20,2,7,0],[20,6,7,4,"dependencies"],[20,18,7,16],[20,21,7,19],[20,22,7,20],[20,33,7,31],[20,34,7,32],[21,2,8,7],[21,6,8,11,"createCsCounts"],[21,20,8,25],[21,23,8,28],[21,38,8,43],[21,42,8,43,"factory"],[21,57,8,50],[21,58,8,50,"factory"],[21,65,8,50],[21,67,8,51,"name"],[21,71,8,55],[21,73,8,57,"dependencies"],[21,85,8,69],[21,87,8,71,"_ref"],[21,91,8,75],[21,95,8,79],[22,4,9,2],[22,8,9,6],[23,6,10,4,"transpose"],[24,4,11,2],[24,5,11,3],[24,8,11,6,"_ref"],[24,12,11,10],[25,4,12,2],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[30,0,17,0],[31,0,18,0],[32,0,19,0],[33,0,20,0],[34,0,21,0],[35,4,22,2],[35,11,22,9],[35,21,22,19,"a"],[35,22,22,20],[35,24,22,22,"parent"],[35,30,22,28],[35,32,22,30,"post"],[35,36,22,34],[35,38,22,36,"ata"],[35,41,22,39],[35,43,22,41],[36,6,23,4],[37,6,24,4],[37,10,24,8],[37,11,24,9,"a"],[37,12,24,10],[37,16,24,14],[37,17,24,15,"parent"],[37,23,24,21],[37,27,24,25],[37,28,24,26,"post"],[37,32,24,30],[37,34,24,32],[38,8,25,6],[38,15,25,13],[38,19,25,17],[39,6,26,4],[40,6,27,4],[41,6,28,4],[41,10,28,8,"asize"],[41,15,28,13],[41,18,28,16,"a"],[41,19,28,17],[41,20,28,18,"_size"],[41,25,28,23],[42,6,29,4],[43,6,30,4],[43,10,30,8,"m"],[43,11,30,9],[43,14,30,12,"asize"],[43,19,30,17],[43,20,30,18],[43,21,30,19],[43,22,30,20],[44,6,31,4],[44,10,31,8,"n"],[44,11,31,9],[44,14,31,12,"asize"],[44,19,31,17],[44,20,31,18],[44,21,31,19],[44,22,31,20],[45,6,32,4],[46,6,33,4],[46,10,33,8,"i"],[46,11,33,9],[46,13,33,11,"j"],[46,14,33,12],[46,16,33,14,"k"],[46,17,33,15],[46,19,33,17,"J"],[46,20,33,18],[46,22,33,20,"p"],[46,23,33,21],[46,25,33,23,"p0"],[46,27,33,25],[46,29,33,27,"p1"],[46,31,33,29],[48,6,35,4],[49,6,36,4],[49,10,36,8,"s"],[49,11,36,9],[49,14,36,12],[49,15,36,13],[49,18,36,16,"n"],[49,19,36,17],[49,23,36,21,"ata"],[49,26,36,24],[49,29,36,27,"n"],[49,30,36,28],[49,33,36,31,"m"],[49,34,36,32],[49,37,36,35],[49,38,36,36],[49,41,36,39],[49,42,36,40],[49,43,36,41],[50,6,37,4],[51,6,38,4],[51,10,38,8,"w"],[51,11,38,9],[51,14,38,12],[51,16,38,14],[51,17,38,15],[51,18,38,16],[52,6,39,4],[52,10,39,8,"ancestor"],[52,18,39,16],[52,21,39,19],[52,22,39,20],[52,23,39,21],[52,24,39,22],[53,6,40,4],[53,10,40,8,"maxfirst"],[53,18,40,16],[53,21,40,19,"n"],[53,22,40,20],[53,23,40,21],[53,24,40,22],[54,6,41,4],[54,10,41,8,"prevleaf"],[54,18,41,16],[54,21,41,19],[54,22,41,20],[54,25,41,23,"n"],[54,26,41,24],[54,27,41,25],[54,28,41,26],[55,6,42,4],[55,10,42,8,"first"],[55,15,42,13],[55,18,42,16],[55,19,42,17],[55,22,42,20,"n"],[55,23,42,21],[55,24,42,22],[55,25,42,23],[56,6,43,4],[56,10,43,8,"head"],[56,14,43,12],[56,17,43,15],[56,18,43,16],[56,21,43,19,"n"],[56,22,43,20],[56,23,43,21],[56,24,43,22],[57,6,44,4],[57,10,44,8,"next"],[57,14,44,12],[57,17,44,15],[57,18,44,16],[57,21,44,19,"n"],[57,22,44,20],[57,25,44,23],[57,26,44,24],[57,27,44,25],[57,28,44,26],[58,6,45,4],[59,6,46,4],[59,11,46,9,"k"],[59,12,46,10],[59,15,46,13],[59,16,46,14],[59,18,46,16,"k"],[59,19,46,17],[59,22,46,20,"s"],[59,23,46,21],[59,25,46,23,"k"],[59,26,46,24],[59,28,46,26],[59,30,46,28],[60,8,47,6,"w"],[60,9,47,7],[60,10,47,8,"k"],[60,11,47,9],[60,12,47,10],[60,15,47,13],[60,16,47,14],[60,17,47,15],[61,6,48,4],[63,6,50,4],[64,6,51,4],[64,10,51,8,"colcount"],[64,18,51,16],[64,21,51,19],[64,23,51,21],[64,24,51,22],[64,25,51,23],[66,6,53,4],[67,6,54,4],[67,10,54,8,"at"],[67,12,54,10],[67,15,54,13,"transpose"],[67,24,54,22],[67,25,54,23,"a"],[67,26,54,24],[67,27,54,25],[68,6,55,4],[69,6,56,4],[69,10,56,8,"tindex"],[69,16,56,14],[69,19,56,17,"at"],[69,21,56,19],[69,22,56,20,"_index"],[69,28,56,26],[70,6,57,4],[70,10,57,8,"tptr"],[70,14,57,12],[70,17,57,15,"at"],[70,19,57,17],[70,20,57,18,"_ptr"],[70,24,57,22],[72,6,59,4],[73,6,60,4],[73,11,60,9,"k"],[73,12,60,10],[73,15,60,13],[73,16,60,14],[73,18,60,16,"k"],[73,19,60,17],[73,22,60,20,"n"],[73,23,60,21],[73,25,60,23,"k"],[73,26,60,24],[73,28,60,26],[73,30,60,28],[74,8,61,6,"j"],[74,9,61,7],[74,12,61,10,"post"],[74,16,61,14],[74,17,61,15,"k"],[74,18,61,16],[74,19,61,17],[75,8,62,6],[76,8,63,6,"colcount"],[76,16,63,14],[76,17,63,15,"j"],[76,18,63,16],[76,19,63,17],[76,22,63,20,"w"],[76,23,63,21],[76,24,63,22,"first"],[76,29,63,27],[76,32,63,30,"j"],[76,33,63,31],[76,34,63,32],[76,39,63,37],[76,40,63,38],[76,41,63,39],[76,44,63,42],[76,45,63,43],[76,48,63,46],[76,49,63,47],[77,8,64,6],[77,15,64,13,"j"],[77,16,64,14],[77,21,64,19],[77,22,64,20],[77,23,64,21],[77,27,64,25,"w"],[77,28,64,26],[77,29,64,27,"first"],[77,34,64,32],[77,37,64,35,"j"],[77,38,64,36],[77,39,64,37],[77,44,64,42],[77,45,64,43],[77,46,64,44],[77,48,64,46,"j"],[77,49,64,47],[77,52,64,50,"parent"],[77,58,64,56],[77,59,64,57,"j"],[77,60,64,58],[77,61,64,59],[77,63,64,61],[78,10,65,8,"w"],[78,11,65,9],[78,12,65,10,"first"],[78,17,65,15],[78,20,65,18,"j"],[78,21,65,19],[78,22,65,20],[78,25,65,23,"k"],[78,26,65,24],[79,8,66,6],[80,6,67,4],[82,6,69,4],[83,6,70,4],[83,10,70,8,"ata"],[83,13,70,11],[83,15,70,13],[84,8,71,6],[85,8,72,6],[85,13,72,11,"k"],[85,14,72,12],[85,17,72,15],[85,18,72,16],[85,20,72,18,"k"],[85,21,72,19],[85,24,72,22,"n"],[85,25,72,23],[85,27,72,25,"k"],[85,28,72,26],[85,30,72,28],[85,32,72,30],[86,10,73,8,"w"],[86,11,73,9],[86,12,73,10,"post"],[86,16,73,14],[86,17,73,15,"k"],[86,18,73,16],[86,19,73,17],[86,20,73,18],[86,23,73,21,"k"],[86,24,73,22],[87,8,74,6],[88,8,75,6],[89,8,76,6],[89,13,76,11,"i"],[89,14,76,12],[89,17,76,15],[89,18,76,16],[89,20,76,18,"i"],[89,21,76,19],[89,24,76,22,"m"],[89,25,76,23],[89,27,76,25,"i"],[89,28,76,26],[89,30,76,28],[89,32,76,30],[90,10,77,8],[91,10,78,8],[91,15,78,13,"k"],[91,16,78,14],[91,19,78,17,"n"],[91,20,78,18],[91,22,78,20,"p0"],[91,24,78,22],[91,27,78,25,"tptr"],[91,31,78,29],[91,32,78,30,"i"],[91,33,78,31],[91,34,78,32],[91,36,78,34,"p1"],[91,38,78,36],[91,41,78,39,"tptr"],[91,45,78,43],[91,46,78,44,"i"],[91,47,78,45],[91,50,78,48],[91,51,78,49],[91,52,78,50],[91,54,78,52,"p"],[91,55,78,53],[91,58,78,56,"p0"],[91,60,78,58],[91,62,78,60,"p"],[91,63,78,61],[91,66,78,64,"p1"],[91,68,78,66],[91,70,78,68,"p"],[91,71,78,69],[91,73,78,71],[91,75,78,73],[92,12,79,10,"k"],[92,13,79,11],[92,16,79,14,"Math"],[92,20,79,18],[92,21,79,19,"min"],[92,24,79,22],[92,25,79,23,"k"],[92,26,79,24],[92,28,79,26,"w"],[92,29,79,27],[92,30,79,28,"tindex"],[92,36,79,34],[92,37,79,35,"p"],[92,38,79,36],[92,39,79,37],[92,40,79,38],[92,41,79,39],[93,10,80,8],[94,10,81,8],[95,10,82,8,"w"],[95,11,82,9],[95,12,82,10,"next"],[95,16,82,14],[95,19,82,17,"i"],[95,20,82,18],[95,21,82,19],[95,24,82,22,"w"],[95,25,82,23],[95,26,82,24,"head"],[95,30,82,28],[95,33,82,31,"k"],[95,34,82,32],[95,35,82,33],[96,10,83,8,"w"],[96,11,83,9],[96,12,83,10,"head"],[96,16,83,14],[96,19,83,17,"k"],[96,20,83,18],[96,21,83,19],[96,24,83,22,"i"],[96,25,83,23],[97,8,84,6],[98,6,85,4],[100,6,87,4],[101,6,88,4],[101,11,88,9,"i"],[101,12,88,10],[101,15,88,13],[101,16,88,14],[101,18,88,16,"i"],[101,19,88,17],[101,22,88,20,"n"],[101,23,88,21],[101,25,88,23,"i"],[101,26,88,24],[101,28,88,26],[101,30,88,28],[102,8,89,6,"w"],[102,9,89,7],[102,10,89,8,"ancestor"],[102,18,89,16],[102,21,89,19,"i"],[102,22,89,20],[102,23,89,21],[102,26,89,24,"i"],[102,27,89,25],[103,6,90,4],[104,6,91,4],[104,11,91,9,"k"],[104,12,91,10],[104,15,91,13],[104,16,91,14],[104,18,91,16,"k"],[104,19,91,17],[104,22,91,20,"n"],[104,23,91,21],[104,25,91,23,"k"],[104,26,91,24],[104,28,91,26],[104,30,91,28],[105,8,92,6],[106,8,93,6,"j"],[106,9,93,7],[106,12,93,10,"post"],[106,16,93,14],[106,17,93,15,"k"],[106,18,93,16],[106,19,93,17],[107,8,94,6],[108,8,95,6],[108,12,95,10,"parent"],[108,18,95,16],[108,19,95,17,"j"],[108,20,95,18],[108,21,95,19],[108,26,95,24],[108,27,95,25],[108,28,95,26],[108,30,95,28],[109,10,96,8,"colcount"],[109,18,96,16],[109,19,96,17,"parent"],[109,25,96,23],[109,26,96,24,"j"],[109,27,96,25],[109,28,96,26],[109,29,96,27],[109,31,96,29],[110,8,97,6],[112,8,99,6],[113,8,100,6],[113,13,100,11,"J"],[113,14,100,12],[113,17,100,15,"ata"],[113,20,100,18],[113,23,100,21,"w"],[113,24,100,22],[113,25,100,23,"head"],[113,29,100,27],[113,32,100,30,"k"],[113,33,100,31],[113,34,100,32],[113,37,100,35,"j"],[113,38,100,36],[113,40,100,38,"J"],[113,41,100,39],[113,46,100,44],[113,47,100,45],[113,48,100,46],[113,50,100,48,"J"],[113,51,100,49],[113,54,100,52,"ata"],[113,57,100,55],[113,60,100,58,"w"],[113,61,100,59],[113,62,100,60,"next"],[113,66,100,64],[113,69,100,67,"J"],[113,70,100,68],[113,71,100,69],[113,74,100,72],[113,75,100,73],[113,76,100,74],[113,78,100,76],[114,10,101,8],[114,15,101,13,"p"],[114,16,101,14],[114,19,101,17,"tptr"],[114,23,101,21],[114,24,101,22,"J"],[114,25,101,23],[114,26,101,24],[114,28,101,26,"p"],[114,29,101,27],[114,32,101,30,"tptr"],[114,36,101,34],[114,37,101,35,"J"],[114,38,101,36],[114,41,101,39],[114,42,101,40],[114,43,101,41],[114,45,101,43,"p"],[114,46,101,44],[114,48,101,46],[114,50,101,48],[115,12,102,10,"i"],[115,13,102,11],[115,16,102,14,"tindex"],[115,22,102,20],[115,23,102,21,"p"],[115,24,102,22],[115,25,102,23],[116,12,103,10],[116,16,103,14,"r"],[116,17,103,15],[116,20,103,18],[116,24,103,18,"csLeaf"],[116,33,103,24],[116,34,103,24,"csLeaf"],[116,40,103,24],[116,42,103,25,"i"],[116,43,103,26],[116,45,103,28,"j"],[116,46,103,29],[116,48,103,31,"w"],[116,49,103,32],[116,51,103,34,"first"],[116,56,103,39],[116,58,103,41,"maxfirst"],[116,66,103,49],[116,68,103,51,"prevleaf"],[116,76,103,59],[116,78,103,61,"ancestor"],[116,86,103,69],[116,87,103,70],[117,12,104,10],[118,12,105,10],[118,16,105,14,"r"],[118,17,105,15],[118,18,105,16,"jleaf"],[118,23,105,21],[118,27,105,25],[118,28,105,26],[118,30,105,28],[119,14,106,12,"colcount"],[119,22,106,20],[119,23,106,21,"j"],[119,24,106,22],[119,25,106,23],[119,27,106,25],[120,12,107,10],[121,12,108,10],[122,12,109,10],[122,16,109,14,"r"],[122,17,109,15],[122,18,109,16,"jleaf"],[122,23,109,21],[122,28,109,26],[122,29,109,27],[122,31,109,29],[123,14,110,12,"colcount"],[123,22,110,20],[123,23,110,21,"r"],[123,24,110,22],[123,25,110,23,"q"],[123,26,110,24],[123,27,110,25],[123,29,110,27],[124,12,111,10],[125,10,112,8],[126,8,113,6],[127,8,114,6],[127,12,114,10,"parent"],[127,18,114,16],[127,19,114,17,"j"],[127,20,114,18],[127,21,114,19],[127,26,114,24],[127,27,114,25],[127,28,114,26],[127,30,114,28],[128,10,115,8,"w"],[128,11,115,9],[128,12,115,10,"ancestor"],[128,20,115,18],[128,23,115,21,"j"],[128,24,115,22],[128,25,115,23],[128,28,115,26,"parent"],[128,34,115,32],[128,35,115,33,"j"],[128,36,115,34],[128,37,115,35],[129,8,116,6],[130,6,117,4],[131,6,118,4],[132,6,119,4],[132,11,119,9,"j"],[132,12,119,10],[132,15,119,13],[132,16,119,14],[132,18,119,16,"j"],[132,19,119,17],[132,22,119,20,"n"],[132,23,119,21],[132,25,119,23,"j"],[132,26,119,24],[132,28,119,26],[132,30,119,28],[133,8,120,6],[133,12,120,10,"parent"],[133,18,120,16],[133,19,120,17,"j"],[133,20,120,18],[133,21,120,19],[133,26,120,24],[133,27,120,25],[133,28,120,26],[133,30,120,28],[134,10,121,8,"colcount"],[134,18,121,16],[134,19,121,17,"parent"],[134,25,121,23],[134,26,121,24,"j"],[134,27,121,25],[134,28,121,26],[134,29,121,27],[134,33,121,31,"colcount"],[134,41,121,39],[134,42,121,40,"j"],[134,43,121,41],[134,44,121,42],[135,8,122,6],[136,6,123,4],[137,6,124,4],[137,13,124,11,"colcount"],[137,21,124,19],[138,4,125,2],[138,5,125,3],[139,2,126,0],[139,3,126,1],[139,4,126,2],[140,0,126,3],[140,3]],"functionMap":{"names":["<global>","factory$argument_2","<anonymous>"],"mappings":"AAA;uECO;SCc;GDuG;CDC"},"hasCjsExports":false},"type":"js/module"}]}