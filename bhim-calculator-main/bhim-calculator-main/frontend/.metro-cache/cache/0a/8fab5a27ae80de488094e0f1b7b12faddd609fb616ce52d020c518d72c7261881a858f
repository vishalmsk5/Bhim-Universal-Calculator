{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo03xDSf\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo03xDSf;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo03xDSf';\n  var dependencies = ['typed'];\n  var createMatAlgo03xDSf = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed\n    } = _ref;\n    /**\n     * Iterates over SparseMatrix items and invokes the callback function f(Dij, Sij).\n     * Callback function invoked M*N times.\n     *\n     *\n     *          ┌  f(Dij, Sij)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  f(Dij, 0)    ; otherwise\n     *\n     *\n     * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n     * @param {Matrix}   sparseMatrix      The SparseMatrix instance (C)\n     * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n     *\n     * @return {Matrix}                    DenseMatrix (C)\n     *\n     * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n     */\n    return function matAlgo03xDSf(denseMatrix, sparseMatrix, callback, inverse) {\n      // dense matrix arrays\n      var adata = denseMatrix._data;\n      var asize = denseMatrix._size;\n      var adt = denseMatrix._datatype || denseMatrix.getDataType();\n      // sparse matrix arrays\n      var bvalues = sparseMatrix._values;\n      var bindex = sparseMatrix._index;\n      var bptr = sparseMatrix._ptr;\n      var bsize = sparseMatrix._size;\n      var bdt = sparseMatrix._datatype || sparseMatrix._data === undefined ? sparseMatrix._datatype : sparseMatrix.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n\n      // check rows & columns\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!bvalues) {\n        throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // zero value\n      var zero = 0;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        // datatype\n        dt = adt;\n        // convert 0 to the same datatype\n        zero = typed.convert(0, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result (DenseMatrix)\n      var cdata = [];\n\n      // initialize dense matrix\n      for (var z = 0; z < rows; z++) {\n        // initialize row\n        cdata[z] = [];\n      }\n\n      // workspace\n      var x = [];\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // loop columns in b\n      for (var j = 0; j < columns; j++) {\n        // column mark\n        var mark = j + 1;\n        // values in column j\n        for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          var i = bindex[k];\n          // update workspace\n          x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n          w[i] = mark;\n        }\n        // process workspace\n        for (var y = 0; y < rows; y++) {\n          // check we have a calculated value for current row\n          if (w[y] === mark) {\n            // use calculated value\n            cdata[y][j] = x[y];\n          } else {\n            // calculate value\n            cdata[y][j] = inverse ? cf(zero, adata[y][j]) : cf(adata[y][j], zero);\n          }\n        }\n      }\n\n      // return dense matrix\n      return denseMatrix.createDenseMatrix({\n        data: cdata,\n        size: [rows, columns],\n        datatype: adt === denseMatrix._datatype && bdt === sparseMatrix._datatype ? dt : undefined\n      });\n    };\n  });\n});","lineCount":135,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo03xDSf"],[10,32,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,28,3,26],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,30,4,28],[17,2,5,7],[17,6,5,11,"createMatAlgo03xDSf"],[17,25,5,30],[17,28,5,33],[17,43,5,48],[17,47,5,48,"factory"],[17,62,5,55],[17,63,5,55,"factory"],[17,70,5,55],[17,72,5,56,"name"],[17,76,5,60],[17,78,5,62,"dependencies"],[17,90,5,74],[17,92,5,76,"_ref"],[17,96,5,80],[17,100,5,84],[18,4,6,2],[18,8,6,6],[19,6,7,4,"typed"],[20,4,8,2],[20,5,8,3],[20,8,8,6,"_ref"],[20,12,8,10],[21,4,9,2],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,4,28,2],[40,11,28,9],[40,20,28,18,"matAlgo03xDSf"],[40,33,28,31,"matAlgo03xDSf"],[40,34,28,32,"denseMatrix"],[40,45,28,43],[40,47,28,45,"sparseMatrix"],[40,59,28,57],[40,61,28,59,"callback"],[40,69,28,67],[40,71,28,69,"inverse"],[40,78,28,76],[40,80,28,78],[41,6,29,4],[42,6,30,4],[42,10,30,8,"adata"],[42,15,30,13],[42,18,30,16,"denseMatrix"],[42,29,30,27],[42,30,30,28,"_data"],[42,35,30,33],[43,6,31,4],[43,10,31,8,"asize"],[43,15,31,13],[43,18,31,16,"denseMatrix"],[43,29,31,27],[43,30,31,28,"_size"],[43,35,31,33],[44,6,32,4],[44,10,32,8,"adt"],[44,13,32,11],[44,16,32,14,"denseMatrix"],[44,27,32,25],[44,28,32,26,"_datatype"],[44,37,32,35],[44,41,32,39,"denseMatrix"],[44,52,32,50],[44,53,32,51,"getDataType"],[44,64,32,62],[44,65,32,63],[44,66,32,64],[45,6,33,4],[46,6,34,4],[46,10,34,8,"bvalues"],[46,17,34,15],[46,20,34,18,"sparseMatrix"],[46,32,34,30],[46,33,34,31,"_values"],[46,40,34,38],[47,6,35,4],[47,10,35,8,"bindex"],[47,16,35,14],[47,19,35,17,"sparseMatrix"],[47,31,35,29],[47,32,35,30,"_index"],[47,38,35,36],[48,6,36,4],[48,10,36,8,"bptr"],[48,14,36,12],[48,17,36,15,"sparseMatrix"],[48,29,36,27],[48,30,36,28,"_ptr"],[48,34,36,32],[49,6,37,4],[49,10,37,8,"bsize"],[49,15,37,13],[49,18,37,16,"sparseMatrix"],[49,30,37,28],[49,31,37,29,"_size"],[49,36,37,34],[50,6,38,4],[50,10,38,8,"bdt"],[50,13,38,11],[50,16,38,14,"sparseMatrix"],[50,28,38,26],[50,29,38,27,"_datatype"],[50,38,38,36],[50,42,38,40,"sparseMatrix"],[50,54,38,52],[50,55,38,53,"_data"],[50,60,38,58],[50,65,38,63,"undefined"],[50,74,38,72],[50,77,38,75,"sparseMatrix"],[50,89,38,87],[50,90,38,88,"_datatype"],[50,99,38,97],[50,102,38,100,"sparseMatrix"],[50,114,38,112],[50,115,38,113,"getDataType"],[50,126,38,124],[50,127,38,125],[50,128,38,126],[52,6,40,4],[53,6,41,4],[53,10,41,8,"asize"],[53,15,41,13],[53,16,41,14,"length"],[53,22,41,20],[53,27,41,25,"bsize"],[53,32,41,30],[53,33,41,31,"length"],[53,39,41,37],[53,41,41,39],[54,8,42,6],[54,14,42,12],[54,18,42,16,"DimensionError"],[54,40,42,30],[54,41,42,30,"DimensionError"],[54,55,42,30],[54,56,42,31,"asize"],[54,61,42,36],[54,62,42,37,"length"],[54,68,42,43],[54,70,42,45,"bsize"],[54,75,42,50],[54,76,42,51,"length"],[54,82,42,57],[54,83,42,58],[55,6,43,4],[57,6,45,4],[58,6,46,4],[58,10,46,8,"asize"],[58,15,46,13],[58,16,46,14],[58,17,46,15],[58,18,46,16],[58,23,46,21,"bsize"],[58,28,46,26],[58,29,46,27],[58,30,46,28],[58,31,46,29],[58,35,46,33,"asize"],[58,40,46,38],[58,41,46,39],[58,42,46,40],[58,43,46,41],[58,48,46,46,"bsize"],[58,53,46,51],[58,54,46,52],[58,55,46,53],[58,56,46,54],[58,58,46,56],[59,8,47,6],[59,14,47,12],[59,18,47,16,"RangeError"],[59,28,47,26],[59,29,47,27],[59,61,47,59],[59,64,47,62,"asize"],[59,69,47,67],[59,72,47,70],[59,97,47,95],[59,100,47,98,"bsize"],[59,105,47,103],[59,108,47,106],[59,111,47,109],[59,112,47,110],[60,6,48,4],[62,6,50,4],[63,6,51,4],[63,10,51,8],[63,11,51,9,"bvalues"],[63,18,51,16],[63,20,51,18],[64,8,52,6],[64,14,52,12],[64,18,52,16,"Error"],[64,23,52,21],[64,24,52,22],[64,92,52,90],[64,93,52,91],[65,6,53,4],[67,6,55,4],[68,6,56,4],[68,10,56,8,"rows"],[68,14,56,12],[68,17,56,15,"asize"],[68,22,56,20],[68,23,56,21],[68,24,56,22],[68,25,56,23],[69,6,57,4],[69,10,57,8,"columns"],[69,17,57,15],[69,20,57,18,"asize"],[69,25,57,23],[69,26,57,24],[69,27,57,25],[69,28,57,26],[71,6,59,4],[72,6,60,4],[72,10,60,8,"dt"],[72,12,60,10],[73,6,61,4],[74,6,62,4],[74,10,62,8,"zero"],[74,14,62,12],[74,17,62,15],[74,18,62,16],[75,6,63,4],[76,6,64,4],[76,10,64,8,"cf"],[76,12,64,10],[76,15,64,13,"callback"],[76,23,64,21],[78,6,66,4],[79,6,67,4],[79,10,67,8],[79,17,67,15,"adt"],[79,20,67,18],[79,25,67,23],[79,33,67,31],[79,37,67,35,"adt"],[79,40,67,38],[79,45,67,43,"bdt"],[79,48,67,46],[79,52,67,50,"adt"],[79,55,67,53],[79,60,67,58],[79,67,67,65],[79,69,67,67],[80,8,68,6],[81,8,69,6,"dt"],[81,10,69,8],[81,13,69,11,"adt"],[81,16,69,14],[82,8,70,6],[83,8,71,6,"zero"],[83,12,71,10],[83,15,71,13,"typed"],[83,20,71,18],[83,21,71,19,"convert"],[83,28,71,26],[83,29,71,27],[83,30,71,28],[83,32,71,30,"dt"],[83,34,71,32],[83,35,71,33],[84,8,72,6],[85,8,73,6,"cf"],[85,10,73,8],[85,13,73,11,"typed"],[85,18,73,16],[85,19,73,17,"find"],[85,23,73,21],[85,24,73,22,"callback"],[85,32,73,30],[85,34,73,32],[85,35,73,33,"dt"],[85,37,73,35],[85,39,73,37,"dt"],[85,41,73,39],[85,42,73,40],[85,43,73,41],[86,6,74,4],[88,6,76,4],[89,6,77,4],[89,10,77,8,"cdata"],[89,15,77,13],[89,18,77,16],[89,20,77,18],[91,6,79,4],[92,6,80,4],[92,11,80,9],[92,15,80,13,"z"],[92,16,80,14],[92,19,80,17],[92,20,80,18],[92,22,80,20,"z"],[92,23,80,21],[92,26,80,24,"rows"],[92,30,80,28],[92,32,80,30,"z"],[92,33,80,31],[92,35,80,33],[92,37,80,35],[93,8,81,6],[94,8,82,6,"cdata"],[94,13,82,11],[94,14,82,12,"z"],[94,15,82,13],[94,16,82,14],[94,19,82,17],[94,21,82,19],[95,6,83,4],[97,6,85,4],[98,6,86,4],[98,10,86,8,"x"],[98,11,86,9],[98,14,86,12],[98,16,86,14],[99,6,87,4],[100,6,88,4],[100,10,88,8,"w"],[100,11,88,9],[100,14,88,12],[100,16,88,14],[102,6,90,4],[103,6,91,4],[103,11,91,9],[103,15,91,13,"j"],[103,16,91,14],[103,19,91,17],[103,20,91,18],[103,22,91,20,"j"],[103,23,91,21],[103,26,91,24,"columns"],[103,33,91,31],[103,35,91,33,"j"],[103,36,91,34],[103,38,91,36],[103,40,91,38],[104,8,92,6],[105,8,93,6],[105,12,93,10,"mark"],[105,16,93,14],[105,19,93,17,"j"],[105,20,93,18],[105,23,93,21],[105,24,93,22],[106,8,94,6],[107,8,95,6],[107,13,95,11],[107,17,95,15,"k0"],[107,19,95,17],[107,22,95,20,"bptr"],[107,26,95,24],[107,27,95,25,"j"],[107,28,95,26],[107,29,95,27],[107,31,95,29,"k1"],[107,33,95,31],[107,36,95,34,"bptr"],[107,40,95,38],[107,41,95,39,"j"],[107,42,95,40],[107,45,95,43],[107,46,95,44],[107,47,95,45],[107,49,95,47,"k"],[107,50,95,48],[107,53,95,51,"k0"],[107,55,95,53],[107,57,95,55,"k"],[107,58,95,56],[107,61,95,59,"k1"],[107,63,95,61],[107,65,95,63,"k"],[107,66,95,64],[107,68,95,66],[107,70,95,68],[108,10,96,8],[109,10,97,8],[109,14,97,12,"i"],[109,15,97,13],[109,18,97,16,"bindex"],[109,24,97,22],[109,25,97,23,"k"],[109,26,97,24],[109,27,97,25],[110,10,98,8],[111,10,99,8,"x"],[111,11,99,9],[111,12,99,10,"i"],[111,13,99,11],[111,14,99,12],[111,17,99,15,"inverse"],[111,24,99,22],[111,27,99,25,"cf"],[111,29,99,27],[111,30,99,28,"bvalues"],[111,37,99,35],[111,38,99,36,"k"],[111,39,99,37],[111,40,99,38],[111,42,99,40,"adata"],[111,47,99,45],[111,48,99,46,"i"],[111,49,99,47],[111,50,99,48],[111,51,99,49,"j"],[111,52,99,50],[111,53,99,51],[111,54,99,52],[111,57,99,55,"cf"],[111,59,99,57],[111,60,99,58,"adata"],[111,65,99,63],[111,66,99,64,"i"],[111,67,99,65],[111,68,99,66],[111,69,99,67,"j"],[111,70,99,68],[111,71,99,69],[111,73,99,71,"bvalues"],[111,80,99,78],[111,81,99,79,"k"],[111,82,99,80],[111,83,99,81],[111,84,99,82],[112,10,100,8,"w"],[112,11,100,9],[112,12,100,10,"i"],[112,13,100,11],[112,14,100,12],[112,17,100,15,"mark"],[112,21,100,19],[113,8,101,6],[114,8,102,6],[115,8,103,6],[115,13,103,11],[115,17,103,15,"y"],[115,18,103,16],[115,21,103,19],[115,22,103,20],[115,24,103,22,"y"],[115,25,103,23],[115,28,103,26,"rows"],[115,32,103,30],[115,34,103,32,"y"],[115,35,103,33],[115,37,103,35],[115,39,103,37],[116,10,104,8],[117,10,105,8],[117,14,105,12,"w"],[117,15,105,13],[117,16,105,14,"y"],[117,17,105,15],[117,18,105,16],[117,23,105,21,"mark"],[117,27,105,25],[117,29,105,27],[118,12,106,10],[119,12,107,10,"cdata"],[119,17,107,15],[119,18,107,16,"y"],[119,19,107,17],[119,20,107,18],[119,21,107,19,"j"],[119,22,107,20],[119,23,107,21],[119,26,107,24,"x"],[119,27,107,25],[119,28,107,26,"y"],[119,29,107,27],[119,30,107,28],[120,10,108,8],[120,11,108,9],[120,17,108,15],[121,12,109,10],[122,12,110,10,"cdata"],[122,17,110,15],[122,18,110,16,"y"],[122,19,110,17],[122,20,110,18],[122,21,110,19,"j"],[122,22,110,20],[122,23,110,21],[122,26,110,24,"inverse"],[122,33,110,31],[122,36,110,34,"cf"],[122,38,110,36],[122,39,110,37,"zero"],[122,43,110,41],[122,45,110,43,"adata"],[122,50,110,48],[122,51,110,49,"y"],[122,52,110,50],[122,53,110,51],[122,54,110,52,"j"],[122,55,110,53],[122,56,110,54],[122,57,110,55],[122,60,110,58,"cf"],[122,62,110,60],[122,63,110,61,"adata"],[122,68,110,66],[122,69,110,67,"y"],[122,70,110,68],[122,71,110,69],[122,72,110,70,"j"],[122,73,110,71],[122,74,110,72],[122,76,110,74,"zero"],[122,80,110,78],[122,81,110,79],[123,10,111,8],[124,8,112,6],[125,6,113,4],[127,6,115,4],[128,6,116,4],[128,13,116,11,"denseMatrix"],[128,24,116,22],[128,25,116,23,"createDenseMatrix"],[128,42,116,40],[128,43,116,41],[129,8,117,6,"data"],[129,12,117,10],[129,14,117,12,"cdata"],[129,19,117,17],[130,8,118,6,"size"],[130,12,118,10],[130,14,118,12],[130,15,118,13,"rows"],[130,19,118,17],[130,21,118,19,"columns"],[130,28,118,26],[130,29,118,27],[131,8,119,6,"datatype"],[131,16,119,14],[131,18,119,16,"adt"],[131,21,119,19],[131,26,119,24,"denseMatrix"],[131,37,119,35],[131,38,119,36,"_datatype"],[131,47,119,45],[131,51,119,49,"bdt"],[131,54,119,52],[131,59,119,57,"sparseMatrix"],[131,71,119,69],[131,72,119,70,"_datatype"],[131,81,119,79],[131,84,119,82,"dt"],[131,86,119,84],[131,89,119,87,"undefined"],[132,6,120,4],[132,7,120,5],[132,8,120,6],[133,4,121,2],[133,5,121,3],[134,2,122,0],[134,3,122,1],[134,4,122,2],[135,0,122,3],[135,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo03xDSf"],"mappings":"AAA;4ECI;SCuB;GD6F;CDC"},"hasCjsExports":false},"type":"js/module"}]}