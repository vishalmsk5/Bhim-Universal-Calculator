{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}},{"name":"../../../error/DimensionError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":66,"index":119}}],"key":"n9SgYlrgNLSheJUS+2cSjgMV5bE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo07xSSf\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo07xSSf;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var _errorDimensionErrorJs = require(_dependencyMap[1], \"../../../error/DimensionError.js\");\n  var name = 'matAlgo07xSSf';\n  var dependencies = ['typed', 'SparseMatrix'];\n  var createMatAlgo07xSSf = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      SparseMatrix\n    } = _ref;\n    /**\n    * Iterates over SparseMatrix A and SparseMatrix B items (zero and nonzero) and invokes the callback function f(Aij, Bij).\n    * Callback function invoked MxN times.\n    *\n    * C(i,j) = f(Aij, Bij)\n    *\n    * @param {Matrix}   a                 The SparseMatrix instance (A)\n    * @param {Matrix}   b                 The SparseMatrix instance (B)\n    * @param {Function} callback          The f(Aij,Bij) operation to invoke\n    *\n    * @return {Matrix}                    SparseMatrix (C)\n    *\n    * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n    */\n    return function matAlgo07xSSf(a, b, callback) {\n      // sparse matrix arrays\n      var asize = a._size;\n      var adt = a._datatype || a._data === undefined ? a._datatype : a.getDataType();\n      var bsize = b._size;\n      var bdt = b._datatype || b._data === undefined ? b._datatype : b.getDataType();\n\n      // validate dimensions\n      if (asize.length !== bsize.length) {\n        throw new _errorDimensionErrorJs.DimensionError(asize.length, bsize.length);\n      }\n      if (asize[0] !== bsize[0] || asize[1] !== bsize[1]) {\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      var zero = 0;\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string' && adt === bdt && adt !== 'mixed') {\n        dt = adt;\n        zero = typed.convert(0, dt);\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result arrays for sparse format\n      var cvalues = [];\n      var cindex = [];\n      var cptr = new Array(columns + 1).fill(0); // Start with column pointer array\n\n      // workspaces\n      var xa = [];\n      var xb = [];\n      var wa = [];\n      var wb = [];\n\n      // loop columns\n      for (var j = 0; j < columns; j++) {\n        var mark = j + 1;\n        var nonZeroCount = 0;\n        _scatter(a, j, wa, xa, mark);\n        _scatter(b, j, wb, xb, mark);\n\n        // loop rows\n        for (var i = 0; i < rows; i++) {\n          var va = wa[i] === mark ? xa[i] : zero;\n          var vb = wb[i] === mark ? xb[i] : zero;\n\n          // invoke callback\n          var cij = cf(va, vb);\n          // Store all non zero and true values\n          if (cij !== 0 && cij !== false) {\n            cindex.push(i); // row index\n            cvalues.push(cij); // computed value\n            nonZeroCount++;\n          }\n        }\n\n        // Update column pointer with cumulative count of non-zero values\n        cptr[j + 1] = cptr[j] + nonZeroCount;\n      }\n\n      // Return the result as a sparse matrix\n      return new SparseMatrix({\n        values: cvalues,\n        index: cindex,\n        ptr: cptr,\n        size: [rows, columns],\n        datatype: adt === a._datatype && bdt === b._datatype ? dt : undefined\n      });\n    };\n    function _scatter(m, j, w, x, mark) {\n      // a arrays\n      var values = m._values;\n      var index = m._index;\n      var ptr = m._ptr;\n      // loop values in column j\n      for (var k = ptr[j], k1 = ptr[j + 1]; k < k1; k++) {\n        // row\n        var i = index[k];\n        // update workspace\n        w[i] = mark;\n        x[i] = values[k];\n      }\n    }\n  });\n});","lineCount":128,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"createMatAlgo07xSSf"],[10,32,5,0],[11,4,5,0],[12,2,5,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_errorDimensionErrorJs"],[14,28,2,0],[14,31,2,0,"require"],[14,38,2,0],[14,39,2,0,"_dependencyMap"],[14,53,2,0],[15,2,3,0],[15,6,3,4,"name"],[15,10,3,8],[15,13,3,11],[15,28,3,26],[16,2,4,0],[16,6,4,4,"dependencies"],[16,18,4,16],[16,21,4,19],[16,22,4,20],[16,29,4,27],[16,31,4,29],[16,45,4,43],[16,46,4,44],[17,2,5,7],[17,6,5,11,"createMatAlgo07xSSf"],[17,25,5,30],[17,28,5,33],[17,43,5,48],[17,47,5,48,"factory"],[17,62,5,55],[17,63,5,55,"factory"],[17,70,5,55],[17,72,5,56,"name"],[17,76,5,60],[17,78,5,62,"dependencies"],[17,90,5,74],[17,92,5,76,"_ref"],[17,96,5,80],[17,100,5,84],[18,4,6,2],[18,8,6,6],[19,6,7,4,"typed"],[19,11,7,9],[20,6,8,4,"SparseMatrix"],[21,4,9,2],[21,5,9,3],[21,8,9,6,"_ref"],[21,12,9,10],[22,4,10,2],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,4,24,2],[36,11,24,9],[36,20,24,18,"matAlgo07xSSf"],[36,33,24,31,"matAlgo07xSSf"],[36,34,24,32,"a"],[36,35,24,33],[36,37,24,35,"b"],[36,38,24,36],[36,40,24,38,"callback"],[36,48,24,46],[36,50,24,48],[37,6,25,4],[38,6,26,4],[38,10,26,8,"asize"],[38,15,26,13],[38,18,26,16,"a"],[38,19,26,17],[38,20,26,18,"_size"],[38,25,26,23],[39,6,27,4],[39,10,27,8,"adt"],[39,13,27,11],[39,16,27,14,"a"],[39,17,27,15],[39,18,27,16,"_datatype"],[39,27,27,25],[39,31,27,29,"a"],[39,32,27,30],[39,33,27,31,"_data"],[39,38,27,36],[39,43,27,41,"undefined"],[39,52,27,50],[39,55,27,53,"a"],[39,56,27,54],[39,57,27,55,"_datatype"],[39,66,27,64],[39,69,27,67,"a"],[39,70,27,68],[39,71,27,69,"getDataType"],[39,82,27,80],[39,83,27,81],[39,84,27,82],[40,6,28,4],[40,10,28,8,"bsize"],[40,15,28,13],[40,18,28,16,"b"],[40,19,28,17],[40,20,28,18,"_size"],[40,25,28,23],[41,6,29,4],[41,10,29,8,"bdt"],[41,13,29,11],[41,16,29,14,"b"],[41,17,29,15],[41,18,29,16,"_datatype"],[41,27,29,25],[41,31,29,29,"b"],[41,32,29,30],[41,33,29,31,"_data"],[41,38,29,36],[41,43,29,41,"undefined"],[41,52,29,50],[41,55,29,53,"b"],[41,56,29,54],[41,57,29,55,"_datatype"],[41,66,29,64],[41,69,29,67,"b"],[41,70,29,68],[41,71,29,69,"getDataType"],[41,82,29,80],[41,83,29,81],[41,84,29,82],[43,6,31,4],[44,6,32,4],[44,10,32,8,"asize"],[44,15,32,13],[44,16,32,14,"length"],[44,22,32,20],[44,27,32,25,"bsize"],[44,32,32,30],[44,33,32,31,"length"],[44,39,32,37],[44,41,32,39],[45,8,33,6],[45,14,33,12],[45,18,33,16,"DimensionError"],[45,40,33,30],[45,41,33,30,"DimensionError"],[45,55,33,30],[45,56,33,31,"asize"],[45,61,33,36],[45,62,33,37,"length"],[45,68,33,43],[45,70,33,45,"bsize"],[45,75,33,50],[45,76,33,51,"length"],[45,82,33,57],[45,83,33,58],[46,6,34,4],[47,6,35,4],[47,10,35,8,"asize"],[47,15,35,13],[47,16,35,14],[47,17,35,15],[47,18,35,16],[47,23,35,21,"bsize"],[47,28,35,26],[47,29,35,27],[47,30,35,28],[47,31,35,29],[47,35,35,33,"asize"],[47,40,35,38],[47,41,35,39],[47,42,35,40],[47,43,35,41],[47,48,35,46,"bsize"],[47,53,35,51],[47,54,35,52],[47,55,35,53],[47,56,35,54],[47,58,35,56],[48,8,36,6],[48,14,36,12],[48,18,36,16,"RangeError"],[48,28,36,26],[48,29,36,27],[48,61,36,59],[48,64,36,62,"asize"],[48,69,36,67],[48,72,36,70],[48,97,36,95],[48,100,36,98,"bsize"],[48,105,36,103],[48,108,36,106],[48,111,36,109],[48,112,36,110],[49,6,37,4],[51,6,39,4],[52,6,40,4],[52,10,40,8,"rows"],[52,14,40,12],[52,17,40,15,"asize"],[52,22,40,20],[52,23,40,21],[52,24,40,22],[52,25,40,23],[53,6,41,4],[53,10,41,8,"columns"],[53,17,41,15],[53,20,41,18,"asize"],[53,25,41,23],[53,26,41,24],[53,27,41,25],[53,28,41,26],[55,6,43,4],[56,6,44,4],[56,10,44,8,"dt"],[56,12,44,10],[57,6,45,4],[57,10,45,8,"zero"],[57,14,45,12],[57,17,45,15],[57,18,45,16],[58,6,46,4],[58,10,46,8,"cf"],[58,12,46,10],[58,15,46,13,"callback"],[58,23,46,21],[60,6,48,4],[61,6,49,4],[61,10,49,8],[61,17,49,15,"adt"],[61,20,49,18],[61,25,49,23],[61,33,49,31],[61,37,49,35,"adt"],[61,40,49,38],[61,45,49,43,"bdt"],[61,48,49,46],[61,52,49,50,"adt"],[61,55,49,53],[61,60,49,58],[61,67,49,65],[61,69,49,67],[62,8,50,6,"dt"],[62,10,50,8],[62,13,50,11,"adt"],[62,16,50,14],[63,8,51,6,"zero"],[63,12,51,10],[63,15,51,13,"typed"],[63,20,51,18],[63,21,51,19,"convert"],[63,28,51,26],[63,29,51,27],[63,30,51,28],[63,32,51,30,"dt"],[63,34,51,32],[63,35,51,33],[64,8,52,6,"cf"],[64,10,52,8],[64,13,52,11,"typed"],[64,18,52,16],[64,19,52,17,"find"],[64,23,52,21],[64,24,52,22,"callback"],[64,32,52,30],[64,34,52,32],[64,35,52,33,"dt"],[64,37,52,35],[64,39,52,37,"dt"],[64,41,52,39],[64,42,52,40],[64,43,52,41],[65,6,53,4],[67,6,55,4],[68,6,56,4],[68,10,56,8,"cvalues"],[68,17,56,15],[68,20,56,18],[68,22,56,20],[69,6,57,4],[69,10,57,8,"cindex"],[69,16,57,14],[69,19,57,17],[69,21,57,19],[70,6,58,4],[70,10,58,8,"cptr"],[70,14,58,12],[70,17,58,15],[70,21,58,19,"Array"],[70,26,58,24],[70,27,58,25,"columns"],[70,34,58,32],[70,37,58,35],[70,38,58,36],[70,39,58,37],[70,40,58,38,"fill"],[70,44,58,42],[70,45,58,43],[70,46,58,44],[70,47,58,45],[70,48,58,46],[70,49,58,47],[72,6,60,4],[73,6,61,4],[73,10,61,8,"xa"],[73,12,61,10],[73,15,61,13],[73,17,61,15],[74,6,62,4],[74,10,62,8,"xb"],[74,12,62,10],[74,15,62,13],[74,17,62,15],[75,6,63,4],[75,10,63,8,"wa"],[75,12,63,10],[75,15,63,13],[75,17,63,15],[76,6,64,4],[76,10,64,8,"wb"],[76,12,64,10],[76,15,64,13],[76,17,64,15],[78,6,66,4],[79,6,67,4],[79,11,67,9],[79,15,67,13,"j"],[79,16,67,14],[79,19,67,17],[79,20,67,18],[79,22,67,20,"j"],[79,23,67,21],[79,26,67,24,"columns"],[79,33,67,31],[79,35,67,33,"j"],[79,36,67,34],[79,38,67,36],[79,40,67,38],[80,8,68,6],[80,12,68,10,"mark"],[80,16,68,14],[80,19,68,17,"j"],[80,20,68,18],[80,23,68,21],[80,24,68,22],[81,8,69,6],[81,12,69,10,"nonZeroCount"],[81,24,69,22],[81,27,69,25],[81,28,69,26],[82,8,70,6,"_scatter"],[82,16,70,14],[82,17,70,15,"a"],[82,18,70,16],[82,20,70,18,"j"],[82,21,70,19],[82,23,70,21,"wa"],[82,25,70,23],[82,27,70,25,"xa"],[82,29,70,27],[82,31,70,29,"mark"],[82,35,70,33],[82,36,70,34],[83,8,71,6,"_scatter"],[83,16,71,14],[83,17,71,15,"b"],[83,18,71,16],[83,20,71,18,"j"],[83,21,71,19],[83,23,71,21,"wb"],[83,25,71,23],[83,27,71,25,"xb"],[83,29,71,27],[83,31,71,29,"mark"],[83,35,71,33],[83,36,71,34],[85,8,73,6],[86,8,74,6],[86,13,74,11],[86,17,74,15,"i"],[86,18,74,16],[86,21,74,19],[86,22,74,20],[86,24,74,22,"i"],[86,25,74,23],[86,28,74,26,"rows"],[86,32,74,30],[86,34,74,32,"i"],[86,35,74,33],[86,37,74,35],[86,39,74,37],[87,10,75,8],[87,14,75,12,"va"],[87,16,75,14],[87,19,75,17,"wa"],[87,21,75,19],[87,22,75,20,"i"],[87,23,75,21],[87,24,75,22],[87,29,75,27,"mark"],[87,33,75,31],[87,36,75,34,"xa"],[87,38,75,36],[87,39,75,37,"i"],[87,40,75,38],[87,41,75,39],[87,44,75,42,"zero"],[87,48,75,46],[88,10,76,8],[88,14,76,12,"vb"],[88,16,76,14],[88,19,76,17,"wb"],[88,21,76,19],[88,22,76,20,"i"],[88,23,76,21],[88,24,76,22],[88,29,76,27,"mark"],[88,33,76,31],[88,36,76,34,"xb"],[88,38,76,36],[88,39,76,37,"i"],[88,40,76,38],[88,41,76,39],[88,44,76,42,"zero"],[88,48,76,46],[90,10,78,8],[91,10,79,8],[91,14,79,12,"cij"],[91,17,79,15],[91,20,79,18,"cf"],[91,22,79,20],[91,23,79,21,"va"],[91,25,79,23],[91,27,79,25,"vb"],[91,29,79,27],[91,30,79,28],[92,10,80,8],[93,10,81,8],[93,14,81,12,"cij"],[93,17,81,15],[93,22,81,20],[93,23,81,21],[93,27,81,25,"cij"],[93,30,81,28],[93,35,81,33],[93,40,81,38],[93,42,81,40],[94,12,82,10,"cindex"],[94,18,82,16],[94,19,82,17,"push"],[94,23,82,21],[94,24,82,22,"i"],[94,25,82,23],[94,26,82,24],[94,27,82,25],[94,28,82,26],[95,12,83,10,"cvalues"],[95,19,83,17],[95,20,83,18,"push"],[95,24,83,22],[95,25,83,23,"cij"],[95,28,83,26],[95,29,83,27],[95,30,83,28],[95,31,83,29],[96,12,84,10,"nonZeroCount"],[96,24,84,22],[96,26,84,24],[97,10,85,8],[98,8,86,6],[100,8,88,6],[101,8,89,6,"cptr"],[101,12,89,10],[101,13,89,11,"j"],[101,14,89,12],[101,17,89,15],[101,18,89,16],[101,19,89,17],[101,22,89,20,"cptr"],[101,26,89,24],[101,27,89,25,"j"],[101,28,89,26],[101,29,89,27],[101,32,89,30,"nonZeroCount"],[101,44,89,42],[102,6,90,4],[104,6,92,4],[105,6,93,4],[105,13,93,11],[105,17,93,15,"SparseMatrix"],[105,29,93,27],[105,30,93,28],[106,8,94,6,"values"],[106,14,94,12],[106,16,94,14,"cvalues"],[106,23,94,21],[107,8,95,6,"index"],[107,13,95,11],[107,15,95,13,"cindex"],[107,21,95,19],[108,8,96,6,"ptr"],[108,11,96,9],[108,13,96,11,"cptr"],[108,17,96,15],[109,8,97,6,"size"],[109,12,97,10],[109,14,97,12],[109,15,97,13,"rows"],[109,19,97,17],[109,21,97,19,"columns"],[109,28,97,26],[109,29,97,27],[110,8,98,6,"datatype"],[110,16,98,14],[110,18,98,16,"adt"],[110,21,98,19],[110,26,98,24,"a"],[110,27,98,25],[110,28,98,26,"_datatype"],[110,37,98,35],[110,41,98,39,"bdt"],[110,44,98,42],[110,49,98,47,"b"],[110,50,98,48],[110,51,98,49,"_datatype"],[110,60,98,58],[110,63,98,61,"dt"],[110,65,98,63],[110,68,98,66,"undefined"],[111,6,99,4],[111,7,99,5],[111,8,99,6],[112,4,100,2],[112,5,100,3],[113,4,101,2],[113,13,101,11,"_scatter"],[113,21,101,19,"_scatter"],[113,22,101,20,"m"],[113,23,101,21],[113,25,101,23,"j"],[113,26,101,24],[113,28,101,26,"w"],[113,29,101,27],[113,31,101,29,"x"],[113,32,101,30],[113,34,101,32,"mark"],[113,38,101,36],[113,40,101,38],[114,6,102,4],[115,6,103,4],[115,10,103,8,"values"],[115,16,103,14],[115,19,103,17,"m"],[115,20,103,18],[115,21,103,19,"_values"],[115,28,103,26],[116,6,104,4],[116,10,104,8,"index"],[116,15,104,13],[116,18,104,16,"m"],[116,19,104,17],[116,20,104,18,"_index"],[116,26,104,24],[117,6,105,4],[117,10,105,8,"ptr"],[117,13,105,11],[117,16,105,14,"m"],[117,17,105,15],[117,18,105,16,"_ptr"],[117,22,105,20],[118,6,106,4],[119,6,107,4],[119,11,107,9],[119,15,107,13,"k"],[119,16,107,14],[119,19,107,17,"ptr"],[119,22,107,20],[119,23,107,21,"j"],[119,24,107,22],[119,25,107,23],[119,27,107,25,"k1"],[119,29,107,27],[119,32,107,30,"ptr"],[119,35,107,33],[119,36,107,34,"j"],[119,37,107,35],[119,40,107,38],[119,41,107,39],[119,42,107,40],[119,44,107,42,"k"],[119,45,107,43],[119,48,107,46,"k1"],[119,50,107,48],[119,52,107,50,"k"],[119,53,107,51],[119,55,107,53],[119,57,107,55],[120,8,108,6],[121,8,109,6],[121,12,109,10,"i"],[121,13,109,11],[121,16,109,14,"index"],[121,21,109,19],[121,22,109,20,"k"],[121,23,109,21],[121,24,109,22],[122,8,110,6],[123,8,111,6,"w"],[123,9,111,7],[123,10,111,8,"i"],[123,11,111,9],[123,12,111,10],[123,15,111,13,"mark"],[123,19,111,17],[124,8,112,6,"x"],[124,9,112,7],[124,10,112,8,"i"],[124,11,112,9],[124,12,112,10],[124,15,112,13,"values"],[124,21,112,19],[124,22,112,20,"k"],[124,23,112,21],[124,24,112,22],[125,6,113,4],[126,4,114,2],[127,2,115,0],[127,3,115,1],[127,4,115,2],[128,0,115,3],[128,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo07xSSf","_scatter"],"mappings":"AAA;4ECI;SCmB;GD4E;EEC;GFa;CDC"},"hasCjsExports":false},"type":"js/module"}]}