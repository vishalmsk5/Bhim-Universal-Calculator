{"dependencies":[{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createMatAlgo10xSids\", {\n    enumerable: true,\n    get: function () {\n      return createMatAlgo10xSids;\n    }\n  });\n  var _utilsFactoryJs = require(_dependencyMap[0], \"../../../utils/factory.js\");\n  var name = 'matAlgo10xSids';\n  var dependencies = ['typed', 'DenseMatrix'];\n  var createMatAlgo10xSids = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      typed,\n      DenseMatrix\n    } = _ref;\n    /**\n     * Iterates over SparseMatrix S nonzero items and invokes the callback function f(Sij, b).\n     * Callback function invoked NZ times (number of nonzero items in S).\n     *\n     *\n     *          ┌  f(Sij, b)  ; S(i,j) !== 0\n     * C(i,j) = ┤\n     *          └  b          ; otherwise\n     *\n     *\n     * @param {Matrix}   s                 The SparseMatrix instance (S)\n     * @param {Scalar}   b                 The Scalar value\n     * @param {Function} callback          The f(Aij,b) operation to invoke\n     * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Sij)\n     *\n     * @return {Matrix}                    DenseMatrix (C)\n     *\n     * https://github.com/josdejong/mathjs/pull/346#issuecomment-97626813\n     */\n    return function matAlgo10xSids(s, b, callback, inverse) {\n      // sparse matrix arrays\n      var avalues = s._values;\n      var aindex = s._index;\n      var aptr = s._ptr;\n      var asize = s._size;\n      var adt = s._datatype;\n\n      // sparse matrix cannot be a Pattern matrix\n      if (!avalues) {\n        throw new Error('Cannot perform operation on Pattern Sparse Matrix and Scalar value');\n      }\n\n      // rows & columns\n      var rows = asize[0];\n      var columns = asize[1];\n\n      // datatype\n      var dt;\n      // callback signature to use\n      var cf = callback;\n\n      // process data types\n      if (typeof adt === 'string') {\n        // datatype\n        dt = adt;\n        // convert b to the same datatype\n        b = typed.convert(b, dt);\n        // callback\n        cf = typed.find(callback, [dt, dt]);\n      }\n\n      // result arrays\n      var cdata = [];\n\n      // workspaces\n      var x = [];\n      // marks indicating we have a value in x for a given column\n      var w = [];\n\n      // loop columns\n      for (var j = 0; j < columns; j++) {\n        // columns mark\n        var mark = j + 1;\n        // values in j\n        for (var k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n          // row\n          var r = aindex[k];\n          // update workspace\n          x[r] = avalues[k];\n          w[r] = mark;\n        }\n        // loop rows\n        for (var i = 0; i < rows; i++) {\n          // initialize C on first column\n          if (j === 0) {\n            // create row array\n            cdata[i] = [];\n          }\n          // check sparse matrix has a value @ i,j\n          if (w[i] === mark) {\n            // invoke callback, update C\n            cdata[i][j] = inverse ? cf(b, x[i]) : cf(x[i], b);\n          } else {\n            // dense matrix value @ i, j\n            cdata[i][j] = b;\n          }\n        }\n      }\n\n      // return dense matrix\n      return new DenseMatrix({\n        data: cdata,\n        size: [rows, columns],\n        datatype: dt\n      });\n    };\n  });\n});","lineCount":118,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"createMatAlgo10xSids"],[10,33,4,0],[11,4,4,0],[12,2,4,0],[13,2,1,0],[13,6,1,0,"_utilsFactoryJs"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,4,"name"],[14,10,2,8],[14,13,2,11],[14,29,2,27],[15,2,3,0],[15,6,3,4,"dependencies"],[15,18,3,16],[15,21,3,19],[15,22,3,20],[15,29,3,27],[15,31,3,29],[15,44,3,42],[15,45,3,43],[16,2,4,7],[16,6,4,11,"createMatAlgo10xSids"],[16,26,4,31],[16,29,4,34],[16,44,4,49],[16,48,4,49,"factory"],[16,63,4,56],[16,64,4,56,"factory"],[16,71,4,56],[16,73,4,57,"name"],[16,77,4,61],[16,79,4,63,"dependencies"],[16,91,4,75],[16,93,4,77,"_ref"],[16,97,4,81],[16,101,4,85],[17,4,5,2],[17,8,5,6],[18,6,6,4,"typed"],[18,11,6,9],[19,6,7,4,"DenseMatrix"],[20,4,8,2],[20,5,8,3],[20,8,8,6,"_ref"],[20,12,8,10],[21,4,9,2],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,4,28,2],[40,11,28,9],[40,20,28,18,"matAlgo10xSids"],[40,34,28,32,"matAlgo10xSids"],[40,35,28,33,"s"],[40,36,28,34],[40,38,28,36,"b"],[40,39,28,37],[40,41,28,39,"callback"],[40,49,28,47],[40,51,28,49,"inverse"],[40,58,28,56],[40,60,28,58],[41,6,29,4],[42,6,30,4],[42,10,30,8,"avalues"],[42,17,30,15],[42,20,30,18,"s"],[42,21,30,19],[42,22,30,20,"_values"],[42,29,30,27],[43,6,31,4],[43,10,31,8,"aindex"],[43,16,31,14],[43,19,31,17,"s"],[43,20,31,18],[43,21,31,19,"_index"],[43,27,31,25],[44,6,32,4],[44,10,32,8,"aptr"],[44,14,32,12],[44,17,32,15,"s"],[44,18,32,16],[44,19,32,17,"_ptr"],[44,23,32,21],[45,6,33,4],[45,10,33,8,"asize"],[45,15,33,13],[45,18,33,16,"s"],[45,19,33,17],[45,20,33,18,"_size"],[45,25,33,23],[46,6,34,4],[46,10,34,8,"adt"],[46,13,34,11],[46,16,34,14,"s"],[46,17,34,15],[46,18,34,16,"_datatype"],[46,27,34,25],[48,6,36,4],[49,6,37,4],[49,10,37,8],[49,11,37,9,"avalues"],[49,18,37,16],[49,20,37,18],[50,8,38,6],[50,14,38,12],[50,18,38,16,"Error"],[50,23,38,21],[50,24,38,22],[50,92,38,90],[50,93,38,91],[51,6,39,4],[53,6,41,4],[54,6,42,4],[54,10,42,8,"rows"],[54,14,42,12],[54,17,42,15,"asize"],[54,22,42,20],[54,23,42,21],[54,24,42,22],[54,25,42,23],[55,6,43,4],[55,10,43,8,"columns"],[55,17,43,15],[55,20,43,18,"asize"],[55,25,43,23],[55,26,43,24],[55,27,43,25],[55,28,43,26],[57,6,45,4],[58,6,46,4],[58,10,46,8,"dt"],[58,12,46,10],[59,6,47,4],[60,6,48,4],[60,10,48,8,"cf"],[60,12,48,10],[60,15,48,13,"callback"],[60,23,48,21],[62,6,50,4],[63,6,51,4],[63,10,51,8],[63,17,51,15,"adt"],[63,20,51,18],[63,25,51,23],[63,33,51,31],[63,35,51,33],[64,8,52,6],[65,8,53,6,"dt"],[65,10,53,8],[65,13,53,11,"adt"],[65,16,53,14],[66,8,54,6],[67,8,55,6,"b"],[67,9,55,7],[67,12,55,10,"typed"],[67,17,55,15],[67,18,55,16,"convert"],[67,25,55,23],[67,26,55,24,"b"],[67,27,55,25],[67,29,55,27,"dt"],[67,31,55,29],[67,32,55,30],[68,8,56,6],[69,8,57,6,"cf"],[69,10,57,8],[69,13,57,11,"typed"],[69,18,57,16],[69,19,57,17,"find"],[69,23,57,21],[69,24,57,22,"callback"],[69,32,57,30],[69,34,57,32],[69,35,57,33,"dt"],[69,37,57,35],[69,39,57,37,"dt"],[69,41,57,39],[69,42,57,40],[69,43,57,41],[70,6,58,4],[72,6,60,4],[73,6,61,4],[73,10,61,8,"cdata"],[73,15,61,13],[73,18,61,16],[73,20,61,18],[75,6,63,4],[76,6,64,4],[76,10,64,8,"x"],[76,11,64,9],[76,14,64,12],[76,16,64,14],[77,6,65,4],[78,6,66,4],[78,10,66,8,"w"],[78,11,66,9],[78,14,66,12],[78,16,66,14],[80,6,68,4],[81,6,69,4],[81,11,69,9],[81,15,69,13,"j"],[81,16,69,14],[81,19,69,17],[81,20,69,18],[81,22,69,20,"j"],[81,23,69,21],[81,26,69,24,"columns"],[81,33,69,31],[81,35,69,33,"j"],[81,36,69,34],[81,38,69,36],[81,40,69,38],[82,8,70,6],[83,8,71,6],[83,12,71,10,"mark"],[83,16,71,14],[83,19,71,17,"j"],[83,20,71,18],[83,23,71,21],[83,24,71,22],[84,8,72,6],[85,8,73,6],[85,13,73,11],[85,17,73,15,"k0"],[85,19,73,17],[85,22,73,20,"aptr"],[85,26,73,24],[85,27,73,25,"j"],[85,28,73,26],[85,29,73,27],[85,31,73,29,"k1"],[85,33,73,31],[85,36,73,34,"aptr"],[85,40,73,38],[85,41,73,39,"j"],[85,42,73,40],[85,45,73,43],[85,46,73,44],[85,47,73,45],[85,49,73,47,"k"],[85,50,73,48],[85,53,73,51,"k0"],[85,55,73,53],[85,57,73,55,"k"],[85,58,73,56],[85,61,73,59,"k1"],[85,63,73,61],[85,65,73,63,"k"],[85,66,73,64],[85,68,73,66],[85,70,73,68],[86,10,74,8],[87,10,75,8],[87,14,75,12,"r"],[87,15,75,13],[87,18,75,16,"aindex"],[87,24,75,22],[87,25,75,23,"k"],[87,26,75,24],[87,27,75,25],[88,10,76,8],[89,10,77,8,"x"],[89,11,77,9],[89,12,77,10,"r"],[89,13,77,11],[89,14,77,12],[89,17,77,15,"avalues"],[89,24,77,22],[89,25,77,23,"k"],[89,26,77,24],[89,27,77,25],[90,10,78,8,"w"],[90,11,78,9],[90,12,78,10,"r"],[90,13,78,11],[90,14,78,12],[90,17,78,15,"mark"],[90,21,78,19],[91,8,79,6],[92,8,80,6],[93,8,81,6],[93,13,81,11],[93,17,81,15,"i"],[93,18,81,16],[93,21,81,19],[93,22,81,20],[93,24,81,22,"i"],[93,25,81,23],[93,28,81,26,"rows"],[93,32,81,30],[93,34,81,32,"i"],[93,35,81,33],[93,37,81,35],[93,39,81,37],[94,10,82,8],[95,10,83,8],[95,14,83,12,"j"],[95,15,83,13],[95,20,83,18],[95,21,83,19],[95,23,83,21],[96,12,84,10],[97,12,85,10,"cdata"],[97,17,85,15],[97,18,85,16,"i"],[97,19,85,17],[97,20,85,18],[97,23,85,21],[97,25,85,23],[98,10,86,8],[99,10,87,8],[100,10,88,8],[100,14,88,12,"w"],[100,15,88,13],[100,16,88,14,"i"],[100,17,88,15],[100,18,88,16],[100,23,88,21,"mark"],[100,27,88,25],[100,29,88,27],[101,12,89,10],[102,12,90,10,"cdata"],[102,17,90,15],[102,18,90,16,"i"],[102,19,90,17],[102,20,90,18],[102,21,90,19,"j"],[102,22,90,20],[102,23,90,21],[102,26,90,24,"inverse"],[102,33,90,31],[102,36,90,34,"cf"],[102,38,90,36],[102,39,90,37,"b"],[102,40,90,38],[102,42,90,40,"x"],[102,43,90,41],[102,44,90,42,"i"],[102,45,90,43],[102,46,90,44],[102,47,90,45],[102,50,90,48,"cf"],[102,52,90,50],[102,53,90,51,"x"],[102,54,90,52],[102,55,90,53,"i"],[102,56,90,54],[102,57,90,55],[102,59,90,57,"b"],[102,60,90,58],[102,61,90,59],[103,10,91,8],[103,11,91,9],[103,17,91,15],[104,12,92,10],[105,12,93,10,"cdata"],[105,17,93,15],[105,18,93,16,"i"],[105,19,93,17],[105,20,93,18],[105,21,93,19,"j"],[105,22,93,20],[105,23,93,21],[105,26,93,24,"b"],[105,27,93,25],[106,10,94,8],[107,8,95,6],[108,6,96,4],[110,6,98,4],[111,6,99,4],[111,13,99,11],[111,17,99,15,"DenseMatrix"],[111,28,99,26],[111,29,99,27],[112,8,100,6,"data"],[112,12,100,10],[112,14,100,12,"cdata"],[112,19,100,17],[113,8,101,6,"size"],[113,12,101,10],[113,14,101,12],[113,15,101,13,"rows"],[113,19,101,17],[113,21,101,19,"columns"],[113,28,101,26],[113,29,101,27],[114,8,102,6,"datatype"],[114,16,102,14],[114,18,102,16,"dt"],[115,6,103,4],[115,7,103,5],[115,8,103,6],[116,4,104,2],[116,5,104,3],[117,2,105,0],[117,3,105,1],[117,4,105,2],[118,0,105,3],[118,3]],"functionMap":{"names":["<global>","factory$argument_2","matAlgo10xSids"],"mappings":"AAA;6ECG;SCwB;GD4E;CDC"},"hasCjsExports":false},"type":"js/module"}]}