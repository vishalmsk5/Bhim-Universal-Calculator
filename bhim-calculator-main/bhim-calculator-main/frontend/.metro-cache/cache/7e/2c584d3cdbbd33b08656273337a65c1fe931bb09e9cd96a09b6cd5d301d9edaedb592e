{"dependencies":[{"name":"../../utils/object.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RQrRGqbksOCD9OzK2x3a4ahzdIU=","exportNames":["*"],"imports":1}},{"name":"../../utils/string.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":47,"index":94}}],"key":"T/CgcIKKhkpXsq2SV9hlw6YQi24=","exportNames":["*"],"imports":1}},{"name":"../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":95},"end":{"line":3,"column":49,"index":144}}],"key":"7GBwrsWWKVeatBp94Er80/CdjPI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createTrace\", {\n    enumerable: true,\n    get: function () {\n      return createTrace;\n    }\n  });\n  var _utilsObjectJs = require(_dependencyMap[0], \"../../utils/object.js\");\n  var _utilsStringJs = require(_dependencyMap[1], \"../../utils/string.js\");\n  var _utilsFactoryJs = require(_dependencyMap[2], \"../../utils/factory.js\");\n  var name = 'trace';\n  var dependencies = ['typed', 'matrix', 'add'];\n  var createTrace = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var typed = _ref.typed,\n      matrix = _ref.matrix,\n      add = _ref.add;\n    /**\n     * Calculate the trace of a matrix: the sum of the elements on the main\n     * diagonal of a square matrix.\n     *\n     * Syntax:\n     *\n     *    math.trace(x)\n     *\n     * Examples:\n     *\n     *    math.trace([[1, 2], [3, 4]]) // returns 5\n     *\n     *    const A = [\n     *      [1, 2, 3],\n     *      [-1, 2, 3],\n     *      [2, 0, 3]\n     *    ]\n     *    math.trace(A) // returns 6\n     *\n     * See also:\n     *\n     *    diag\n     *\n     * @param {Array | Matrix} x  A matrix\n     *\n     * @return {number} The trace of `x`\n     */\n    return typed('trace', {\n      Array: function _arrayTrace(x) {\n        // use dense matrix implementation\n        return _denseTrace(matrix(x));\n      },\n      SparseMatrix: _sparseTrace,\n      DenseMatrix: _denseTrace,\n      any: _utilsObjectJs.clone\n    });\n    function _denseTrace(m) {\n      // matrix size & data\n      var size = m._size;\n      var data = m._data;\n\n      // process dimensions\n      switch (size.length) {\n        case 1:\n          // vector\n          if (size[0] === 1) {\n            // return data[0]\n            return (0, _utilsObjectJs.clone)(data[0]);\n          }\n          throw new RangeError('Matrix must be square (size: ' + (0, _utilsStringJs.format)(size) + ')');\n        case 2:\n          {\n            // two dimensional\n            var rows = size[0];\n            var cols = size[1];\n            if (rows === cols) {\n              // calulate sum\n              var sum = 0;\n              // loop diagonal\n              for (var i = 0; i < rows; i++) {\n                sum = add(sum, data[i][i]);\n              }\n              // return trace\n              return sum;\n            } else {\n              throw new RangeError('Matrix must be square (size: ' + (0, _utilsStringJs.format)(size) + ')');\n            }\n          }\n        default:\n          // multi dimensional\n          throw new RangeError('Matrix must be two dimensional (size: ' + (0, _utilsStringJs.format)(size) + ')');\n      }\n    }\n    function _sparseTrace(m) {\n      // matrix arrays\n      var values = m._values;\n      var index = m._index;\n      var ptr = m._ptr;\n      var size = m._size;\n      // check dimensions\n      var rows = size[0];\n      var columns = size[1];\n      // matrix must be square\n      if (rows === columns) {\n        // calulate sum\n        var sum = 0;\n        // check we have data (avoid looping columns)\n        if (values.length > 0) {\n          // loop columns\n          for (var j = 0; j < columns; j++) {\n            // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n            var k0 = ptr[j];\n            var k1 = ptr[j + 1];\n            // loop k within [k0, k1[\n            for (var k = k0; k < k1; k++) {\n              // row index\n              var i = index[k];\n              // check row\n              if (i === j) {\n                // accumulate value\n                sum = add(sum, values[k]);\n                // exit loop\n                break;\n              }\n              if (i > j) {\n                // exit loop, no value on the diagonal for column j\n                break;\n              }\n            }\n          }\n        }\n        // return trace\n        return sum;\n      }\n      throw new RangeError('Matrix must be square (size: ' + (0, _utilsStringJs.format)(size) + ')');\n    }\n  });\n});","lineCount":139,"map":[[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"createTrace"],[10,24,6,0],[11,4,6,0],[12,2,6,0],[13,2,1,0],[13,6,1,0,"_utilsObjectJs"],[13,20,1,0],[13,23,1,0,"require"],[13,30,1,0],[13,31,1,0,"_dependencyMap"],[13,45,1,0],[14,2,2,0],[14,6,2,0,"_utilsStringJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_utilsFactoryJs"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,4,0],[16,6,4,4,"name"],[16,10,4,8],[16,13,4,11],[16,20,4,18],[17,2,5,0],[17,6,5,4,"dependencies"],[17,18,5,16],[17,21,5,19],[17,22,5,20],[17,29,5,27],[17,31,5,29],[17,39,5,37],[17,41,5,39],[17,46,5,44],[17,47,5,45],[18,2,6,7],[18,6,6,11,"createTrace"],[18,17,6,22],[18,20,6,25],[18,35,6,40],[18,39,6,40,"factory"],[18,54,6,47],[18,55,6,47,"factory"],[18,62,6,47],[18,64,6,48,"name"],[18,68,6,52],[18,70,6,54,"dependencies"],[18,82,6,66],[18,84,6,68,"_ref"],[18,88,6,72],[18,92,6,76],[19,4,7,2],[19,8,8,4,"typed"],[19,13,8,9],[19,16,11,6,"_ref"],[19,20,11,10],[19,21,8,4,"typed"],[19,26,8,9],[20,6,9,4,"matrix"],[20,12,9,10],[20,15,11,6,"_ref"],[20,19,11,10],[20,20,9,4,"matrix"],[20,26,9,10],[21,6,10,4,"add"],[21,9,10,7],[21,12,11,6,"_ref"],[21,16,11,10],[21,17,10,4,"add"],[21,20,10,7],[22,4,12,2],[23,0,13,0],[24,0,14,0],[25,0,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,0,28,0],[39,0,29,0],[40,0,30,0],[41,0,31,0],[42,0,32,0],[43,0,33,0],[44,0,34,0],[45,0,35,0],[46,0,36,0],[47,0,37,0],[48,0,38,0],[49,4,39,2],[49,11,39,9,"typed"],[49,16,39,14],[49,17,39,15],[49,24,39,22],[49,26,39,24],[50,6,40,4,"Array"],[50,11,40,9],[50,13,40,11],[50,22,40,20,"_arrayTrace"],[50,33,40,31,"_arrayTrace"],[50,34,40,32,"x"],[50,35,40,33],[50,37,40,35],[51,8,41,6],[52,8,42,6],[52,15,42,13,"_denseTrace"],[52,26,42,24],[52,27,42,25,"matrix"],[52,33,42,31],[52,34,42,32,"x"],[52,35,42,33],[52,36,42,34],[52,37,42,35],[53,6,43,4],[53,7,43,5],[54,6,44,4,"SparseMatrix"],[54,18,44,16],[54,20,44,18,"_sparseTrace"],[54,32,44,30],[55,6,45,4,"DenseMatrix"],[55,17,45,15],[55,19,45,17,"_denseTrace"],[55,30,45,28],[56,6,46,4,"any"],[56,9,46,7],[56,11,46,9,"clone"],[56,25,46,14],[56,26,46,14,"clone"],[57,4,47,2],[57,5,47,3],[57,6,47,4],[58,4,48,2],[58,13,48,11,"_denseTrace"],[58,24,48,22,"_denseTrace"],[58,25,48,23,"m"],[58,26,48,24],[58,28,48,26],[59,6,49,4],[60,6,50,4],[60,10,50,8,"size"],[60,14,50,12],[60,17,50,15,"m"],[60,18,50,16],[60,19,50,17,"_size"],[60,24,50,22],[61,6,51,4],[61,10,51,8,"data"],[61,14,51,12],[61,17,51,15,"m"],[61,18,51,16],[61,19,51,17,"_data"],[61,24,51,22],[63,6,53,4],[64,6,54,4],[64,14,54,12,"size"],[64,18,54,16],[64,19,54,17,"length"],[64,25,54,23],[65,8,55,6],[65,13,55,11],[65,14,55,12],[66,10,56,8],[67,10,57,8],[67,14,57,12,"size"],[67,18,57,16],[67,19,57,17],[67,20,57,18],[67,21,57,19],[67,26,57,24],[67,27,57,25],[67,29,57,27],[68,12,58,10],[69,12,59,10],[69,19,59,17],[69,23,59,17,"clone"],[69,37,59,22],[69,38,59,22,"clone"],[69,43,59,22],[69,45,59,23,"data"],[69,49,59,27],[69,50,59,28],[69,51,59,29],[69,52,59,30],[69,53,59,31],[70,10,60,8],[71,10,61,8],[71,16,61,14],[71,20,61,18,"RangeError"],[71,30,61,28],[71,31,61,29],[71,62,61,60],[71,65,61,63],[71,69,61,63,"format"],[71,83,61,69],[71,84,61,69,"format"],[71,90,61,69],[71,92,61,70,"size"],[71,96,61,74],[71,97,61,75],[71,100,61,78],[71,103,61,81],[71,104,61,82],[72,8,62,6],[72,13,62,11],[72,14,62,12],[73,10,63,8],[74,12,64,10],[75,12,65,10],[75,16,65,14,"rows"],[75,20,65,18],[75,23,65,21,"size"],[75,27,65,25],[75,28,65,26],[75,29,65,27],[75,30,65,28],[76,12,66,10],[76,16,66,14,"cols"],[76,20,66,18],[76,23,66,21,"size"],[76,27,66,25],[76,28,66,26],[76,29,66,27],[76,30,66,28],[77,12,67,10],[77,16,67,14,"rows"],[77,20,67,18],[77,25,67,23,"cols"],[77,29,67,27],[77,31,67,29],[78,14,68,12],[79,14,69,12],[79,18,69,16,"sum"],[79,21,69,19],[79,24,69,22],[79,25,69,23],[80,14,70,12],[81,14,71,12],[81,19,71,17],[81,23,71,21,"i"],[81,24,71,22],[81,27,71,25],[81,28,71,26],[81,30,71,28,"i"],[81,31,71,29],[81,34,71,32,"rows"],[81,38,71,36],[81,40,71,38,"i"],[81,41,71,39],[81,43,71,41],[81,45,71,43],[82,16,72,14,"sum"],[82,19,72,17],[82,22,72,20,"add"],[82,25,72,23],[82,26,72,24,"sum"],[82,29,72,27],[82,31,72,29,"data"],[82,35,72,33],[82,36,72,34,"i"],[82,37,72,35],[82,38,72,36],[82,39,72,37,"i"],[82,40,72,38],[82,41,72,39],[82,42,72,40],[83,14,73,12],[84,14,74,12],[85,14,75,12],[85,21,75,19,"sum"],[85,24,75,22],[86,12,76,10],[86,13,76,11],[86,19,76,17],[87,14,77,12],[87,20,77,18],[87,24,77,22,"RangeError"],[87,34,77,32],[87,35,77,33],[87,66,77,64],[87,69,77,67],[87,73,77,67,"format"],[87,87,77,73],[87,88,77,73,"format"],[87,94,77,73],[87,96,77,74,"size"],[87,100,77,78],[87,101,77,79],[87,104,77,82],[87,107,77,85],[87,108,77,86],[88,12,78,10],[89,10,79,8],[90,8,80,6],[91,10,81,8],[92,10,82,8],[92,16,82,14],[92,20,82,18,"RangeError"],[92,30,82,28],[92,31,82,29],[92,71,82,69],[92,74,82,72],[92,78,82,72,"format"],[92,92,82,78],[92,93,82,78,"format"],[92,99,82,78],[92,101,82,79,"size"],[92,105,82,83],[92,106,82,84],[92,109,82,87],[92,112,82,90],[92,113,82,91],[93,6,83,4],[94,4,84,2],[95,4,85,2],[95,13,85,11,"_sparseTrace"],[95,25,85,23,"_sparseTrace"],[95,26,85,24,"m"],[95,27,85,25],[95,29,85,27],[96,6,86,4],[97,6,87,4],[97,10,87,8,"values"],[97,16,87,14],[97,19,87,17,"m"],[97,20,87,18],[97,21,87,19,"_values"],[97,28,87,26],[98,6,88,4],[98,10,88,8,"index"],[98,15,88,13],[98,18,88,16,"m"],[98,19,88,17],[98,20,88,18,"_index"],[98,26,88,24],[99,6,89,4],[99,10,89,8,"ptr"],[99,13,89,11],[99,16,89,14,"m"],[99,17,89,15],[99,18,89,16,"_ptr"],[99,22,89,20],[100,6,90,4],[100,10,90,8,"size"],[100,14,90,12],[100,17,90,15,"m"],[100,18,90,16],[100,19,90,17,"_size"],[100,24,90,22],[101,6,91,4],[102,6,92,4],[102,10,92,8,"rows"],[102,14,92,12],[102,17,92,15,"size"],[102,21,92,19],[102,22,92,20],[102,23,92,21],[102,24,92,22],[103,6,93,4],[103,10,93,8,"columns"],[103,17,93,15],[103,20,93,18,"size"],[103,24,93,22],[103,25,93,23],[103,26,93,24],[103,27,93,25],[104,6,94,4],[105,6,95,4],[105,10,95,8,"rows"],[105,14,95,12],[105,19,95,17,"columns"],[105,26,95,24],[105,28,95,26],[106,8,96,6],[107,8,97,6],[107,12,97,10,"sum"],[107,15,97,13],[107,18,97,16],[107,19,97,17],[108,8,98,6],[109,8,99,6],[109,12,99,10,"values"],[109,18,99,16],[109,19,99,17,"length"],[109,25,99,23],[109,28,99,26],[109,29,99,27],[109,31,99,29],[110,10,100,8],[111,10,101,8],[111,15,101,13],[111,19,101,17,"j"],[111,20,101,18],[111,23,101,21],[111,24,101,22],[111,26,101,24,"j"],[111,27,101,25],[111,30,101,28,"columns"],[111,37,101,35],[111,39,101,37,"j"],[111,40,101,38],[111,42,101,40],[111,44,101,42],[112,12,102,10],[113,12,103,10],[113,16,103,14,"k0"],[113,18,103,16],[113,21,103,19,"ptr"],[113,24,103,22],[113,25,103,23,"j"],[113,26,103,24],[113,27,103,25],[114,12,104,10],[114,16,104,14,"k1"],[114,18,104,16],[114,21,104,19,"ptr"],[114,24,104,22],[114,25,104,23,"j"],[114,26,104,24],[114,29,104,27],[114,30,104,28],[114,31,104,29],[115,12,105,10],[116,12,106,10],[116,17,106,15],[116,21,106,19,"k"],[116,22,106,20],[116,25,106,23,"k0"],[116,27,106,25],[116,29,106,27,"k"],[116,30,106,28],[116,33,106,31,"k1"],[116,35,106,33],[116,37,106,35,"k"],[116,38,106,36],[116,40,106,38],[116,42,106,40],[117,14,107,12],[118,14,108,12],[118,18,108,16,"i"],[118,19,108,17],[118,22,108,20,"index"],[118,27,108,25],[118,28,108,26,"k"],[118,29,108,27],[118,30,108,28],[119,14,109,12],[120,14,110,12],[120,18,110,16,"i"],[120,19,110,17],[120,24,110,22,"j"],[120,25,110,23],[120,27,110,25],[121,16,111,14],[122,16,112,14,"sum"],[122,19,112,17],[122,22,112,20,"add"],[122,25,112,23],[122,26,112,24,"sum"],[122,29,112,27],[122,31,112,29,"values"],[122,37,112,35],[122,38,112,36,"k"],[122,39,112,37],[122,40,112,38],[122,41,112,39],[123,16,113,14],[124,16,114,14],[125,14,115,12],[126,14,116,12],[126,18,116,16,"i"],[126,19,116,17],[126,22,116,20,"j"],[126,23,116,21],[126,25,116,23],[127,16,117,14],[128,16,118,14],[129,14,119,12],[130,12,120,10],[131,10,121,8],[132,8,122,6],[133,8,123,6],[134,8,124,6],[134,15,124,13,"sum"],[134,18,124,16],[135,6,125,4],[136,6,126,4],[136,12,126,10],[136,16,126,14,"RangeError"],[136,26,126,24],[136,27,126,25],[136,58,126,56],[136,61,126,59],[136,65,126,59,"format"],[136,79,126,65],[136,80,126,65,"format"],[136,86,126,65],[136,88,126,66,"size"],[136,92,126,70],[136,93,126,71],[136,96,126,74],[136,99,126,77],[136,100,126,78],[137,4,127,2],[138,2,128,0],[138,3,128,1],[138,4,128,2],[139,0,128,3],[139,3]],"functionMap":{"names":["<global>","factory$argument_2","_arrayTrace","_denseTrace","_sparseTrace"],"mappings":"AAA;oECK;WCkC;KDG;EEK;GFoC;EGC;GH0C;CDC"},"hasCjsExports":false},"type":"js/module"}]}