{"dependencies":[{"name":"./lruQueue.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":19},"end":{"line":3,"column":41,"index":60}}],"key":"hGQ1TQ5rc0+bbqWjI4im0ekUTro=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.memoize = memoize;\n  exports.memoizeCompare = memoizeCompare;\n  var _lruQueueJs = require(_dependencyMap[0], \"./lruQueue.js\");\n  // function utils\n\n  /**\n   * Memoize a given function by caching the computed result.\n   * The cache of a memoized function can be cleared by deleting the `cache`\n   * property of the function.\n   *\n   * @param {function} fn                     The function to be memoized.\n   *                                          Must be a pure function.\n   * @param {Object} [options]\n   * @param {function(args: Array): string} [options.hasher]\n   *    A custom hash builder. Is JSON.stringify by default.\n   * @param {number | undefined} [options.limit]\n   *    Maximum number of values that may be cached. Undefined indicates\n   *    unlimited (default)\n   * @return {function}                       Returns the memoized function\n   */\n  function memoize(fn) {\n    var {\n      hasher,\n      limit\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    limit = limit == null ? Number.POSITIVE_INFINITY : limit;\n    hasher = hasher == null ? JSON.stringify : hasher;\n    return function memoize() {\n      if (typeof memoize.cache !== 'object') {\n        memoize.cache = {\n          values: new Map(),\n          lru: (0, _lruQueueJs.lruQueue)(limit || Number.POSITIVE_INFINITY)\n        };\n      }\n      var args = [];\n      for (var i = 0; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n      var hash = hasher(args);\n      if (memoize.cache.values.has(hash)) {\n        memoize.cache.lru.hit(hash);\n        return memoize.cache.values.get(hash);\n      }\n      var newVal = fn.apply(fn, args);\n      memoize.cache.values.set(hash, newVal);\n      memoize.cache.values.delete(memoize.cache.lru.hit(hash));\n      return newVal;\n    };\n  }\n\n  /**\n   * Memoize a given function by caching all results and the arguments,\n   * and comparing against the arguments of previous results before\n   * executing again.\n   * This is less performant than `memoize` which calculates a hash,\n   * which is very fast to compare. Use `memoizeCompare` only when it is\n   * not possible to create a unique serializable hash from the function\n   * arguments.\n   * The isEqual function must compare two sets of arguments\n   * and return true when equal (can be a deep equality check for example).\n   * @param {function} fn\n   * @param {function(a: *, b: *) : boolean} isEqual\n   * @returns {function}\n   */\n  function memoizeCompare(fn, isEqual) {\n    var memoize = function memoize() {\n      var args = [];\n      for (var i = 0; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n      for (var c = 0; c < memoize.cache.length; c++) {\n        var cached = memoize.cache[c];\n        if (isEqual(args, cached.args)) {\n          // TODO: move this cache entry to the top so recently used entries move up?\n          return cached.res;\n        }\n      }\n      var res = fn.apply(fn, args);\n      memoize.cache.unshift({\n        args,\n        res\n      });\n      return res;\n    };\n    memoize.cache = [];\n    return memoize;\n  }\n});","lineCount":94,"map":[[7,2,20,0,"exports"],[7,9,20,0],[7,10,20,0,"memoize"],[7,17,20,0],[7,20,20,0,"memoize"],[7,27,20,0],[8,2,64,0,"exports"],[8,9,64,0],[8,10,64,0,"memoizeCompare"],[8,24,64,0],[8,27,64,0,"memoizeCompare"],[8,41,64,0],[9,2,3,0],[9,6,3,0,"_lruQueueJs"],[9,17,3,0],[9,20,3,0,"require"],[9,27,3,0],[9,28,3,0,"_dependencyMap"],[9,42,3,0],[10,2,1,0],[12,2,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,2,20,7],[27,11,20,16,"memoize"],[27,18,20,23,"memoize"],[27,19,20,24,"fn"],[27,21,20,26],[27,23,20,28],[28,4,21,2],[28,8,21,6],[29,6,22,4,"hasher"],[29,12,22,10],[30,6,23,4,"limit"],[31,4,24,2],[31,5,24,3],[31,8,24,6,"arguments"],[31,17,24,15],[31,18,24,16,"length"],[31,24,24,22],[31,27,24,25],[31,28,24,26],[31,32,24,30,"arguments"],[31,41,24,39],[31,42,24,40],[31,43,24,41],[31,44,24,42],[31,49,24,47,"undefined"],[31,58,24,56],[31,61,24,59,"arguments"],[31,70,24,68],[31,71,24,69],[31,72,24,70],[31,73,24,71],[31,76,24,74],[31,77,24,75],[31,78,24,76],[32,4,25,2,"limit"],[32,9,25,7],[32,12,25,10,"limit"],[32,17,25,15],[32,21,25,19],[32,25,25,23],[32,28,25,26,"Number"],[32,34,25,32],[32,35,25,33,"POSITIVE_INFINITY"],[32,52,25,50],[32,55,25,53,"limit"],[32,60,25,58],[33,4,26,2,"hasher"],[33,10,26,8],[33,13,26,11,"hasher"],[33,19,26,17],[33,23,26,21],[33,27,26,25],[33,30,26,28,"JSON"],[33,34,26,32],[33,35,26,33,"stringify"],[33,44,26,42],[33,47,26,45,"hasher"],[33,53,26,51],[34,4,27,2],[34,11,27,9],[34,20,27,18,"memoize"],[34,27,27,25,"memoize"],[34,28,27,25],[34,30,27,28],[35,6,28,4],[35,10,28,8],[35,17,28,15,"memoize"],[35,24,28,22],[35,25,28,23,"cache"],[35,30,28,28],[35,35,28,33],[35,43,28,41],[35,45,28,43],[36,8,29,6,"memoize"],[36,15,29,13],[36,16,29,14,"cache"],[36,21,29,19],[36,24,29,22],[37,10,30,8,"values"],[37,16,30,14],[37,18,30,16],[37,22,30,20,"Map"],[37,25,30,23],[37,26,30,24],[37,27,30,25],[38,10,31,8,"lru"],[38,13,31,11],[38,15,31,13],[38,19,31,13,"lruQueue"],[38,30,31,21],[38,31,31,21,"lruQueue"],[38,39,31,21],[38,41,31,22,"limit"],[38,46,31,27],[38,50,31,31,"Number"],[38,56,31,37],[38,57,31,38,"POSITIVE_INFINITY"],[38,74,31,55],[39,8,32,6],[39,9,32,7],[40,6,33,4],[41,6,34,4],[41,10,34,8,"args"],[41,14,34,12],[41,17,34,15],[41,19,34,17],[42,6,35,4],[42,11,35,9],[42,15,35,13,"i"],[42,16,35,14],[42,19,35,17],[42,20,35,18],[42,22,35,20,"i"],[42,23,35,21],[42,26,35,24,"arguments"],[42,35,35,33],[42,36,35,34,"length"],[42,42,35,40],[42,44,35,42,"i"],[42,45,35,43],[42,47,35,45],[42,49,35,47],[43,8,36,6,"args"],[43,12,36,10],[43,13,36,11,"i"],[43,14,36,12],[43,15,36,13],[43,18,36,16,"arguments"],[43,27,36,25],[43,28,36,26,"i"],[43,29,36,27],[43,30,36,28],[44,6,37,4],[45,6,38,4],[45,10,38,8,"hash"],[45,14,38,12],[45,17,38,15,"hasher"],[45,23,38,21],[45,24,38,22,"args"],[45,28,38,26],[45,29,38,27],[46,6,39,4],[46,10,39,8,"memoize"],[46,17,39,15],[46,18,39,16,"cache"],[46,23,39,21],[46,24,39,22,"values"],[46,30,39,28],[46,31,39,29,"has"],[46,34,39,32],[46,35,39,33,"hash"],[46,39,39,37],[46,40,39,38],[46,42,39,40],[47,8,40,6,"memoize"],[47,15,40,13],[47,16,40,14,"cache"],[47,21,40,19],[47,22,40,20,"lru"],[47,25,40,23],[47,26,40,24,"hit"],[47,29,40,27],[47,30,40,28,"hash"],[47,34,40,32],[47,35,40,33],[48,8,41,6],[48,15,41,13,"memoize"],[48,22,41,20],[48,23,41,21,"cache"],[48,28,41,26],[48,29,41,27,"values"],[48,35,41,33],[48,36,41,34,"get"],[48,39,41,37],[48,40,41,38,"hash"],[48,44,41,42],[48,45,41,43],[49,6,42,4],[50,6,43,4],[50,10,43,8,"newVal"],[50,16,43,14],[50,19,43,17,"fn"],[50,21,43,19],[50,22,43,20,"apply"],[50,27,43,25],[50,28,43,26,"fn"],[50,30,43,28],[50,32,43,30,"args"],[50,36,43,34],[50,37,43,35],[51,6,44,4,"memoize"],[51,13,44,11],[51,14,44,12,"cache"],[51,19,44,17],[51,20,44,18,"values"],[51,26,44,24],[51,27,44,25,"set"],[51,30,44,28],[51,31,44,29,"hash"],[51,35,44,33],[51,37,44,35,"newVal"],[51,43,44,41],[51,44,44,42],[52,6,45,4,"memoize"],[52,13,45,11],[52,14,45,12,"cache"],[52,19,45,17],[52,20,45,18,"values"],[52,26,45,24],[52,27,45,25,"delete"],[52,33,45,31],[52,34,45,32,"memoize"],[52,41,45,39],[52,42,45,40,"cache"],[52,47,45,45],[52,48,45,46,"lru"],[52,51,45,49],[52,52,45,50,"hit"],[52,55,45,53],[52,56,45,54,"hash"],[52,60,45,58],[52,61,45,59],[52,62,45,60],[53,6,46,4],[53,13,46,11,"newVal"],[53,19,46,17],[54,4,47,2],[54,5,47,3],[55,2,48,0],[57,2,50,0],[58,0,51,0],[59,0,52,0],[60,0,53,0],[61,0,54,0],[62,0,55,0],[63,0,56,0],[64,0,57,0],[65,0,58,0],[66,0,59,0],[67,0,60,0],[68,0,61,0],[69,0,62,0],[70,0,63,0],[71,2,64,7],[71,11,64,16,"memoizeCompare"],[71,25,64,30,"memoizeCompare"],[71,26,64,31,"fn"],[71,28,64,33],[71,30,64,35,"isEqual"],[71,37,64,42],[71,39,64,44],[72,4,65,2],[72,8,65,6,"memoize"],[72,15,65,13],[72,18,65,16],[72,27,65,25,"memoize"],[72,34,65,32,"memoize"],[72,35,65,32],[72,37,65,35],[73,6,66,4],[73,10,66,8,"args"],[73,14,66,12],[73,17,66,15],[73,19,66,17],[74,6,67,4],[74,11,67,9],[74,15,67,13,"i"],[74,16,67,14],[74,19,67,17],[74,20,67,18],[74,22,67,20,"i"],[74,23,67,21],[74,26,67,24,"arguments"],[74,35,67,33],[74,36,67,34,"length"],[74,42,67,40],[74,44,67,42,"i"],[74,45,67,43],[74,47,67,45],[74,49,67,47],[75,8,68,6,"args"],[75,12,68,10],[75,13,68,11,"i"],[75,14,68,12],[75,15,68,13],[75,18,68,16,"arguments"],[75,27,68,25],[75,28,68,26,"i"],[75,29,68,27],[75,30,68,28],[76,6,69,4],[77,6,70,4],[77,11,70,9],[77,15,70,13,"c"],[77,16,70,14],[77,19,70,17],[77,20,70,18],[77,22,70,20,"c"],[77,23,70,21],[77,26,70,24,"memoize"],[77,33,70,31],[77,34,70,32,"cache"],[77,39,70,37],[77,40,70,38,"length"],[77,46,70,44],[77,48,70,46,"c"],[77,49,70,47],[77,51,70,49],[77,53,70,51],[78,8,71,6],[78,12,71,10,"cached"],[78,18,71,16],[78,21,71,19,"memoize"],[78,28,71,26],[78,29,71,27,"cache"],[78,34,71,32],[78,35,71,33,"c"],[78,36,71,34],[78,37,71,35],[79,8,72,6],[79,12,72,10,"isEqual"],[79,19,72,17],[79,20,72,18,"args"],[79,24,72,22],[79,26,72,24,"cached"],[79,32,72,30],[79,33,72,31,"args"],[79,37,72,35],[79,38,72,36],[79,40,72,38],[80,10,73,8],[81,10,74,8],[81,17,74,15,"cached"],[81,23,74,21],[81,24,74,22,"res"],[81,27,74,25],[82,8,75,6],[83,6,76,4],[84,6,77,4],[84,10,77,8,"res"],[84,13,77,11],[84,16,77,14,"fn"],[84,18,77,16],[84,19,77,17,"apply"],[84,24,77,22],[84,25,77,23,"fn"],[84,27,77,25],[84,29,77,27,"args"],[84,33,77,31],[84,34,77,32],[85,6,78,4,"memoize"],[85,13,78,11],[85,14,78,12,"cache"],[85,19,78,17],[85,20,78,18,"unshift"],[85,27,78,25],[85,28,78,26],[86,8,79,6,"args"],[86,12,79,10],[87,8,80,6,"res"],[88,6,81,4],[88,7,81,5],[88,8,81,6],[89,6,82,4],[89,13,82,11,"res"],[89,16,82,14],[90,4,83,2],[90,5,83,3],[91,4,84,2,"memoize"],[91,11,84,9],[91,12,84,10,"cache"],[91,17,84,15],[91,20,84,18],[91,22,84,20],[92,4,85,2],[92,11,85,9,"memoize"],[92,18,85,16],[93,2,86,0],[94,0,86,1],[94,3]],"functionMap":{"names":["<global>","memoize","memoizeCompare"],"mappings":"AAA;OCmB;CD4B;OEgB;gBDC;GCkB"},"hasCjsExports":false},"type":"js/module"}]}