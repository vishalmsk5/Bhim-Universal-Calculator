{"dependencies":[{"name":"./csReach.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":183},"end":{"line":4,"column":39,"index":222}}],"key":"CD2JoKmZRVIF1Li0PfrcMsdGhZU=","exportNames":["*"],"imports":1}},{"name":"../../../utils/factory.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":223},"end":{"line":5,"column":52,"index":275}}],"key":"KU+ylfkKMfPqN+K7au00AyefVHo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createCsSpsolve\", {\n    enumerable: true,\n    get: function () {\n      return createCsSpsolve;\n    }\n  });\n  var _csReachJs = require(_dependencyMap[0], \"./csReach.js\");\n  var _utilsFactoryJs = require(_dependencyMap[1], \"../../../utils/factory.js\");\n  // Copyright (c) 2006-2024, Timothy A. Davis, All Rights Reserved.\n  // SPDX-License-Identifier: LGPL-2.1+\n  // https://github.com/DrTimothyAldenDavis/SuiteSparse/tree/dev/CSparse/Source\n\n  var name = 'csSpsolve';\n  var dependencies = ['divideScalar', 'multiply', 'subtract'];\n  var createCsSpsolve = /* #__PURE__ */(0, _utilsFactoryJs.factory)(name, dependencies, _ref => {\n    var {\n      divideScalar,\n      multiply,\n      subtract\n    } = _ref;\n    /**\n     * The function csSpsolve() computes the solution to G * x = bk, where bk is the\n     * kth column of B. When lo is true, the function assumes G = L is lower triangular with the\n     * diagonal entry as the first entry in each column. When lo is true, the function assumes G = U\n     * is upper triangular with the diagonal entry as the last entry in each column.\n     *\n     * @param {Matrix}  g               The G matrix\n     * @param {Matrix}  b               The B matrix\n     * @param {Number}  k               The kth column in B\n     * @param {Array}   xi              The nonzero pattern xi[top] .. xi[n - 1], an array of size = 2 * n\n     *                                  The first n entries is the nonzero pattern, the last n entries is the stack\n     * @param {Array}   x               The soluton to the linear system G * x = b\n     * @param {Array}   pinv            The inverse row permutation vector, must be null for L * x = b\n     * @param {boolean} lo              The lower (true) upper triangular (false) flag\n     *\n     * @return {Number}                 The index for the nonzero pattern\n     */\n    return function csSpsolve(g, b, k, xi, x, pinv, lo) {\n      // g arrays\n      var gvalues = g._values;\n      var gindex = g._index;\n      var gptr = g._ptr;\n      var gsize = g._size;\n      // columns\n      var n = gsize[1];\n      // b arrays\n      var bvalues = b._values;\n      var bindex = b._index;\n      var bptr = b._ptr;\n      // vars\n      var p, p0, p1, q;\n      // xi[top..n-1] = csReach(B(:,k))\n      var top = (0, _csReachJs.csReach)(g, b, k, xi, pinv);\n      // clear x\n      for (p = top; p < n; p++) {\n        x[xi[p]] = 0;\n      }\n      // scatter b\n      for (p0 = bptr[k], p1 = bptr[k + 1], p = p0; p < p1; p++) {\n        x[bindex[p]] = bvalues[p];\n      }\n      // loop columns\n      for (var px = top; px < n; px++) {\n        // x array index for px\n        var j = xi[px];\n        // apply permutation vector (U x = b), j maps to column J of G\n        var J = pinv ? pinv[j] : j;\n        // check column J is empty\n        if (J < 0) {\n          continue;\n        }\n        // column value indeces in G, p0 <= p < p1\n        p0 = gptr[J];\n        p1 = gptr[J + 1];\n        // x(j) /= G(j,j)\n        x[j] = divideScalar(x[j], gvalues[lo ? p0 : p1 - 1]);\n        // first entry L(j,j)\n        p = lo ? p0 + 1 : p0;\n        q = lo ? p1 : p1 - 1;\n        // loop\n        for (; p < q; p++) {\n          // row\n          var i = gindex[p];\n          // x(i) -= G(i,j) * x(j)\n          x[i] = subtract(x[i], multiply(gvalues[p], x[j]));\n        }\n      }\n      // return top of stack\n      return top;\n    };\n  });\n});","lineCount":98,"map":[[7,2,8,0,"Object"],[7,8,8,0],[7,9,8,0,"defineProperty"],[7,23,8,0],[7,24,8,0,"exports"],[7,31,8,0],[8,4,8,0,"enumerable"],[8,14,8,0],[9,4,8,0,"get"],[9,7,8,0],[9,18,8,0,"get"],[9,19,8,0],[10,6,8,0],[10,13,8,0,"createCsSpsolve"],[10,28,8,0],[11,4,8,0],[12,2,8,0],[13,2,4,0],[13,6,4,0,"_csReachJs"],[13,16,4,0],[13,19,4,0,"require"],[13,26,4,0],[13,27,4,0,"_dependencyMap"],[13,41,4,0],[14,2,5,0],[14,6,5,0,"_utilsFactoryJs"],[14,21,5,0],[14,24,5,0,"require"],[14,31,5,0],[14,32,5,0,"_dependencyMap"],[14,46,5,0],[15,2,1,0],[16,2,2,0],[17,2,3,0],[19,2,6,0],[19,6,6,4,"name"],[19,10,6,8],[19,13,6,11],[19,24,6,22],[20,2,7,0],[20,6,7,4,"dependencies"],[20,18,7,16],[20,21,7,19],[20,22,7,20],[20,36,7,34],[20,38,7,36],[20,48,7,46],[20,50,7,48],[20,60,7,58],[20,61,7,59],[21,2,8,7],[21,6,8,11,"createCsSpsolve"],[21,21,8,26],[21,24,8,29],[21,39,8,44],[21,43,8,44,"factory"],[21,58,8,51],[21,59,8,51,"factory"],[21,66,8,51],[21,68,8,52,"name"],[21,72,8,56],[21,74,8,58,"dependencies"],[21,86,8,70],[21,88,8,72,"_ref"],[21,92,8,76],[21,96,8,80],[22,4,9,2],[22,8,9,6],[23,6,10,4,"divideScalar"],[23,18,10,16],[24,6,11,4,"multiply"],[24,14,11,12],[25,6,12,4,"subtract"],[26,4,13,2],[26,5,13,3],[26,8,13,6,"_ref"],[26,12,13,10],[27,4,14,2],[28,0,15,0],[29,0,16,0],[30,0,17,0],[31,0,18,0],[32,0,19,0],[33,0,20,0],[34,0,21,0],[35,0,22,0],[36,0,23,0],[37,0,24,0],[38,0,25,0],[39,0,26,0],[40,0,27,0],[41,0,28,0],[42,0,29,0],[43,0,30,0],[44,4,31,2],[44,11,31,9],[44,20,31,18,"csSpsolve"],[44,29,31,27,"csSpsolve"],[44,30,31,28,"g"],[44,31,31,29],[44,33,31,31,"b"],[44,34,31,32],[44,36,31,34,"k"],[44,37,31,35],[44,39,31,37,"xi"],[44,41,31,39],[44,43,31,41,"x"],[44,44,31,42],[44,46,31,44,"pinv"],[44,50,31,48],[44,52,31,50,"lo"],[44,54,31,52],[44,56,31,54],[45,6,32,4],[46,6,33,4],[46,10,33,8,"gvalues"],[46,17,33,15],[46,20,33,18,"g"],[46,21,33,19],[46,22,33,20,"_values"],[46,29,33,27],[47,6,34,4],[47,10,34,8,"gindex"],[47,16,34,14],[47,19,34,17,"g"],[47,20,34,18],[47,21,34,19,"_index"],[47,27,34,25],[48,6,35,4],[48,10,35,8,"gptr"],[48,14,35,12],[48,17,35,15,"g"],[48,18,35,16],[48,19,35,17,"_ptr"],[48,23,35,21],[49,6,36,4],[49,10,36,8,"gsize"],[49,15,36,13],[49,18,36,16,"g"],[49,19,36,17],[49,20,36,18,"_size"],[49,25,36,23],[50,6,37,4],[51,6,38,4],[51,10,38,8,"n"],[51,11,38,9],[51,14,38,12,"gsize"],[51,19,38,17],[51,20,38,18],[51,21,38,19],[51,22,38,20],[52,6,39,4],[53,6,40,4],[53,10,40,8,"bvalues"],[53,17,40,15],[53,20,40,18,"b"],[53,21,40,19],[53,22,40,20,"_values"],[53,29,40,27],[54,6,41,4],[54,10,41,8,"bindex"],[54,16,41,14],[54,19,41,17,"b"],[54,20,41,18],[54,21,41,19,"_index"],[54,27,41,25],[55,6,42,4],[55,10,42,8,"bptr"],[55,14,42,12],[55,17,42,15,"b"],[55,18,42,16],[55,19,42,17,"_ptr"],[55,23,42,21],[56,6,43,4],[57,6,44,4],[57,10,44,8,"p"],[57,11,44,9],[57,13,44,11,"p0"],[57,15,44,13],[57,17,44,15,"p1"],[57,19,44,17],[57,21,44,19,"q"],[57,22,44,20],[58,6,45,4],[59,6,46,4],[59,10,46,8,"top"],[59,13,46,11],[59,16,46,14],[59,20,46,14,"csReach"],[59,30,46,21],[59,31,46,21,"csReach"],[59,38,46,21],[59,40,46,22,"g"],[59,41,46,23],[59,43,46,25,"b"],[59,44,46,26],[59,46,46,28,"k"],[59,47,46,29],[59,49,46,31,"xi"],[59,51,46,33],[59,53,46,35,"pinv"],[59,57,46,39],[59,58,46,40],[60,6,47,4],[61,6,48,4],[61,11,48,9,"p"],[61,12,48,10],[61,15,48,13,"top"],[61,18,48,16],[61,20,48,18,"p"],[61,21,48,19],[61,24,48,22,"n"],[61,25,48,23],[61,27,48,25,"p"],[61,28,48,26],[61,30,48,28],[61,32,48,30],[62,8,49,6,"x"],[62,9,49,7],[62,10,49,8,"xi"],[62,12,49,10],[62,13,49,11,"p"],[62,14,49,12],[62,15,49,13],[62,16,49,14],[62,19,49,17],[62,20,49,18],[63,6,50,4],[64,6,51,4],[65,6,52,4],[65,11,52,9,"p0"],[65,13,52,11],[65,16,52,14,"bptr"],[65,20,52,18],[65,21,52,19,"k"],[65,22,52,20],[65,23,52,21],[65,25,52,23,"p1"],[65,27,52,25],[65,30,52,28,"bptr"],[65,34,52,32],[65,35,52,33,"k"],[65,36,52,34],[65,39,52,37],[65,40,52,38],[65,41,52,39],[65,43,52,41,"p"],[65,44,52,42],[65,47,52,45,"p0"],[65,49,52,47],[65,51,52,49,"p"],[65,52,52,50],[65,55,52,53,"p1"],[65,57,52,55],[65,59,52,57,"p"],[65,60,52,58],[65,62,52,60],[65,64,52,62],[66,8,53,6,"x"],[66,9,53,7],[66,10,53,8,"bindex"],[66,16,53,14],[66,17,53,15,"p"],[66,18,53,16],[66,19,53,17],[66,20,53,18],[66,23,53,21,"bvalues"],[66,30,53,28],[66,31,53,29,"p"],[66,32,53,30],[66,33,53,31],[67,6,54,4],[68,6,55,4],[69,6,56,4],[69,11,56,9],[69,15,56,13,"px"],[69,17,56,15],[69,20,56,18,"top"],[69,23,56,21],[69,25,56,23,"px"],[69,27,56,25],[69,30,56,28,"n"],[69,31,56,29],[69,33,56,31,"px"],[69,35,56,33],[69,37,56,35],[69,39,56,37],[70,8,57,6],[71,8,58,6],[71,12,58,10,"j"],[71,13,58,11],[71,16,58,14,"xi"],[71,18,58,16],[71,19,58,17,"px"],[71,21,58,19],[71,22,58,20],[72,8,59,6],[73,8,60,6],[73,12,60,10,"J"],[73,13,60,11],[73,16,60,14,"pinv"],[73,20,60,18],[73,23,60,21,"pinv"],[73,27,60,25],[73,28,60,26,"j"],[73,29,60,27],[73,30,60,28],[73,33,60,31,"j"],[73,34,60,32],[74,8,61,6],[75,8,62,6],[75,12,62,10,"J"],[75,13,62,11],[75,16,62,14],[75,17,62,15],[75,19,62,17],[76,10,63,8],[77,8,64,6],[78,8,65,6],[79,8,66,6,"p0"],[79,10,66,8],[79,13,66,11,"gptr"],[79,17,66,15],[79,18,66,16,"J"],[79,19,66,17],[79,20,66,18],[80,8,67,6,"p1"],[80,10,67,8],[80,13,67,11,"gptr"],[80,17,67,15],[80,18,67,16,"J"],[80,19,67,17],[80,22,67,20],[80,23,67,21],[80,24,67,22],[81,8,68,6],[82,8,69,6,"x"],[82,9,69,7],[82,10,69,8,"j"],[82,11,69,9],[82,12,69,10],[82,15,69,13,"divideScalar"],[82,27,69,25],[82,28,69,26,"x"],[82,29,69,27],[82,30,69,28,"j"],[82,31,69,29],[82,32,69,30],[82,34,69,32,"gvalues"],[82,41,69,39],[82,42,69,40,"lo"],[82,44,69,42],[82,47,69,45,"p0"],[82,49,69,47],[82,52,69,50,"p1"],[82,54,69,52],[82,57,69,55],[82,58,69,56],[82,59,69,57],[82,60,69,58],[83,8,70,6],[84,8,71,6,"p"],[84,9,71,7],[84,12,71,10,"lo"],[84,14,71,12],[84,17,71,15,"p0"],[84,19,71,17],[84,22,71,20],[84,23,71,21],[84,26,71,24,"p0"],[84,28,71,26],[85,8,72,6,"q"],[85,9,72,7],[85,12,72,10,"lo"],[85,14,72,12],[85,17,72,15,"p1"],[85,19,72,17],[85,22,72,20,"p1"],[85,24,72,22],[85,27,72,25],[85,28,72,26],[86,8,73,6],[87,8,74,6],[87,15,74,13,"p"],[87,16,74,14],[87,19,74,17,"q"],[87,20,74,18],[87,22,74,20,"p"],[87,23,74,21],[87,25,74,23],[87,27,74,25],[88,10,75,8],[89,10,76,8],[89,14,76,12,"i"],[89,15,76,13],[89,18,76,16,"gindex"],[89,24,76,22],[89,25,76,23,"p"],[89,26,76,24],[89,27,76,25],[90,10,77,8],[91,10,78,8,"x"],[91,11,78,9],[91,12,78,10,"i"],[91,13,78,11],[91,14,78,12],[91,17,78,15,"subtract"],[91,25,78,23],[91,26,78,24,"x"],[91,27,78,25],[91,28,78,26,"i"],[91,29,78,27],[91,30,78,28],[91,32,78,30,"multiply"],[91,40,78,38],[91,41,78,39,"gvalues"],[91,48,78,46],[91,49,78,47,"p"],[91,50,78,48],[91,51,78,49],[91,53,78,51,"x"],[91,54,78,52],[91,55,78,53,"j"],[91,56,78,54],[91,57,78,55],[91,58,78,56],[91,59,78,57],[92,8,79,6],[93,6,80,4],[94,6,81,4],[95,6,82,4],[95,13,82,11,"top"],[95,16,82,14],[96,4,83,2],[96,5,83,3],[97,2,84,0],[97,3,84,1],[97,4,84,2],[98,0,84,3],[98,3]],"functionMap":{"names":["<global>","factory$argument_2","csSpsolve"],"mappings":"AAA;wECO;SCuB;GDoD;CDC"},"hasCjsExports":false},"type":"js/module"}]}